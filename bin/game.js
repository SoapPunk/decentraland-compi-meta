"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(E){let O=0,_t=[],Ft=[];const Pt={baseUrl:""},Dt={};function d(E,_t,Ft){let Pt=null,Lt={},Ut=null;"function"==typeof E?Lt=E:"string"==typeof E?(Pt=E,"function"==typeof _t?Lt=_t:_t instanceof Array&&(Ut=_t,Lt=Ft)):E instanceof Array&&(Ut=E,"function"==typeof _t&&(Lt=_t)),Ut=Ut||["require","exports","module"],null===Pt&&(Pt="unnamed-module-"+O++),Pt=g(Pt),Ut=(Ut||[]).map((E=>function(E,O){return E?b(O,E):O}(Pt,E))),Dt[Pt]||(Dt[Pt]={name:Pt,parent:null,dclamd:1,dependencies:Ut,handlers:[],exports:{},dependants:new Set}),Dt[Pt].dependencies=Ut,p(Ut,(function(E){const O=Dt[Pt];if(!O)throw new Error("Could not access registered module "+Pt);let _t=O.exports;_t="function"==typeof Lt?Lt.apply(globalObject,E)||_t:Lt,O.exports=_t,u(Pt)}),(E=>{if("function"!=typeof onerror)throw E;onerror(E)}),Pt)}function u(E){const O=Dt[E];if(!O)throw new Error("Could not access registered module "+E);O.dclamd=2;let _t=O.handlers;if(_t&&_t.length)for(let O=0;O<_t.length;O++)_t[O](Dt[E])}function c(E,O,_t){if(!Dt[E])return null;if(E==O||50==_t)return[E];const Ft=Dt[E].dependencies;for(let Pt=0,Dt=Ft.length;Pt<Dt;Pt++){let Dt=c(Ft[Pt],O,_t+1);if(null!==Dt)return Dt.push(E),Dt}return null}function a(E,O){let _t=Dt[E];if(!_t)return!1;let Ft={};for(let E in Dt)Ft[E]=!1;let Pt=[];for(Pt.push(_t),Ft[E]=!0;Pt.length>0;){let E=Pt.shift().dependencies;if(E)for(let _t=0,Lt=E.length;_t<Lt;_t++){let Lt=E[_t];if(Lt===O)return!0;let Ut=Dt[Lt];Ut&&!Ft[Lt]&&(Ft[Lt]=!0,Pt.push(Ut))}}return!1}function p(E,O,_t,Pt){let Lt=new Array(E.length).fill(null),Ut=0,Xt=!1;if("string"==typeof E){if(Dt[E]){if(1===Dt[E].dclamd)throw new Error(`Trying to load ${E} from ${Pt}. The first module is still loading.`);return Dt[E]}throw new Error(E+" has not been defined. Please include it as a dependency in "+Pt+"'s define()")}const Kt=E.length;for(let Zt=0;Zt<Kt;Zt++)switch(E[Zt]){case"require":let h=function(E,O,_t){return p(E,O,_t,Pt)};h.toUrl=function(E){return b(E,Pt)},Lt[Zt]=h,Ut++;break;case"exports":if(!Dt[Pt])throw new Error("Parent module "+Pt+" not registered yet");Lt[Zt]=Dt[Pt].exports,Ut++;break;case"module":Lt[Zt]={id:Pt,uri:b(Pt)},Ut++;break;default:{const le=E[Zt],m=()=>{Lt[Zt]=Dt[le].exports,Ut++,Ut===Kt&&O&&(Xt=!0,O(Lt))};if(a(le,Pt)){const E=c(le,Pt,0);E&&(E.reverse(),E.push(le),Ft.push(E)),w(le,(()=>{}),_t,Pt),m()}else w(le,m,_t,Pt);break}}!Xt&&Ut===Kt&&O&&O(Lt)}function h(E,O){return function(){return dcl.callRpc(E,O.name,_t.slice.call(arguments,0))}}function w(E,O,_t,Ft){if(Dt[E])return Dt[E].dependants.add(Ft),void(1===Dt[E].dclamd?O&&Dt[E].handlers.push(O):O&&O(Dt[E]));if(Dt[E]={name:E,parent:Ft,dclamd:1,handlers:[O],dependencies:[],dependants:new Set([Ft]),exports:{}},0===E.indexOf("@")){let O=Dt[E].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(E,O).then((_t=>{for(let E in _t.methods){const Ft=_t.methods[E];O[Ft.name]=h(_t.rpcHandle,Ft)}u(E)})).catch((E=>{_t(E)}))}}function g(E){let O,_t=E;for(O=/\/\.\//;O.test(_t);)_t=_t.replace(O,"/");for(_t=_t.replace(/^\.\//g,""),O=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;O.test(_t);)_t=_t.replace(O,"/");return _t=_t.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),_t=_t.replace(/^\//g,""),_t}function b(E,O){switch(E){case"require":case"exports":case"module":return E}return O?function(E,O){let _t=E;if(!_t.startsWith("@")&&(_t.startsWith("./")||_t.startsWith("../"))){const E=O.split("/");E.pop(),_t=g(E.join("/")+"/"+_t)}return _t}(E,O):g(E)}E.config=function(E){if("object"==typeof E)for(let O in E)E.hasOwnProperty(O)&&(Pt[O]=E[O])},E.define=d,function(E){E.amd={},E.modules=Dt}(d=E.define||(E.define={})),E.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const E=new Set,O=[];for(let _t in Dt)Dt[_t]&&(1===Dt[_t].dclamd&&O.push(Dt[_t]),Dt[_t].dependencies.forEach((O=>{"require"!=O&&"exports"!=O&&"module"!=O&&(Dt[O]||E.add(O))})));const _t=[];if(Ft.length&&_t.push(`\n> Cyclic dependencies: ${Ft.map((E=>"\n  - "+E.join(" -> "))).join("")}`),E.size&&_t.push(`\n> Undeclared/unknown modules: ${Array.from(E).map((E=>"\n  - "+E)).join("")}`),O.length&&_t.push(`\n> These modules didn't load: ${O.map((E=>"\n  - "+E.name)).join("")}.\n`),_t.length)throw new Error(_t.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(E){var O=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(E){return E.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(E){return E.firstPersonCameraEntity}},t}(),n=function(E,O){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,O){E.__proto__=O}||function(E,O){for(var _t in O)Object.prototype.hasOwnProperty.call(O,_t)&&(E[_t]=O[_t])})(E,O)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(E,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function o(){this.constructor=E}n(E,O),E.prototype=null===O?Object.create(O):(o.prototype=O.prototype,new o)}var i=function(){return(i=Object.assign||function(E){for(var O,_t=1,Ft=arguments.length;_t<Ft;_t++)for(var Pt in O=arguments[_t])Object.prototype.hasOwnProperty.call(O,Pt)&&(E[Pt]=O[Pt]);return E}).apply(this,arguments)};function r(E,O,_t,Ft){var Pt,Dt=arguments.length,Lt=Dt<3?O:null===Ft?Ft=Object.getOwnPropertyDescriptor(O,_t):Ft;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Lt=Reflect.decorate(E,O,_t,Ft);else for(var Ut=E.length-1;Ut>=0;Ut--)(Pt=E[Ut])&&(Lt=(Dt<3?Pt(Lt):Dt>3?Pt(O,_t,Lt):Pt(O,_t))||Lt);return Dt>3&&Lt&&Object.defineProperty(O,_t,Lt),Lt}function u(E){var O="function"==typeof Symbol&&Symbol.iterator,_t=O&&E[O],Ft=0;if(_t)return _t.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&Ft>=E.length&&(E=void 0),{value:E&&E[Ft++],done:!E}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(E,O){var _t="function"==typeof Symbol&&E[Symbol.iterator];if(!_t)return E;var Ft,Pt,Dt=_t.call(E),Lt=[];try{for(;(void 0===O||O-- >0)&&!(Ft=Dt.next()).done;)Lt.push(Ft.value)}catch(E){Pt={error:E}}finally{try{Ft&&!Ft.done&&(_t=Dt.return)&&_t.call(Dt)}finally{if(Pt)throw Pt.error}}return Lt}function h(E,O){for(var _t=0,Ft=O.length,Pt=E.length;_t<Ft;_t++,Pt++)E[Pt]=O[_t];return E}var _t=0;function d(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];"undefined"!=typeof dcl?dcl.log.apply(dcl,h([],p(E))):console.log.apply(console,h(["DEBUG:"],p(E)))}function l(E,O){"undefined"!=typeof dcl?dcl.error(E,O):console.error("ERROR:",E,O)}function f(E){if(_t++,0===E.length)throw new Error("newId(type: string): type cannot be empty");return E+_t.toString(36)}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(E){var O=16*Math.random()|0;return("x"===E?O:3&O|8).toString(16)}))}function v(E,O){for(var _t=[],Ft=0;Ft<E;++Ft)_t.push(O());return _t}var Ft=[];function _(E){if(!("__event_name__"in E)||"string"!=typeof E.__event_name__)throw new Error("The EventConstructor is not registered");return E.__event_name__}var Pt=function(){function t(){this.listeners={}}return t.prototype.addListener=function(E,O,_t){if(!E||"function"!=typeof E)throw new Error("Invalid EventConstructor");var Ft=_(E),Pt=this.listeners[Ft];Pt||(Pt=this.listeners[Ft]=[]);for(var Dt=0;Dt<Pt.length;Dt++)if(Pt[Dt].listener===O)throw new Error("The provided listener is already registered");return Pt.push({listener:O,fn:_t}),this},t.prototype.removeListener=function(E,O){if(!O||"function"!=typeof O)throw new Error("Invalid EventConstructor");var _t=_(O),Ft=this.listeners[_t];if(!Ft)return!1;for(var Pt=0;Pt<Ft.length;Pt++)if(Ft[Pt].listener===E)return Ft.splice(Pt,1),!0;return!1},t.prototype.fireEvent=function(E){var O=_(E.constructor),_t=this.listeners[O];if(_t)for(var Ft=0;Ft<_t.length;Ft++)try{var Pt=_t[Ft];Pt.fn.call(Pt.listener,E)}catch(E){l(E)}return this},t}();function w(){var E=f("EV");if(-1!==Ft.indexOf(E))throw new Error("The event name "+E+" is already taken");return Ft.push(E),function(O){return O.__event_name__=E,O}}var Dt,Lt=r([w()],(function(E,O,_t){this.entity=E,this.componentName=O,this.component=_t})),Ut=r([w()],(function(E,O,_t){this.entity=E,this.componentName=O,this.classId=_t})),Xt=r([w()],(function(E,O){this.entity=E,this.parent=O}));E.UIValueType=void 0,(Dt=E.UIValueType||(E.UIValueType={}))[Dt.PERCENT=0]="PERCENT",Dt[Dt.PIXELS=1]="PIXELS";var Kt=function(){function e(O){if(this.type=E.UIValueType.PIXELS,"string"==typeof O){var _t=O;_t.indexOf("px")>-1?this.type=E.UIValueType.PIXELS:_t.indexOf("%")>-1&&(this.type=E.UIValueType.PERCENT),this.value=parseFloat(_t)}else this.value=O}return e.prototype.toString=function(){var O=this.value.toString();return this.type===E.UIValueType.PERCENT?O+="%":O+="px",O},e}(),Zt="__name__symbol_",le="__classId__symbol_",ve="__component__id_",Ce=r([w()],(function(E,O,_t){this.componentId=E,this.componentName=O,this.classId=_t})),Re=r([w()],(function(E){this.componentId=E})),Me=r([w()],(function(E,O){this.componentId=E,this.component=O}));function M(E,O){return function(_t){if(_t.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+_t.originalClassName+" with: "+E);var Ft=_t,i=function(){var _t=Array.prototype.slice.call(arguments),Pt=new(Ft.bind.apply(Ft,h([void 0],p(_t))));return Object.defineProperty(Pt,Zt,{enumerable:!1,writable:!1,configurable:!1,value:E}),void 0!==O&&Object.defineProperty(Pt,le,{enumerable:!1,writable:!1,configurable:!1,value:O}),Pt};return void 0!==O&&(i.__classId__symbol_=O),i.__name__symbol_=E,i.isComponent=!0,i.originalClassName=E,(i.prototype=_t.prototype).constructor=_t,i}}function F(E,O){return function(_t){if(_t.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+_t.originalClassName+" with: "+E);if("number"!=typeof O||isNaN(O))throw new Error("classId: "+O+" is an invalid integer");var Ft=_t,i=function(){if(!F.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var _t=Array.prototype.slice.call(arguments),Pt=new(Ft.bind.apply(Ft,h([void 0],p(_t)))),Dt=f("C");return Object.defineProperty(Pt,Zt,{enumerable:!1,writable:!1,configurable:!1,value:E}),Object.defineProperty(Pt,ve,{enumerable:!1,writable:!1,configurable:!1,value:Dt}),void 0!==O&&Object.defineProperty(Pt,le,{enumerable:!1,writable:!1,configurable:!1,value:O}),F.engine&&F.engine.registerComponent(Pt),Pt};return void 0!==O&&(i.__classId__symbol_=O),i.__name__symbol_=E,i.isComponent=!0,i.isDisposableComponent=!0,i.originalClassName=E,(i.prototype=_t.prototype).constructor=_t,i}}function L(E){if(!E)throw new TypeError(E+" is not a component.");if(E.__name__symbol_)return E.__name__symbol_;throw new TypeError(E+" is not a registered component.")}function N(E){if(!E)throw new TypeError(E+" is not a component.");if(E.__classId__symbol_)return E.__classId__symbol_;if(!E.__name__symbol_)throw new TypeError(E+" is not a registered component.");return null}function D(E){if(!E)throw new TypeError(E+" is not a component.");if(E.__component__id_)return E.__component__id_;throw new TypeError(E+" is not a registered disposable component.")}!function(E){E.engine=null}(F||(F={}));var Se=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(E,O){if(delete E[O]){var _t=O+"_"+Math.random();E[_t]=void 0,Object.defineProperty(E,_t,i(i({},Object.getOwnPropertyDescriptor(E,_t)),{enumerable:!1})),Object.defineProperty(E,O.toString(),{get:function(){return this[_t]},set:function(E){var Ft=this[_t];if(this.data[O]=E?D(E):null,this[_t]=E,E!==Ft){this.dirty=!0;for(var Pt=0;Pt<this.subscriptions.length;Pt++)this.subscriptions[Pt](O,E,Ft)}},enumerable:!0})}},t.field=function(E,O){delete E[O]&&Object.defineProperty(E,O.toString(),{get:function(){return this.data[O]},set:function(E){var _t=this.data[O];if(this.data[O]=E,E!==_t){this.dirty=!0;for(var Ft=0;Ft<this.subscriptions.length;Ft++)this.subscriptions[Ft](O,E,_t)}},enumerable:!0})},t.uiValue=function(E,O){delete E[O]&&Object.defineProperty(E,O.toString(),{get:function(){return this.data[O].toString()},set:function(E){var _t=this.data[O],Ft=new Kt(E);if(this.data[O]=Ft,Ft!==_t){this.dirty=!0;for(var Pt=0;Pt<this.subscriptions.length;Pt++)this.subscriptions[Pt](O,Ft,_t)}},enumerable:!0})},t.readonly=function(E,O){delete E[O]&&Object.defineProperty(E,O.toString(),{get:function(){if(O in this.data==0)throw new Error("The field "+O+" is uninitialized");return this.data[O]},set:function(E){if(O in this.data)throw new Error("The field "+O+" is readonly");this.data[O]=E,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(E){return this.subscriptions.push(E),this},t.prototype.toJSON=function(){return this.data},t}();function B(E){return ve in E}var Ie=function(){function t(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];if(this.entities=[],this.active=!1,this._requiresNames=[],!E)throw new Error("ComponentGroup: Could not load the requires list");if(!(E instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return E.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(O){var Ft=E[O],Pt=null;if(!Ft)throw new Error("ComponentGroup: the required component at location "+O+" is invalid");try{Pt=L(Ft)}catch(E){throw new Error("ComponentGroup: the required component at location "+O+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(_t._requiresNames.some((function(E){return E===Pt})))throw new Error("ComponentGroup: the required component list has a repeated name "+Pt);_t._requiresNames.push(Pt)},_t=this,Ft=0;Ft<E.length;Ft++)n(Ft)}return t.prototype.hasEntity=function(E){return!!E.isAddedToEngine()&&-1!==this.entities.indexOf(E)},t.prototype.addEntity=function(E){if(!E.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(E)&&this.entities.push(E)},t.prototype.removeEntity=function(E){var O=this.entities.indexOf(E);-1!==O&&this.entities.splice(O,1)},t.prototype.componentRemoved=function(E,O){-1!==this._requiresNames.indexOf(O)&&this.removeEntity(E)},t.prototype.meetsRequirements=function(E){for(var O=0;O<this._requiresNames.length;O++)if(!(this._requiresNames[O]in E.components))return!1;return!0},t}(),Fe=function(){function t(E){this.name=E,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(E){if("function"==typeof E)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof E)throw new Error("You passed a "+typeof E+", an instance of component is expected");var O=L(E);if(this.components[O]){if(this.components[O]===E)return E;this.removeComponent(this.components[O],!1)}return this.addComponent(E)},t.prototype.hasComponent=function(E){var O=typeof E;if("string"!==O&&"object"!==O&&"function"!==O)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==E)return!1;var _t="string"===O?E:L(E),Ft=this.components[_t];return!!Ft&&("object"===O?Ft===E:"function"!==O||Ft instanceof E)},t.prototype.getComponent=function(E){var O=typeof E;if("string"!==O&&"function"!==O)throw new Error("Entity#get(component): component is not a class or name");var _t="string"===O?E:L(E),Ft=this.components[_t];if(!Ft)throw new Error('Can not get component "'+_t+'" from entity "'+this.identifier+'"');if("function"===O){if(Ft instanceof E)return Ft;throw new Error('Can not get component "'+_t+'" from entity "'+this.identifier+'" (by instance)')}return Ft},t.prototype.getComponentOrNull=function(E){var O=typeof E;if("string"!==O&&"function"!==O)throw new Error("Entity#getOrNull(component): component is not a class or name");var _t="string"===O?E:L(E),Ft=this.components[_t];return Ft?"function"===O?Ft instanceof E?Ft:null:Ft:null},t.prototype.getComponentOrCreate=function(E){if("function"!=typeof E)throw new Error("Entity#getOrCreate(component): component is not a class");var O=this.getComponentOrNull(E);return O||(L(O=new E),this.addComponentOrReplace(O)),O},t.prototype.addComponent=function(E){if("object"!=typeof E)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var O=L(E),_t=N(E);if(this.components[O])throw new Error('A component of type "'+O+'" is already present in entity "'+this.identifier+'"');this.components[O]=E,this.eventManager&&this.eventManager.fireEvent(new Ut(this,O,_t));var Ft=E;return"function"==typeof Ft.addedToEntity&&Ft.addedToEntity(this),E},t.prototype.removeComponent=function(E,O){void 0===O&&(O=!0);var _t=typeof E;if("string"!==_t&&"function"!==_t&&"object"!==_t)throw new Error("Entity#remove(component): component is not a class, class or name");var Ft="string"===_t?E:L(E),Pt=this.components[Ft];if(Pt){if("function"===_t)return Pt instanceof E?(delete this.components[Ft],void(Pt&&(O&&this.eventManager&&this.eventManager.fireEvent(new Lt(this,Ft,Pt)),"function"==typeof Pt.removedFromEntity&&Pt.removedFromEntity(this)))):void d('Entity Warning: Trying to remove wrong (by constructor) component "'+Ft+'" from entity "'+this.identifier+'"');delete this.components[Ft],Pt&&(O&&this.eventManager&&this.eventManager.fireEvent(new Lt(this,Ft,Pt)),"function"==typeof Pt.removedFromEntity&&Pt.removedFromEntity(this))}else d('Entity Warning: Trying to remove inexisting component "'+Ft+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(E){var O;if(E&&"getEntityRepresentation"in E){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");O=E.getEntityRepresentation(this.engine)}else O=!E&&this.engine?this.engine.rootEntity:E;var _t=this.getParent();if(O===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(O===_t)return this;var Ft=this.getCircularAncestor(O);if(Ft)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+Ft+'")');return _t&&delete _t.children[this.uuid],null!==O&&"0"!==O.uuid&&(!O.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),O.isAddedToEngine()&&!this.isAddedToEngine()&&O.engine.addEntity(this)),this._parent=O||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new Xt(this,O)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(E){for(var O=this.engine?this.engine.rootEntity:null,_t=E;_t&&_t!==O;){var Ft=_t.getParent();if(Ft===this)return _t.uuid;_t=Ft}return null},t.prototype.registerAsChild=function(){var E=this.getParent();this.uuid&&E&&(E.children[this.uuid]=this)},t}(),Pe=function(){function t(E){this.eventManager=new Pt,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(Ut,this,this.componentAddedHandler),this.eventManager.addListener(Lt,this,this.componentRemovedHandler),this.rootEntity=E,this.firstPersonCameraEntity=new Fe,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new Fe,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(E){var O=E.getParent();if(E.isAddedToEngine())return E;for(var _t in E.eventManager=this.eventManager,E.engine=this,this._entities[E.uuid]=E,this.checkRequirementsAndAdd(E),O?O.isAddedToEngine()||O===this.rootEntity||d("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+O.uuid):E.setParent(this.rootEntity),E.alive=!0,E.children){var Ft=E.children[_t];Ft&&(Ft.isAddedToEngine()||this.addEntity(Ft))}return E},t.prototype.removeEntity=function(E){var O=E.uuid;if(E.isAddedToEngine()){for(var _t in E.components){var Ft=this._componentGroups[_t];if(Ft)for(var Pt in Ft)Ft[Pt].removeEntity(E);delete this.entityLists[_t][O]}for(var Dt=0;Dt<this.simpleSystems.length;Dt++){var Lt=this.simpleSystems[Dt];Lt.onRemoveEntity&&Lt.onRemoveEntity(E)}for(var Dt in E.children){var Ut=E.children[Dt];Ut&&this.removeEntity(Ut)}return E.alive=!1,E.eventManager=null,delete this._entities[O],!0}for(var _t in d("Engine: Trying to remove non existent entity from engine."),E.isAddedToEngine()?d("Engine: Entity id: "+O):d('Engine: Entity "'+E.uuid+'" has not been added to any engine yet.'),d("Engine: Entity's components:"),E.components)d(_t);return!1},t.prototype.addSystem=function(E,O){if(void 0===O&&(O=0),-1!==this.addedSystems.indexOf(E))return d("Engine: Trying to add a system that is already added. Aborting"),E;if(this.systems.length>0)for(var _t=0;_t<this.systems.length;_t++){var Ft=this.systems[_t],Pt=_t===this.systems.length-1;if(Ft.priority>O){this.addedSystems.push(E),this.systems.splice(_t,0,{system:E,priority:O});break}if(Pt){this.addedSystems.push(E),this.systems.splice(_t+1,0,{system:E,priority:O});break}}else this.addedSystems.push(E),this.systems.splice(1,0,{system:E,priority:O});return this.registerSystem(E),E},t.prototype.removeSystem=function(E){var O=this.addedSystems.indexOf(E);if(-1!==O){E.active=!1,E.deactivate&&E.deactivate(),this.addedSystems.splice(O,1);for(var _t=0;_t<this.systems.length;_t++)this.systems[_t].system===E&&this.systems.splice(_t,1);return!0}return!1},t.prototype.update=function(E){for(var O in this.systems){var _t=this.systems[O].system;if(_t.active&&_t.update)try{_t.update(E)}catch(E){l(E)}}return this},t.prototype.getEntitiesWithComponent=function(E){var O="string"==typeof E?E:L(E);return O in this.entityLists?this.entityLists[O]:this.entityLists[O]={}},t.prototype.registerComponent=function(E){var O=D(E),_t=L(E),Ft=N(E);this._disposableComponents[O]=E,null!==Ft&&(this.eventManager.fireEvent(new Ce(O,_t,Ft)),this.eventManager.fireEvent(new Me(O,E)))},t.prototype.disposeComponent=function(E){var O=D(E);return delete this._disposableComponents[O]&&(this.eventManager.fireEvent(new Re(O)),E.onDispose&&E.onDispose(),!0)},t.prototype.updateComponent=function(E){this.eventManager.fireEvent(new Me(D(E),E))},t.prototype.getComponentGroup=function(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];var _t=void 0;if(E.length>0&&(Xt=this._componentGroups[L(E[0])]))for(var Ft=E.slice(),Pt=0;Pt<Xt.length;Pt++){var Dt=Xt[Pt];if(Ft.length===Dt.requires.length){for(var Lt=0;Lt<Ft.length&&-1!==Dt.requires.indexOf(Ft[Lt]);Lt++)Lt===Ft.length-1&&(_t=Dt);if(_t)break}}if(_t)return _t;(_t=new(Ie.bind.apply(Ie,h([void 0],p(E))))).active=!0;var Ut=_t.requiresNames;for(Pt=0;Pt<Ut.length;Pt++){var Xt,Kt=Ut[Pt];(Xt=this._componentGroups[Kt])||(this._componentGroups[Kt]=Xt=[]),-1===Xt.indexOf(_t)&&Xt.push(_t)}for(var Zt in this._entities)this.checkRequirements(this._entities[Zt],_t);return _t},t.prototype.removeComponentGroup=function(E){if(E.active){E.active=!1;for(var O=E.requiresNames,_t=0;_t<O.length;_t++){var Ft=O[_t],Pt=this._componentGroups[Ft];if(Pt){var Dt=Pt.indexOf(E);-1!==Dt&&Pt.splice(Dt,1)}}return!0}return!1},t.prototype.registerSystem=function(E){E.active=!0,E.activate&&E.activate(this),this.simpleSystems.push(E)},t.prototype.checkRequirementsAndAdd=function(E){if(E.isAddedToEngine()){for(var O in E.components){O in this.entityLists||(this.entityLists[O]={}),this.entityLists[O][E.uuid]=E;var _t=this._componentGroups[O];if(_t)for(var Ft in _t)this.checkRequirements(E,_t[Ft])}for(var Pt=0;Pt<this.simpleSystems.length;Pt++){var Dt=this.simpleSystems[Pt];Dt.onAddEntity&&Dt.onAddEntity(E)}}},t.prototype.checkRequirements=function(E,O){O.meetsRequirements(E)?O.hasEntity(E)||O.addEntity(E):O.hasEntity(E)&&O.removeEntity(E)},t.prototype.componentAddedHandler=function(E){var O,_t=E.entity,Ft=E.componentName;if(_t.isAddedToEngine()){this.entityLists[Ft]?this.entityLists[Ft][_t.uuid]=_t:this.entityLists[Ft]=((O={})[_t.uuid]=_t,O);var Pt=this._componentGroups[Ft];if(Pt)for(var Dt in Pt)this.checkRequirements(_t,Pt[Dt])}},t.prototype.componentRemovedHandler=function(E){var O=E.entity,_t=E.componentName;if(O.isAddedToEngine()){delete this.entityLists[_t][O.uuid];var Ft=this._componentGroups[_t];if(Ft)for(var Pt in Ft)this.checkRequirements(O,Ft[Pt])}},t}(),Ne=Promise.resolve().then.bind(Promise.resolve());function q(E){var O=Ne(E);return O.isComplete=!1,O.then((function(E){O.isComplete=!0,O.result=E,O.didFail=!1})).catch((function(E){O.isComplete=!0,O.error=E,O.didFail=!0,l("executeTask: FAILED "+E.toString(),E)})),O}var ze,De,Le=function(){function t(E,O,_t,Ft){void 0===O&&(O=!1),this.initalize(E,O,_t,Ft)}return t.prototype.initalize=function(E,O,_t,Ft){return void 0===O&&(O=!1),this.mask=E,this.skipNextObservers=O,this.target=_t,this.currentTarget=Ft,this},t}(),Y=function(E,O,_t){void 0===_t&&(_t=null),this.callback=E,this.mask=O,this.scope=_t,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},Ue=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(E,O,_t,Ft){var Pt,Dt;void 0===_t&&(_t=-1),void 0===Ft&&(Ft=null);var Lt=new t;Lt._observers=new Array,Lt._observables=E;try{for(var Ut=u(E),Xt=Ut.next();!Xt.done;Xt=Ut.next()){var Kt=Xt.value.add(O,_t,!1,Ft);Kt&&Lt._observers.push(Kt)}}catch(E){Pt={error:E}}finally{try{Xt&&!Xt.done&&(Dt=Ut.return)&&Dt.call(Ut)}finally{if(Pt)throw Pt.error}}return Lt},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var E=0;E<this._observers.length;E++)this._observables[E].remove(this._observers[E]);this._observers=null,this._observables=null},t}(),qe=function(){function t(E){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Le(0),E&&(this._onObserverAdded=E)}return t.prototype.add=function(E,O,_t,Ft,Pt){if(void 0===O&&(O=-1),void 0===_t&&(_t=!1),void 0===Ft&&(Ft=null),void 0===Pt&&(Pt=!1),!E)return null;var Dt=new Y(E,O,Ft);return Dt.unregisterOnNextCall=Pt,_t?this._observers.unshift(Dt):this._observers.push(Dt),this._onObserverAdded&&this._onObserverAdded(Dt),Dt},t.prototype.addOnce=function(E){return this.add(E,void 0,void 0,void 0,!0)},t.prototype.remove=function(E){return!!E&&-1!==this._observers.indexOf(E)&&(this._deferUnregister(E),!0)},t.prototype.removeCallback=function(E,O){for(var _t=0;_t<this._observers.length;_t++)if(this._observers[_t].callback===E&&(!O||O===this._observers[_t].scope))return this._deferUnregister(this._observers[_t]),!0;return!1},t.prototype.notifyObservers=function(E,O,_t,Ft){var Pt,Dt;if(void 0===O&&(O=-1),!this._observers.length)return!0;var Lt=this._eventState;Lt.mask=O,Lt.target=_t,Lt.currentTarget=Ft,Lt.skipNextObservers=!1,Lt.lastReturnValue=E;try{for(var Ut=u(this._observers),Xt=Ut.next();!Xt.done;Xt=Ut.next()){var Kt=Xt.value;if(!Kt._willBeUnregistered&&(Kt.mask&O&&(Kt.scope?Lt.lastReturnValue=Kt.callback.apply(Kt.scope,[E,Lt]):Lt.lastReturnValue=Kt.callback(E,Lt),Kt.unregisterOnNextCall&&this._deferUnregister(Kt)),Lt.skipNextObservers))return!1}}catch(E){Pt={error:E}}finally{try{Xt&&!Xt.done&&(Dt=Ut.return)&&Dt.call(Ut)}finally{if(Pt)throw Pt.error}}return!0},t.prototype.notifyObserversWithPromise=function(E,O,_t,Ft){var Pt=this;void 0===O&&(O=-1);var Dt=Promise.resolve(E);if(!this._observers.length)return Dt;var Lt=this._eventState;return Lt.mask=O,Lt.target=_t,Lt.currentTarget=Ft,Lt.skipNextObservers=!1,this._observers.forEach((function(_t){Lt.skipNextObservers||_t._willBeUnregistered||_t.mask&O&&(Dt=_t.scope?Dt.then((function(O){return Lt.lastReturnValue=O,_t.callback.apply(_t.scope,[E,Lt])})):Dt.then((function(O){return Lt.lastReturnValue=O,_t.callback(E,Lt)})),_t.unregisterOnNextCall&&Pt._deferUnregister(_t))})),Dt.then((function(){return E}))},t.prototype.notifyObserver=function(E,O,_t){void 0===_t&&(_t=-1);var Ft=this._eventState;Ft.mask=_t,Ft.skipNextObservers=!1,E.callback(O,Ft)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var E=new t;return E._observers=this._observers.slice(0),E},t.prototype.hasSpecificMask=function(E){var O,_t;void 0===E&&(E=-1);try{for(var Ft=u(this._observers),Pt=Ft.next();!Pt.done;Pt=Ft.next()){var Dt=Pt.value;if(Dt.mask&E||Dt.mask===E)return!0}}catch(E){O={error:E}}finally{try{Pt&&!Pt.done&&(_t=Ft.return)&&_t.call(Ft)}finally{if(O)throw O.error}}return!1},t.prototype._deferUnregister=function(E){var O=this;E.unregisterOnNextCall=!1,E._willBeUnregistered=!0,q((function(){return function(E,O,_t,Ft){return new(_t||(_t=Promise))((function(O,Pt){function s(E){try{u(Ft.next(E))}catch(E){Pt(E)}}function a(E){try{u(Ft.throw(E))}catch(E){Pt(E)}}function u(E){var Ft;E.done?O(E.value):(Ft=E.value,Ft instanceof _t?Ft:new _t((function(E){E(Ft)}))).then(s,a)}u((Ft=Ft.apply(E,[])).next())}))}(O,0,void 0,(function(){return function(E,O){var _t,Ft,Pt,Dt,Lt={label:0,sent:function(){if(1&Pt[0])throw Pt[1];return Pt[1]},trys:[],ops:[]};return Dt={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(Dt[Symbol.iterator]=function(){return this}),Dt;function a(Dt){return function(Ut){return function(Dt){if(_t)throw new TypeError("Generator is already executing.");for(;Lt;)try{if(_t=1,Ft&&(Pt=2&Dt[0]?Ft.return:Dt[0]?Ft.throw||((Pt=Ft.return)&&Pt.call(Ft),0):Ft.next)&&!(Pt=Pt.call(Ft,Dt[1])).done)return Pt;switch(Ft=0,Pt&&(Dt=[2&Dt[0],Pt.value]),Dt[0]){case 0:case 1:Pt=Dt;break;case 4:return Lt.label++,{value:Dt[1],done:!1};case 5:Lt.label++,Ft=Dt[1],Dt=[0];continue;case 7:Dt=Lt.ops.pop(),Lt.trys.pop();continue;default:if(!((Pt=(Pt=Lt.trys).length>0&&Pt[Pt.length-1])||6!==Dt[0]&&2!==Dt[0])){Lt=0;continue}if(3===Dt[0]&&(!Pt||Dt[1]>Pt[0]&&Dt[1]<Pt[3])){Lt.label=Dt[1];break}if(6===Dt[0]&&Lt.label<Pt[1]){Lt.label=Pt[1],Pt=Dt;break}if(Pt&&Lt.label<Pt[2]){Lt.label=Pt[2],Lt.ops.push(Dt);break}Pt[2]&&Lt.ops.pop(),Lt.trys.pop();continue}Dt=O.call(E,Lt)}catch(E){Dt=[6,E],Ft=0}finally{_t=Pt=0}if(5&Dt[0])throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}([Dt,Ut])}}}(this,(function(O){return[2,this._remove(E)]}))}))}))},t.prototype._remove=function(E){if(!E)return!1;var O=this._observers.indexOf(E);return-1!==O&&(this._observers.splice(O,1),!0)},t}(),He=r([w()],(function(E,O){this.uuid=E,this.payload=O})),Ge=r([w()],(function(E){this.payload=E})),je=r([w()],(function(E){this.payload=E}));function tt(E){return function(){De&&De.subscribe(E)}}var We=new qe(tt("cameraModeChanged")),Ve=new qe(tt("idleStateChanged")),Qe=new qe(tt("onEnterScene")),Xe=Qe,Ye=new qe(tt("onLeaveScene")),Ke=Ye,Ze=new qe(tt("sceneStart")),$e=new qe(tt("playerExpression")),Je=new qe(tt("videoEvent")),tn=new qe(tt("profileChanged"));function ct(E){(De=E)&&De.onEvent((function(E){switch(E.type){case"onEnterScene":return void Qe.notifyObservers(E.data);case"onLeaveScene":return void Ye.notifyObservers(E.data);case"cameraModeChanged":return void We.notifyObservers(E.data);case"idleStateChanged":return void Ve.notifyObservers(E.data);case"sceneStart":return void Ze.notifyObservers(E.data);case"playerExpression":return void $e.notifyObservers(E.data);case"videoEvent":var O=E.data,_t=F.engine.disposableComponents[O.componentId];return _t&&_t.update(O),void Je.notifyObservers(O);case"profileChanged":return void tn.notifyObservers(E.data)}}))}var en,nn,rn=function(){function t(E){this.dcl=E,this.cachedComponents={}}return t.prototype.activate=function(E){var O=this;this.engine=E,E.eventManager.addListener(Ut,this,this.componentAdded),E.eventManager.addListener(Lt,this,this.componentRemoved),E.eventManager.addListener(Ce,this,this.disposableComponentCreated),E.eventManager.addListener(Re,this,this.disposableComponentRemoved),E.eventManager.addListener(Me,this,this.disposableComponentUpdated),E.eventManager.addListener(Xt,this,this.parentChanged);var _t=E.rootEntity.uuid;this.dcl.addEntity(_t),this.dcl.onUpdate((function(_t){E.update(_t),O.presentEntities()})),this.dcl.onEvent((function(O){var _t=O.data;switch(O.type){case"uuidEvent":E.eventManager.fireEvent(new He(_t.uuid,_t.payload));break;case"raycastResponse":("HitFirst"===_t.queryType||"HitAll"===_t.queryType)&&E.eventManager.fireEvent(new Ge(_t));break;case"pointerEvent":E.eventManager.fireEvent(new je(_t.payload))}}))},t.prototype.onAddEntity=function(E){if(E&&E.isAddedToEngine()){var O=E.uuid,_t=E.getParent();for(var Ft in this.dcl.addEntity(O),_t&&this.dcl.setParent(O,_t.uuid),this.cachedComponents[O]={},E.components){var Pt=E.components[Ft],Dt=N(Pt);if(null!==Dt)if(B(Pt))this.dcl.attachEntityComponent(E.uuid,Ft,D(Pt));else{var Lt=JSON.stringify(Pt);this.dcl.updateEntityComponent(O,Ft,Dt,Lt),this.cachedComponents[O][Ft]=Lt}}}},t.prototype.onRemoveEntity=function(E){if(E.isAddedToEngine()){var O=E.uuid;this.dcl.removeEntity(O),delete this.cachedComponents[O]}},t.prototype.presentEntities=function(){for(var E in this.engine.entities){var O=this.engine.entities[E];for(var _t in O.components){var Ft=N(Lt=O.components[_t]);if(null!==Ft&&!B(Lt)){var Pt=this.getJsonIfDirty(O.uuid,_t,Lt);Pt&&(this.dcl.updateEntityComponent(O.uuid,_t,Ft,Pt),this.clearDirty(O.uuid,_t,Lt,Pt))}}}for(var Dt in this.engine.disposableComponents){var Lt;(Lt=this.engine.disposableComponents[Dt])instanceof Se&&Lt.dirty&&(this.dcl.componentUpdated(Dt,JSON.stringify(Lt)),Lt.dirty=!1)}},t.prototype.componentAdded=function(E){if(E.entity.isAddedToEngine()){var O=E.entity.components[E.componentName];if(B(O))this.dcl.attachEntityComponent(E.entity.uuid,E.componentName,D(O));else if(null!==E.classId){var _t=JSON.stringify(O);this.dcl.updateEntityComponent(E.entity.uuid,E.componentName,E.classId,_t),this.cachedComponents[E.entity.uuid][E.componentName]=_t}}},t.prototype.componentRemoved=function(E){E.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(E.entity.uuid,E.componentName),delete this.cachedComponents[E.entity.uuid][E.componentName])},t.prototype.disposableComponentCreated=function(E){this.dcl.componentCreated(E.componentId,E.componentName,E.classId)},t.prototype.disposableComponentRemoved=function(E){this.dcl.componentDisposed(E.componentId)},t.prototype.disposableComponentUpdated=function(E){this.dcl.componentUpdated(E.componentId,JSON.stringify(E.component))},t.prototype.parentChanged=function(E){this.dcl.setParent(E.entity.uuid,E.parent?E.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(E,O,_t){var Ft=JSON.stringify(_t);return Ft!==this.cachedComponents[E][O]&&Ft},t.prototype.clearDirty=function(E,O,_t,Ft){this.cachedComponents[E][O]=Ft},t}();E.Orientation=void 0,(en=E.Orientation||(E.Orientation={}))[en.CW=0]="CW",en[en.CCW=1]="CCW",E.Space=void 0,(nn=E.Space||(E.Space={}))[nn.LOCAL=0]="LOCAL",nn[nn.WORLD=1]="WORLD",nn[nn.BONE=2]="BONE";var on,an,sn,un,cn=1/2.2,pn=2.2,ln=1e-6,dn=Math.PI/180,yn=360/(2*Math.PI),hn=function(){function t(){}return t.WithinEpsilon=function(E,O,_t){void 0===_t&&(_t=1401298e-51);var Ft=E-O;return-_t<=Ft&&Ft<=_t},t.ToHex=function(E){var O=E.toString(16);return E<=15?("0"+O).toUpperCase():O.toUpperCase()},t.Sign=function(E){var O=+E;return 0===O||isNaN(O)?O:O>0?1:-1},t.Clamp=function(E,O,_t){return void 0===O&&(O=0),void 0===_t&&(_t=1),Math.min(_t,Math.max(O,E))},t.Log2=function(E){return Math.log(E)*Math.LOG2E},t.Repeat=function(E,O){return E-Math.floor(E/O)*O},t.Normalize=function(E,O,_t){return(E-O)/(_t-O)},t.Denormalize=function(E,O,_t){return E*(_t-O)+O},t.DeltaAngle=function(E,O){var _t=t.Repeat(O-E,360);return _t>180&&(_t-=360),_t},t.PingPong=function(E,O){var _t=t.Repeat(E,2*O);return O-Math.abs(_t-O)},t.SmoothStep=function(E,O,_t){var Ft=t.Clamp(_t);return O*(Ft=-2*Ft*Ft*Ft+3*Ft*Ft)+E*(1-Ft)},t.MoveTowards=function(E,O,_t){return Math.abs(O-E)<=_t?O:E+t.Sign(O-E)*_t},t.MoveTowardsAngle=function(E,O,_t){var Ft=t.DeltaAngle(E,O);return-_t<Ft&&Ft<_t?O:t.MoveTowards(E,E+Ft,_t)},t.Lerp=function(E,O,_t){return E+(O-E)*_t},t.LerpAngle=function(E,O,_t){var Ft=t.Repeat(O-E,360);return Ft>180&&(Ft-=360),E+Ft*t.Clamp(_t)},t.InverseLerp=function(E,O,_t){return E!==O?t.Clamp((_t-E)/(O-E)):0},t.Hermite=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt;return E*(2*Lt-3*Dt+1)+_t*(-2*Lt+3*Dt)+O*(Lt-2*Dt+Pt)+Ft*(Lt-Dt)},t.RandomRange=function(E,O){return E===O?E:Math.random()*(O-E)+E},t.RangeToPercent=function(E,O,_t){return(E-O)/(_t-O)},t.PercentToRange=function(E,O,_t){return(_t-O)*E+O},t.NormalizeRadians=function(E){return E-t.TwoPi*Math.floor((E+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}(),mn=function(){function t(E,O,_t,Ft){this.x=E,this.y=O,this.z=_t,this.w=Ft}return t.Add=function(E,O){return new t(E.x,E.y,E.z,E.w).addInPlace(O)},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1],E[O+2],E[O+3])},t.FromArrayToRef=function(E,O,_t){_t.x=E[O],_t.y=E[O+1],_t.z=E[O+2],_t.w=E[O+3]},t.FromFloatArrayToRef=function(E,O,_t){t.FromArrayToRef(E,O,_t)},t.FromFloatsToRef=function(E,O,_t,Ft,Pt){Pt.x=E,Pt.y=O,Pt.z=_t,Pt.w=Ft},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(E){var O=t.Zero();return t.NormalizeToRef(E,O),O},t.NormalizeToRef=function(E,O){O.copyFrom(E),O.normalize()},t.Minimize=function(E,O){var _t=new t(E.x,E.y,E.z,E.w);return _t.minimizeInPlace(O),_t},t.Maximize=function(E,O){var _t=new t(E.x,E.y,E.z,E.w);return _t.maximizeInPlace(O),_t},t.Distance=function(E,O){return Math.sqrt(t.DistanceSquared(E,O))},t.DistanceSquared=function(E,O){var _t=E.x-O.x,Ft=E.y-O.y,Pt=E.z-O.z,Dt=E.w-O.w;return _t*_t+Ft*Ft+Pt*Pt+Dt*Dt},t.Center=function(E,O){var _t=t.Add(E,O);return _t.scaleInPlace(.5),_t},t.TransformNormal=function(E,O){var _t=t.Zero();return t.TransformNormalToRef(E,O,_t),_t},t.TransformNormalToRef=function(E,O,_t){var Ft=O.m,Pt=E.x*Ft[0]+E.y*Ft[4]+E.z*Ft[8],Dt=E.x*Ft[1]+E.y*Ft[5]+E.z*Ft[9],Lt=E.x*Ft[2]+E.y*Ft[6]+E.z*Ft[10];_t.x=Pt,_t.y=Dt,_t.z=Lt,_t.w=E.w},t.TransformNormalFromFloatsToRef=function(E,O,_t,Ft,Pt,Dt){var Lt=Pt.m;Dt.x=E*Lt[0]+O*Lt[4]+_t*Lt[8],Dt.y=E*Lt[1]+O*Lt[5]+_t*Lt[9],Dt.z=E*Lt[2]+O*Lt[6]+_t*Lt[10],Dt.w=Ft},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var E=this.x||0;return 397*(E=397*(E=397*E^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var E=new Array;return this.toArray(E,0),E},t.prototype.toArray=function(E,O){return void 0===O&&(O=0),E[O]=this.x,E[O+1]=this.y,E[O+2]=this.z,E[O+3]=this.w,this},t.prototype.addInPlace=function(E){return this.x+=E.x,this.y+=E.y,this.z+=E.z,this.w+=E.w,this},t.prototype.add=function(E){return new t(this.x+E.x,this.y+E.y,this.z+E.z,this.w+E.w)},t.prototype.addToRef=function(E,O){return O.x=this.x+E.x,O.y=this.y+E.y,O.z=this.z+E.z,O.w=this.w+E.w,this},t.prototype.subtractInPlace=function(E){return this.x-=E.x,this.y-=E.y,this.z-=E.z,this.w-=E.w,this},t.prototype.subtract=function(E){return new t(this.x-E.x,this.y-E.y,this.z-E.z,this.w-E.w)},t.prototype.subtractToRef=function(E,O){return O.x=this.x-E.x,O.y=this.y-E.y,O.z=this.z-E.z,O.w=this.w-E.w,this},t.prototype.subtractFromFloats=function(E,O,_t,Ft){return new t(this.x-E,this.y-O,this.z-_t,this.w-Ft)},t.prototype.subtractFromFloatsToRef=function(E,O,_t,Ft,Pt){return Pt.x=this.x-E,Pt.y=this.y-O,Pt.z=this.z-_t,Pt.w=this.w-Ft,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(E){return this.x*=E,this.y*=E,this.z*=E,this.w*=E,this},t.prototype.scale=function(E){return new t(this.x*E,this.y*E,this.z*E,this.w*E)},t.prototype.scaleToRef=function(E,O){return O.x=this.x*E,O.y=this.y*E,O.z=this.z*E,O.w=this.w*E,this},t.prototype.scaleAndAddToRef=function(E,O){return O.x+=this.x*E,O.y+=this.y*E,O.z+=this.z*E,O.w+=this.w*E,this},t.prototype.equals=function(E){return E&&this.x===E.x&&this.y===E.y&&this.z===E.z&&this.w===E.w},t.prototype.equalsWithEpsilon=function(E,O){return void 0===O&&(O=ln),E&&hn.WithinEpsilon(this.x,E.x,O)&&hn.WithinEpsilon(this.y,E.y,O)&&hn.WithinEpsilon(this.z,E.z,O)&&hn.WithinEpsilon(this.w,E.w,O)},t.prototype.equalsToFloats=function(E,O,_t,Ft){return this.x===E&&this.y===O&&this.z===_t&&this.w===Ft},t.prototype.multiplyInPlace=function(E){return this.x*=E.x,this.y*=E.y,this.z*=E.z,this.w*=E.w,this},t.prototype.multiply=function(E){return new t(this.x*E.x,this.y*E.y,this.z*E.z,this.w*E.w)},t.prototype.multiplyToRef=function(E,O){return O.x=this.x*E.x,O.y=this.y*E.y,O.z=this.z*E.z,O.w=this.w*E.w,this},t.prototype.multiplyByFloats=function(E,O,_t,Ft){return new t(this.x*E,this.y*O,this.z*_t,this.w*Ft)},t.prototype.divide=function(E){return new t(this.x/E.x,this.y/E.y,this.z/E.z,this.w/E.w)},t.prototype.divideToRef=function(E,O){return O.x=this.x/E.x,O.y=this.y/E.y,O.z=this.z/E.z,O.w=this.w/E.w,this},t.prototype.divideInPlace=function(E){return this.divideToRef(E,this)},t.prototype.minimizeInPlace=function(E){return E.x<this.x&&(this.x=E.x),E.y<this.y&&(this.y=E.y),E.z<this.z&&(this.z=E.z),E.w<this.w&&(this.w=E.w),this},t.prototype.maximizeInPlace=function(E){return E.x>this.x&&(this.x=E.x),E.y>this.y&&(this.y=E.y),E.z>this.z&&(this.z=E.z),E.w>this.w&&(this.w=E.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var E=this.length();return 0===E?this:this.scaleInPlace(1/E)},t.prototype.toVector3=function(){return new vn(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(E){return this.x=E.x,this.y=E.y,this.z=E.z,this.w=E.w,this},t.prototype.copyFromFloats=function(E,O,_t,Ft){return this.x=E,this.y=O,this.z=_t,this.w=Ft,this},t.prototype.set=function(E,O,_t,Ft){return this.copyFromFloats(E,O,_t,Ft)},t.prototype.setAll=function(E){return this.x=this.y=this.z=this.w=E,this},t}(),gn=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!1,configurable:!0}),t.FromArray=function(E,O){void 0===O&&(O=0);var _t=new t;return t.FromArrayToRef(E,O,_t),_t},t.FromArrayToRef=function(E,O,_t){for(var Ft=0;Ft<16;Ft++)_t._m[Ft]=E[Ft+O];_t._markAsUpdated()},t.FromFloatArrayToRefScaled=function(E,O,_t,Ft){for(var Pt=0;Pt<16;Pt++)Ft._m[Pt]=E[Pt+O]*_t;Ft._markAsUpdated()},t.FromValuesToRef=function(E,O,_t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le,ve,Ce,Re,Me,Se){var Ie=Se._m;Ie[0]=E,Ie[1]=O,Ie[2]=_t,Ie[3]=Ft,Ie[4]=Pt,Ie[5]=Dt,Ie[6]=Lt,Ie[7]=Ut,Ie[8]=Xt,Ie[9]=Kt,Ie[10]=Zt,Ie[11]=le,Ie[12]=ve,Ie[13]=Ce,Ie[14]=Re,Ie[15]=Me,Se._markAsUpdated()},t.FromValues=function(E,O,_t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le,ve,Ce,Re,Me){var Se=new t,Ie=Se._m;return Ie[0]=E,Ie[1]=O,Ie[2]=_t,Ie[3]=Ft,Ie[4]=Pt,Ie[5]=Dt,Ie[6]=Lt,Ie[7]=Ut,Ie[8]=Xt,Ie[9]=Kt,Ie[10]=Zt,Ie[11]=le,Ie[12]=ve,Ie[13]=Ce,Ie[14]=Re,Ie[15]=Me,Se._markAsUpdated(),Se},t.Compose=function(E,O,_t){var Ft=new t;return t.ComposeToRef(E,O,_t,Ft),Ft},t.ComposeToRef=function(E,O,_t,Ft){t.ScalingToRef(E.x,E.y,E.z,wn.Matrix[1]),O.toRotationMatrix(wn.Matrix[0]),wn.Matrix[1].multiplyToRef(wn.Matrix[0],Ft),Ft.setTranslation(_t)},t.Identity=function(){var E=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return E._updateIdentityStatus(!0),E},t.IdentityToRef=function(E){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,E),E._updateIdentityStatus(!0)},t.Zero=function(){var E=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return E._updateIdentityStatus(!1),E},t.RotationX=function(E){var O=new t;return t.RotationXToRef(E,O),O},t.Invert=function(E){var O=new t;return E.invertToRef(O),O},t.RotationXToRef=function(E,O){var _t=Math.sin(E),Ft=Math.cos(E);t.FromValuesToRef(1,0,0,0,0,Ft,_t,0,0,-_t,Ft,0,0,0,0,1,O),O._updateIdentityStatus(1===Ft&&0===_t)},t.RotationY=function(E){var O=new t;return t.RotationYToRef(E,O),O},t.RotationYToRef=function(E,O){var _t=Math.sin(E),Ft=Math.cos(E);t.FromValuesToRef(Ft,0,-_t,0,0,1,0,0,_t,0,Ft,0,0,0,0,1,O),O._updateIdentityStatus(1===Ft&&0===_t)},t.RotationZ=function(E){var O=new t;return t.RotationZToRef(E,O),O},t.RotationZToRef=function(E,O){var _t=Math.sin(E),Ft=Math.cos(E);t.FromValuesToRef(Ft,_t,0,0,-_t,Ft,0,0,0,0,1,0,0,0,0,1,O),O._updateIdentityStatus(1===Ft&&0===_t)},t.RotationAxis=function(E,O){var _t=new t;return t.RotationAxisToRef(E,O,_t),_t},t.RotationAxisToRef=function(E,O,_t){var Ft=Math.sin(-O),Pt=Math.cos(-O),Dt=1-Pt;E.normalize();var Lt=_t._m;Lt[0]=E.x*E.x*Dt+Pt,Lt[1]=E.x*E.y*Dt-E.z*Ft,Lt[2]=E.x*E.z*Dt+E.y*Ft,Lt[3]=0,Lt[4]=E.y*E.x*Dt+E.z*Ft,Lt[5]=E.y*E.y*Dt+Pt,Lt[6]=E.y*E.z*Dt-E.x*Ft,Lt[7]=0,Lt[8]=E.z*E.x*Dt-E.y*Ft,Lt[9]=E.z*E.y*Dt+E.x*Ft,Lt[10]=E.z*E.z*Dt+Pt,Lt[11]=0,Lt[12]=0,Lt[13]=0,Lt[14]=0,Lt[15]=1,_t._markAsUpdated()},t.RotationYawPitchRoll=function(E,O,_t){var Ft=new t;return t.RotationYawPitchRollToRef(E,O,_t,Ft),Ft},t.RotationYawPitchRollToRef=function(E,O,_t,Ft){bn.RotationYawPitchRollToRef(E,O,_t,wn.Quaternion[0]),wn.Quaternion[0].toRotationMatrix(Ft)},t.Scaling=function(E,O,_t){var Ft=new t;return t.ScalingToRef(E,O,_t,Ft),Ft},t.ScalingToRef=function(E,O,_t,Ft){t.FromValuesToRef(E,0,0,0,0,O,0,0,0,0,_t,0,0,0,0,1,Ft),Ft._updateIdentityStatus(1===E&&1===O&&1===_t)},t.Translation=function(E,O,_t){var Ft=new t;return t.TranslationToRef(E,O,_t,Ft),Ft},t.TranslationToRef=function(E,O,_t,Ft){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,E,O,_t,1,Ft),Ft._updateIdentityStatus(0===E&&0===O&&0===_t)},t.Lerp=function(E,O,_t){var Ft=new t;return t.LerpToRef(E,O,_t,Ft),Ft},t.LerpToRef=function(E,O,_t,Ft){for(var Pt=0;Pt<16;Pt++)Ft._m[Pt]=E._m[Pt]*(1-_t)+O._m[Pt]*_t;Ft._markAsUpdated()},t.DecomposeLerp=function(E,O,_t){var Ft=new t;return t.DecomposeLerpToRef(E,O,_t,Ft),Ft},t.DecomposeLerpToRef=function(E,O,_t,Ft){var Pt=wn.Vector3[0],Dt=wn.Quaternion[0],Lt=wn.Vector3[1];E.decompose(Pt,Dt,Lt);var Ut=wn.Vector3[2],Xt=wn.Quaternion[1],Kt=wn.Vector3[3];O.decompose(Ut,Xt,Kt);var Zt=wn.Vector3[4];vn.LerpToRef(Pt,Ut,_t,Zt);var le=wn.Quaternion[2];bn.SlerpToRef(Dt,Xt,_t,le);var ve=wn.Vector3[5];vn.LerpToRef(Lt,Kt,_t,ve),t.ComposeToRef(Zt,le,ve,Ft)},t.LookAtLH=function(E,O,_t){var Ft=new t;return t.LookAtLHToRef(E,O,_t,Ft),Ft},t.LookAtLHToRef=function(E,O,_t,Ft){var Pt=wn.Vector3[0],Dt=wn.Vector3[1],Lt=wn.Vector3[2];O.subtractToRef(E,Lt),Lt.normalize(),vn.CrossToRef(_t,Lt,Pt);var Ut=Pt.lengthSquared();0===Ut?Pt.x=1:Pt.normalizeFromLength(Math.sqrt(Ut)),vn.CrossToRef(Lt,Pt,Dt),Dt.normalize();var Xt=-vn.Dot(Pt,E),Kt=-vn.Dot(Dt,E),Zt=-vn.Dot(Lt,E);t.FromValuesToRef(Pt.x,Dt.x,Lt.x,0,Pt.y,Dt.y,Lt.y,0,Pt.z,Dt.z,Lt.z,0,Xt,Kt,Zt,1,Ft)},t.LookAtRH=function(E,O,_t){var Ft=new t;return t.LookAtRHToRef(E,O,_t,Ft),Ft},t.LookAtRHToRef=function(E,O,_t,Ft){var Pt=wn.Vector3[0],Dt=wn.Vector3[1],Lt=wn.Vector3[2];E.subtractToRef(O,Lt),Lt.normalize(),vn.CrossToRef(_t,Lt,Pt);var Ut=Pt.lengthSquared();0===Ut?Pt.x=1:Pt.normalizeFromLength(Math.sqrt(Ut)),vn.CrossToRef(Lt,Pt,Dt),Dt.normalize();var Xt=-vn.Dot(Pt,E),Kt=-vn.Dot(Dt,E),Zt=-vn.Dot(Lt,E);t.FromValuesToRef(Pt.x,Dt.x,Lt.x,0,Pt.y,Dt.y,Lt.y,0,Pt.z,Dt.z,Lt.z,0,Xt,Kt,Zt,1,Ft)},t.OrthoLH=function(E,O,_t,Ft){var Pt=new t;return t.OrthoLHToRef(E,O,_t,Ft,Pt),Pt},t.OrthoLHToRef=function(E,O,_t,Ft,Pt){var Dt=2/E,Lt=2/O,Ut=2/(Ft-_t),Xt=-(Ft+_t)/(Ft-_t);t.FromValuesToRef(Dt,0,0,0,0,Lt,0,0,0,0,Ut,0,0,0,Xt,1,Pt),Pt._updateIdentityStatus(1===Dt&&1===Lt&&1===Ut&&0===Xt)},t.OrthoOffCenterLH=function(E,O,_t,Ft,Pt,Dt){var Lt=new t;return t.OrthoOffCenterLHToRef(E,O,_t,Ft,Pt,Dt,Lt),Lt},t.OrthoOffCenterLHToRef=function(E,O,_t,Ft,Pt,Dt,Lt){var Ut=2/(O-E),Xt=2/(Ft-_t),Kt=2/(Dt-Pt),Zt=-(Dt+Pt)/(Dt-Pt),le=(E+O)/(E-O),ve=(Ft+_t)/(_t-Ft);t.FromValuesToRef(Ut,0,0,0,0,Xt,0,0,0,0,Kt,0,le,ve,Zt,1,Lt),Lt._markAsUpdated()},t.OrthoOffCenterRH=function(E,O,_t,Ft,Pt,Dt){var Lt=new t;return t.OrthoOffCenterRHToRef(E,O,_t,Ft,Pt,Dt,Lt),Lt},t.OrthoOffCenterRHToRef=function(E,O,_t,Ft,Pt,Dt,Lt){t.OrthoOffCenterLHToRef(E,O,_t,Ft,Pt,Dt,Lt),Lt._m[10]*=-1},t.PerspectiveLH=function(E,O,_t,Ft){var Pt=new t,Dt=2*_t/E,Lt=2*_t/O,Ut=(Ft+_t)/(Ft-_t),Xt=-2*Ft*_t/(Ft-_t);return t.FromValuesToRef(Dt,0,0,0,0,Lt,0,0,0,0,Ut,1,0,0,Xt,0,Pt),Pt._updateIdentityStatus(!1),Pt},t.PerspectiveFovLH=function(E,O,_t,Ft){var Pt=new t;return t.PerspectiveFovLHToRef(E,O,_t,Ft,Pt),Pt},t.PerspectiveFovLHToRef=function(E,O,_t,Ft,Pt,Dt){void 0===Dt&&(Dt=!0);var Lt=_t,Ut=Ft,Xt=1/Math.tan(.5*E),Kt=Dt?Xt/O:Xt,Zt=Dt?Xt:Xt*O,le=(Ut+Lt)/(Ut-Lt),ve=-2*Ut*Lt/(Ut-Lt);t.FromValuesToRef(Kt,0,0,0,0,Zt,0,0,0,0,le,1,0,0,ve,0,Pt),Pt._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(E,O,_t,Ft){var Pt=new t;return t.PerspectiveFovRHToRef(E,O,_t,Ft,Pt),Pt},t.PerspectiveFovRHToRef=function(E,O,_t,Ft,Pt,Dt){void 0===Dt&&(Dt=!0);var Lt=_t,Ut=Ft,Xt=1/Math.tan(.5*E),Kt=Dt?Xt/O:Xt,Zt=Dt?Xt:Xt*O,le=-(Ut+Lt)/(Ut-Lt),ve=-2*Ut*Lt/(Ut-Lt);t.FromValuesToRef(Kt,0,0,0,0,Zt,0,0,0,0,le,-1,0,0,ve,0,Pt),Pt._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(E,O,_t,Ft,Pt){void 0===Pt&&(Pt=!1);var Dt=Pt?-1:1,Lt=Math.tan(E.upDegrees*Math.PI/180),Ut=Math.tan(E.downDegrees*Math.PI/180),Xt=Math.tan(E.leftDegrees*Math.PI/180),Kt=Math.tan(E.rightDegrees*Math.PI/180),Zt=2/(Xt+Kt),le=2/(Lt+Ut),ve=Ft._m;ve[0]=Zt,ve[1]=ve[2]=ve[3]=ve[4]=0,ve[5]=le,ve[6]=ve[7]=0,ve[8]=(Xt-Kt)*Zt*.5,ve[9]=-(Lt-Ut)*le*.5,ve[10]=-_t/(O-_t),ve[11]=1*Dt,ve[12]=ve[13]=ve[15]=0,ve[14]=-2*_t*O/(_t-O),Ft._markAsUpdated()},t.GetAsMatrix2x2=function(E){return[E._m[0],E._m[1],E._m[4],E._m[5]]},t.GetAsMatrix3x3=function(E){return[E._m[0],E._m[1],E._m[2],E._m[4],E._m[5],E._m[6],E._m[8],E._m[9],E._m[10]]},t.Transpose=function(E){var O=new t;return t.TransposeToRef(E,O),O},t.TransposeToRef=function(E,O){var _t=O._m,Ft=E._m;_t[0]=Ft[0],_t[1]=Ft[4],_t[2]=Ft[8],_t[3]=Ft[12],_t[4]=Ft[1],_t[5]=Ft[5],_t[6]=Ft[9],_t[7]=Ft[13],_t[8]=Ft[2],_t[9]=Ft[6],_t[10]=Ft[10],_t[11]=Ft[14],_t[12]=Ft[3],_t[13]=Ft[7],_t[14]=Ft[11],_t[15]=Ft[15],O._updateIdentityStatus(E._isIdentity,E._isIdentityDirty)},t.Reflection=function(E){var O=new t;return t.ReflectionToRef(E,O),O},t.ReflectionToRef=function(E,O){E.normalize();var _t=E.normal.x,Ft=E.normal.y,Pt=E.normal.z,Dt=-2*_t,Lt=-2*Ft,Ut=-2*Pt;t.FromValuesToRef(Dt*_t+1,Lt*_t,Ut*_t,0,Dt*Ft,Lt*Ft+1,Ut*Ft,0,Dt*Pt,Lt*Pt,Ut*Pt+1,0,Dt*E.d,Lt*E.d,Ut*E.d,1,O)},t.FromXYZAxesToRef=function(E,O,_t,Ft){t.FromValuesToRef(E.x,E.y,E.z,0,O.x,O.y,O.z,0,_t.x,_t.y,_t.z,0,0,0,0,1,Ft)},t.FromQuaternionToRef=function(E,O){var _t=E.x*E.x,Ft=E.y*E.y,Pt=E.z*E.z,Dt=E.x*E.y,Lt=E.z*E.w,Ut=E.z*E.x,Xt=E.y*E.w,Kt=E.y*E.z,Zt=E.x*E.w;O._m[0]=1-2*(Ft+Pt),O._m[1]=2*(Dt+Lt),O._m[2]=2*(Ut-Xt),O._m[3]=0,O._m[4]=2*(Dt-Lt),O._m[5]=1-2*(Pt+_t),O._m[6]=2*(Kt+Zt),O._m[7]=0,O._m[8]=2*(Ut+Xt),O._m[9]=2*(Kt-Zt),O._m[10]=1-2*(Ft+_t),O._m[11]=0,O._m[12]=0,O._m[13]=0,O._m[14]=0,O._m[15]=1,O._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var E=this._m;this._isIdentity=1===E[0]&&0===E[1]&&0===E[2]&&0===E[3]&&0===E[4]&&1===E[5]&&0===E[6]&&0===E[7]&&0===E[8]&&0===E[9]&&1===E[10]&&0===E[11]&&0===E[12]&&0===E[13]&&0===E[14]&&1===E[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var E=this._m,O=E[0],_t=E[1],Ft=E[2],Pt=E[3],Dt=E[4],Lt=E[5],Ut=E[6],Xt=E[7],Kt=E[8],Zt=E[9],le=E[10],ve=E[11],Ce=E[12],Re=E[13],Me=E[14],Se=E[15],Ie=le*Se-Me*ve,Fe=Zt*Se-Re*ve,Pe=Zt*Me-Re*le,Ne=Kt*Se-Ce*ve,ze=Kt*Me-le*Ce,De=Kt*Re-Ce*Zt;return O*+(Lt*Ie-Ut*Fe+Xt*Pe)+_t*-(Dt*Ie-Ut*Ne+Xt*ze)+Ft*+(Dt*Fe-Lt*Ne+Xt*De)+Pt*-(Dt*Pe-Lt*ze+Ut*De)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(E){var O=new t;return this.addToRef(E,O),O},t.prototype.addToRef=function(E,O){for(var _t=0;_t<16;_t++)O._m[_t]=this._m[_t]+E._m[_t];return O._markAsUpdated(),this},t.prototype.addToSelf=function(E){for(var O=0;O<16;O++)this._m[O]+=E._m[O];return this._markAsUpdated(),this},t.prototype.invertToRef=function(E){if(!0===this._isIdentity)return t.IdentityToRef(E),this;var O=this._m,_t=O[0],Ft=O[1],Pt=O[2],Dt=O[3],Lt=O[4],Ut=O[5],Xt=O[6],Kt=O[7],Zt=O[8],le=O[9],ve=O[10],Ce=O[11],Re=O[12],Me=O[13],Se=O[14],Ie=O[15],Fe=ve*Ie-Se*Ce,Pe=le*Ie-Me*Ce,Ne=le*Se-Me*ve,ze=Zt*Ie-Re*Ce,De=Zt*Se-ve*Re,Le=Zt*Me-Re*le,Ue=+(Ut*Fe-Xt*Pe+Kt*Ne),qe=-(Lt*Fe-Xt*ze+Kt*De),He=+(Lt*Pe-Ut*ze+Kt*Le),Ge=-(Lt*Ne-Ut*De+Xt*Le),je=_t*Ue+Ft*qe+Pt*He+Dt*Ge;if(0===je)return E.copyFrom(this),this;var We=1/je,Ve=Xt*Ie-Se*Kt,Qe=Ut*Ie-Me*Kt,Xe=Ut*Se-Me*Xt,Ye=Lt*Ie-Re*Kt,Ke=Lt*Se-Re*Xt,Ze=Lt*Me-Re*Ut,$e=Xt*Ce-ve*Kt,Je=Ut*Ce-le*Kt,tn=Ut*ve-le*Xt,en=Lt*Ce-Zt*Kt,nn=Lt*ve-Zt*Xt,rn=Lt*le-Zt*Ut,on=-(Ft*Fe-Pt*Pe+Dt*Ne),an=+(_t*Fe-Pt*ze+Dt*De),sn=-(_t*Pe-Ft*ze+Dt*Le),un=+(_t*Ne-Ft*De+Pt*Le),cn=+(Ft*Ve-Pt*Qe+Dt*Xe),pn=-(_t*Ve-Pt*Ye+Dt*Ke),ln=+(_t*Qe-Ft*Ye+Dt*Ze),dn=-(_t*Xe-Ft*Ke+Pt*Ze),yn=-(Ft*$e-Pt*Je+Dt*tn),hn=+(_t*$e-Pt*en+Dt*nn),mn=-(_t*Je-Ft*en+Dt*rn),gn=+(_t*tn-Ft*nn+Pt*rn);return t.FromValuesToRef(Ue*We,on*We,cn*We,yn*We,qe*We,an*We,pn*We,hn*We,He*We,sn*We,ln*We,mn*We,Ge*We,un*We,dn*We,gn*We,E),this},t.prototype.addAtIndex=function(E,O){return this._m[E]+=O,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(E,O){return this._m[E]*=O,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(E,O,_t){return this._m[12]=E,this._m[13]=O,this._m[14]=_t,this._markAsUpdated(),this},t.prototype.setTranslation=function(E){return this.setTranslationFromFloats(E.x,E.y,E.z)},t.prototype.getTranslation=function(){return new vn(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(E){return E.x=this._m[12],E.y=this._m[13],E.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var E=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,E[12],E[13],E[14],E[15],this),this._updateIdentityStatus(0===E[12]&&0===E[13]&&0===E[14]&&1===E[15]),this},t.prototype.multiply=function(E){var O=new t;return this.multiplyToRef(E,O),O},t.prototype.copyFrom=function(E){E.copyToArray(this._m);var O=E;return this._updateIdentityStatus(O._isIdentity,O._isIdentityDirty,O._isIdentity3x2,O._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(E,O){void 0===O&&(O=0);for(var _t=0;_t<16;_t++)E[O+_t]=this._m[_t];return this},t.prototype.multiplyToRef=function(E,O){return this._isIdentity?(O.copyFrom(E),this):E._isIdentity?(O.copyFrom(this),this):(this.multiplyToArray(E,O._m,0),O._markAsUpdated(),this)},t.prototype.multiplyToArray=function(E,O,_t){var Ft=this._m,Pt=E.m,Dt=Ft[0],Lt=Ft[1],Ut=Ft[2],Xt=Ft[3],Kt=Ft[4],Zt=Ft[5],le=Ft[6],ve=Ft[7],Ce=Ft[8],Re=Ft[9],Me=Ft[10],Se=Ft[11],Ie=Ft[12],Fe=Ft[13],Pe=Ft[14],Ne=Ft[15],ze=Pt[0],De=Pt[1],Le=Pt[2],Ue=Pt[3],qe=Pt[4],He=Pt[5],Ge=Pt[6],je=Pt[7],We=Pt[8],Ve=Pt[9],Qe=Pt[10],Xe=Pt[11],Ye=Pt[12],Ke=Pt[13],Ze=Pt[14],$e=Pt[15];return O[_t]=Dt*ze+Lt*qe+Ut*We+Xt*Ye,O[_t+1]=Dt*De+Lt*He+Ut*Ve+Xt*Ke,O[_t+2]=Dt*Le+Lt*Ge+Ut*Qe+Xt*Ze,O[_t+3]=Dt*Ue+Lt*je+Ut*Xe+Xt*$e,O[_t+4]=Kt*ze+Zt*qe+le*We+ve*Ye,O[_t+5]=Kt*De+Zt*He+le*Ve+ve*Ke,O[_t+6]=Kt*Le+Zt*Ge+le*Qe+ve*Ze,O[_t+7]=Kt*Ue+Zt*je+le*Xe+ve*$e,O[_t+8]=Ce*ze+Re*qe+Me*We+Se*Ye,O[_t+9]=Ce*De+Re*He+Me*Ve+Se*Ke,O[_t+10]=Ce*Le+Re*Ge+Me*Qe+Se*Ze,O[_t+11]=Ce*Ue+Re*je+Me*Xe+Se*$e,O[_t+12]=Ie*ze+Fe*qe+Pe*We+Ne*Ye,O[_t+13]=Ie*De+Fe*He+Pe*Ve+Ne*Ke,O[_t+14]=Ie*Le+Fe*Ge+Pe*Qe+Ne*Ze,O[_t+15]=Ie*Ue+Fe*je+Pe*Xe+Ne*$e,this},t.prototype.equals=function(E){var O=E;if(!O)return!1;if((this._isIdentity||O._isIdentity)&&!this._isIdentityDirty&&!O._isIdentityDirty)return this._isIdentity&&O._isIdentity;var _t=this.m,Ft=O.m;return _t[0]===Ft[0]&&_t[1]===Ft[1]&&_t[2]===Ft[2]&&_t[3]===Ft[3]&&_t[4]===Ft[4]&&_t[5]===Ft[5]&&_t[6]===Ft[6]&&_t[7]===Ft[7]&&_t[8]===Ft[8]&&_t[9]===Ft[9]&&_t[10]===Ft[10]&&_t[11]===Ft[11]&&_t[12]===Ft[12]&&_t[13]===Ft[13]&&_t[14]===Ft[14]&&_t[15]===Ft[15]},t.prototype.clone=function(){var E=new t;return E.copyFrom(this),E},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var E=this._m[0]||0,O=1;O<16;O++)E=397*E^(this._m[O]||0);return E},t.prototype.decompose=function(E,O,_t){if(this._isIdentity)return _t&&_t.setAll(0),E&&E.setAll(1),O&&O.copyFromFloats(0,0,0,1),!0;var Ft=this._m;_t&&_t.copyFromFloats(Ft[12],Ft[13],Ft[14]);var Pt=E||wn.Vector3[0];if(Pt.x=Math.sqrt(Ft[0]*Ft[0]+Ft[1]*Ft[1]+Ft[2]*Ft[2]),Pt.y=Math.sqrt(Ft[4]*Ft[4]+Ft[5]*Ft[5]+Ft[6]*Ft[6]),Pt.z=Math.sqrt(Ft[8]*Ft[8]+Ft[9]*Ft[9]+Ft[10]*Ft[10]),this.determinant()<=0&&(Pt.y*=-1),0===Pt.x||0===Pt.y||0===Pt.z)return O&&O.copyFromFloats(0,0,0,1),!1;if(O){var Dt=1/Pt.x,Lt=1/Pt.y,Ut=1/Pt.z;t.FromValuesToRef(Ft[0]*Dt,Ft[1]*Dt,Ft[2]*Dt,0,Ft[4]*Lt,Ft[5]*Lt,Ft[6]*Lt,0,Ft[8]*Ut,Ft[9]*Ut,Ft[10]*Ut,0,0,0,0,1,wn.Matrix[0]),bn.FromRotationMatrixToRef(wn.Matrix[0],O)}return!0},t.prototype.getRow=function(E){if(E<0||E>3)return null;var O=4*E;return new mn(this._m[O+0],this._m[O+1],this._m[O+2],this._m[O+3])},t.prototype.setRow=function(E,O){return this.setRowFromFloats(E,O.x,O.y,O.z,O.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(E){return t.TransposeToRef(this,E),this},t.prototype.setRowFromFloats=function(E,O,_t,Ft,Pt){if(E<0||E>3)return this;var Dt=4*E;return this._m[Dt+0]=O,this._m[Dt+1]=_t,this._m[Dt+2]=Ft,this._m[Dt+3]=Pt,this._markAsUpdated(),this},t.prototype.scale=function(E){var O=new t;return this.scaleToRef(E,O),O},t.prototype.scaleToRef=function(E,O){for(var _t=0;_t<16;_t++)O._m[_t]=this._m[_t]*E;return O._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(E,O){for(var _t=0;_t<16;_t++)O._m[_t]+=this._m[_t]*E;return O._markAsUpdated(),this},t.prototype.toNormalMatrix=function(E){var O=wn.Matrix[0];this.invertToRef(O),O.transposeToRef(E);var _t=E._m;t.FromValuesToRef(_t[0],_t[1],_t[2],0,_t[4],_t[5],_t[6],0,_t[8],_t[9],_t[10],0,0,0,0,1,E)},t.prototype.getRotationMatrix=function(){var E=new t;return this.getRotationMatrixToRef(E),E},t.prototype.getRotationMatrixToRef=function(E){var O=wn.Vector3[0];if(!this.decompose(O))return t.IdentityToRef(E),this;var _t=this._m,Ft=1/O.x,Pt=1/O.y,Dt=1/O.z;return t.FromValuesToRef(_t[0]*Ft,_t[1]*Ft,_t[2]*Ft,0,_t[4]*Pt,_t[5]*Pt,_t[6]*Pt,0,_t[8]*Dt,_t[9]*Dt,_t[10]*Dt,0,0,0,0,1,E),this},t.prototype.toggleModelMatrixHandInPlace=function(){var E=this._m;E[2]*=-1,E[6]*=-1,E[8]*=-1,E[9]*=-1,E[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var E=this._m;E[8]*=-1,E[9]*=-1,E[10]*=-1,E[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(E,O,_t,Ft){void 0===O&&(O=!1),void 0===_t&&(_t=!1),void 0===Ft&&(Ft=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=E,this._isIdentity3x2=E||_t,this._isIdentityDirty=!this._isIdentity&&O,this._isIdentity3x2Dirty=!this._isIdentity3x2&&Ft},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}(),bn=function(){function t(E,O,_t,Ft){void 0===E&&(E=0),void 0===O&&(O=0),void 0===_t&&(_t=0),void 0===Ft&&(Ft=1),this.x=E,this.y=O,this.z=_t,this.w=Ft}return t.FromRotationMatrix=function(E){var O=new t;return t.FromRotationMatrixToRef(E,O),O},t.FromRotationMatrixToRef=function(E,O){var _t,Ft=E.m,Pt=Ft[0],Dt=Ft[4],Lt=Ft[8],Ut=Ft[1],Xt=Ft[5],Kt=Ft[9],Zt=Ft[2],le=Ft[6],ve=Ft[10],Ce=Pt+Xt+ve;Ce>0?(_t=.5/Math.sqrt(Ce+1),O.w=.25/_t,O.x=(le-Kt)*_t,O.y=(Lt-Zt)*_t,O.z=(Ut-Dt)*_t):Pt>Xt&&Pt>ve?(_t=2*Math.sqrt(1+Pt-Xt-ve),O.w=(le-Kt)/_t,O.x=.25*_t,O.y=(Dt+Ut)/_t,O.z=(Lt+Zt)/_t):Xt>ve?(_t=2*Math.sqrt(1+Xt-Pt-ve),O.w=(Lt-Zt)/_t,O.x=(Dt+Ut)/_t,O.y=.25*_t,O.z=(Kt+le)/_t):(_t=2*Math.sqrt(1+ve-Pt-Xt),O.w=(Ut-Dt)/_t,O.x=(Lt+Zt)/_t,O.y=(Kt+le)/_t,O.z=.25*_t)},t.Dot=function(E,O){return E.x*O.x+E.y*O.y+E.z*O.z+E.w*O.w},t.AreClose=function(E,O){return t.Dot(E,O)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(E){return new t(-E.x,-E.y,-E.z,E.w)},t.IsIdentity=function(E){return E&&0===E.x&&0===E.y&&0===E.z&&1===E.w},t.RotationAxis=function(E,O){var _t=O*dn;return t.RotationAxisToRef(E,_t,new t)},t.RotationAxisToRef=function(E,O,_t){var Ft=O*dn,Pt=Math.sin(Ft/2);return E.normalize(),_t.w=Math.cos(Ft/2),_t.x=E.x*Pt,_t.y=E.y*Pt,_t.z=E.z*Pt,_t},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1],E[O+2],E[O+3])},t.FromEulerAnglesRef=function(E,O,_t,Ft){return t.RotationYawPitchRollToRef(O*dn,E*dn,_t*dn,Ft)},t.RotationYawPitchRoll=function(E,O,_t){var Ft=new t;return t.RotationYawPitchRollToRef(E,O,_t,Ft),Ft},t.RotationYawPitchRollToRef=function(E,O,_t,Ft){var Pt=.5*O,Dt=.5*E,Lt=.5*_t,Ut=Math.cos(Pt),Xt=Math.cos(Dt),Kt=Math.cos(Lt),Zt=Math.sin(Pt),le=Math.sin(Dt),ve=Math.sin(Lt);Ft.x=Xt*Zt*Kt+le*Ut*ve,Ft.y=le*Ut*Kt-Xt*Zt*ve,Ft.z=Xt*Ut*ve-le*Zt*Kt,Ft.w=Xt*Ut*Kt+le*Zt*ve},t.RotationAlphaBetaGamma=function(E,O,_t){var Ft=new t;return t.RotationAlphaBetaGammaToRef(E,O,_t,Ft),Ft},t.RotationAlphaBetaGammaToRef=function(E,O,_t,Ft){var Pt=.5*(_t+E),Dt=.5*(_t-E),Lt=.5*O;Ft.x=Math.cos(Dt)*Math.sin(Lt),Ft.y=Math.sin(Dt)*Math.sin(Lt),Ft.z=Math.sin(Pt)*Math.cos(Lt),Ft.w=Math.cos(Pt)*Math.cos(Lt)},t.RotationQuaternionFromAxis=function(E,O,_t){var Ft=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(E,O,_t,Ft),Ft},t.RotationQuaternionFromAxisToRef=function(E,O,_t,Ft){var Pt=wn.Matrix[0];gn.FromXYZAxesToRef(E.normalize(),O.normalize(),_t.normalize(),Pt),t.FromRotationMatrixToRef(Pt,Ft)},t.Slerp=function(E,O,_t){var Ft=t.Identity;return t.SlerpToRef(E,O,_t,Ft),Ft},t.SlerpToRef=function(E,O,_t,Ft){var Pt,Dt,Lt=E.x*O.x+E.y*O.y+E.z*O.z+E.w*O.w,Ut=!1;if(Lt<0&&(Ut=!0,Lt=-Lt),Lt>.999999)Dt=1-_t,Pt=Ut?-_t:_t;else{var Xt=Math.acos(Lt),Kt=1/Math.sin(Xt);Dt=Math.sin((1-_t)*Xt)*Kt,Pt=Ut?-Math.sin(_t*Xt)*Kt:Math.sin(_t*Xt)*Kt}Ft.x=Dt*E.x+Pt*O.x,Ft.y=Dt*E.y+Pt*O.y,Ft.z=Dt*E.z+Pt*O.z,Ft.w=Dt*E.w+Pt*O.w},t.Hermite=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt,Ut=2*Lt-3*Dt+1,Xt=-2*Lt+3*Dt,Kt=Lt-2*Dt+Pt,Zt=Lt-Dt;return new t(E.x*Ut+_t.x*Xt+O.x*Kt+Ft.x*Zt,E.y*Ut+_t.y*Xt+O.y*Kt+Ft.y*Zt,E.z*Ut+_t.z*Xt+O.z*Kt+Ft.z*Zt,E.w*Ut+_t.w*Xt+O.w*Kt+Ft.w*Zt)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!1,configurable:!0}),t.Angle=function(E,O){var _t=t.Dot(E,O);return 2*Math.acos(Math.min(Math.abs(_t),1))*yn},t.Euler=function(E,O,_t){return t.RotationYawPitchRoll(O*dn,E*dn,_t*dn)},t.LookRotation=function(E,O){void 0===O&&(O=wn.staticUp);var _t=vn.Normalize(E),Ft=vn.Normalize(vn.Cross(O,_t)),Pt=vn.Cross(_t,Ft),Dt=Ft.x,Lt=Ft.y,Ut=Ft.z,Xt=Pt.x,Kt=Pt.y,Zt=Pt.z,le=_t.x,ve=_t.y,Ce=_t.z,Re=Dt+Kt+Ce,Me=new t;if(Re>0){var Se=Math.sqrt(Re+1);return Me.w=.5*Se,Se=.5/Se,Me.x=(Zt-ve)*Se,Me.y=(le-Ut)*Se,Me.z=(Lt-Xt)*Se,Me}if(Dt>=Kt&&Dt>=Ce){var Ie=Math.sqrt(1+Dt-Kt-Ce),Fe=.5/Ie;return Me.x=.5*Ie,Me.y=(Lt+Xt)*Fe,Me.z=(Ut+le)*Fe,Me.w=(Zt-ve)*Fe,Me}if(Kt>Ce){var Pe=Math.sqrt(1+Kt-Dt-Ce),Ne=.5/Pe;return Me.x=(Xt+Lt)*Ne,Me.y=.5*Pe,Me.z=(ve+Zt)*Ne,Me.w=(le-Ut)*Ne,Me}var ze=Math.sqrt(1+Ce-Dt-Kt),De=.5/ze;return Me.x=(le+Ut)*De,Me.y=(ve+Zt)*De,Me.z=.5*ze,Me.w=(Lt-Xt)*De,Me},t.RotateTowards=function(E,O,_t){var Ft=t.Angle(E,O);if(0===Ft)return O;var Pt=Math.min(1,_t/Ft);return t.Slerp(E,O,Pt)},t.FromToRotation=function(E,O,_t){void 0===_t&&(_t=wn.staticUp);var Ft=E.normalize(),Pt=O.normalize(),Dt=vn.Cross(Ft,Pt),Lt=Math.sqrt(Ft.lengthSquared()*Pt.lengthSquared())+vn.Dot(Ft,Pt);return Dt.lengthSquared()<1e-4?Math.abs(Lt)<1e-4?new t(_t.x,_t.y,_t.z,0).normalized:t.Identity:new t(Dt.x,Dt.y,Dt.z,Lt).normalized},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!1,configurable:!0}),t.prototype.setFromToRotation=function(E,O,_t){void 0===_t&&(_t=wn.staticUp);var Ft=t.FromToRotation(E,O,_t);this.x=Ft.x,this.y=Ft.y,this.z=Ft.z,this.w=Ft.w},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var E=new vn,O=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,_t=this.x*this.w-this.y*this.z;return _t>.4995*O?(E.x=Math.PI/2,E.y=2*Math.atan2(this.y,this.x),E.z=0):_t<-.4995*O?(E.x=-Math.PI/2,E.y=-2*Math.atan2(this.y,this.x),E.z=0):(E.x=Math.asin(2*(this.w*this.x-this.y*this.z)),E.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),E.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),E.x*=yn,E.y*=yn,E.z*=yn,E.x=hn.Repeat(E.x,360),E.y=hn.Repeat(E.y,360),E.z=hn.Repeat(E.z,360),E},set:function(E){this.setEuler(E.x,E.y,E.z)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!1,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var E=this.x||0;return 397*(E=397*(E=397*E^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(E){return E&&this.x===E.x&&this.y===E.y&&this.z===E.z&&this.w===E.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(E){return this.x=E.x,this.y=E.y,this.z=E.z,this.w=E.w,this},t.prototype.copyFromFloats=function(E,O,_t,Ft){return this.x=E,this.y=O,this.z=_t,this.w=Ft,this},t.prototype.set=function(E,O,_t,Ft){return this.copyFromFloats(E,O,_t,Ft)},t.prototype.setEuler=function(E,O,_t){return t.RotationYawPitchRollToRef(O*dn,E*dn,_t*dn,this),this},t.prototype.add=function(E){return new t(this.x+E.x,this.y+E.y,this.z+E.z,this.w+E.w)},t.prototype.addInPlace=function(E){return this.x+=E.x,this.y+=E.y,this.z+=E.z,this.w+=E.w,this},t.prototype.subtract=function(E){return new t(this.x-E.x,this.y-E.y,this.z-E.z,this.w-E.w)},t.prototype.scale=function(E){return new t(this.x*E,this.y*E,this.z*E,this.w*E)},t.prototype.scaleToRef=function(E,O){return O.x=this.x*E,O.y=this.y*E,O.z=this.z*E,O.w=this.w*E,this},t.prototype.scaleInPlace=function(E){return this.x*=E,this.y*=E,this.z*=E,this.w*=E,this},t.prototype.scaleAndAddToRef=function(E,O){return O.x+=this.x*E,O.y+=this.y*E,O.z+=this.z*E,O.w+=this.w*E,this},t.prototype.multiply=function(E){var O=new t(0,0,0,1);return this.multiplyToRef(E,O),O},t.prototype.multiplyToRef=function(E,O){var _t=this.x*E.w+this.y*E.z-this.z*E.y+this.w*E.x,Ft=-this.x*E.z+this.y*E.w+this.z*E.x+this.w*E.y,Pt=this.x*E.y-this.y*E.x+this.z*E.w+this.w*E.z,Dt=-this.x*E.x-this.y*E.y-this.z*E.z+this.w*E.w;return O.copyFromFloats(_t,Ft,Pt,Dt),this},t.prototype.multiplyInPlace=function(E){return this.multiplyToRef(E,this),this},t.prototype.conjugateToRef=function(E){return E.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var E=1/this.length;return this.x*=E,this.y*=E,this.z*=E,this.w*=E,this},t.prototype.angleAxis=function(E,O){if(0===O.lengthSquared())return t.Identity;var _t=t.Identity,Ft=E*dn;Ft*=.5;var Pt=O.normalize();return Pt=O.scaleInPlace(Math.sin(Ft)),_t.x=Pt.x,_t.y=Pt.y,_t.z=Pt.z,_t.w=Math.cos(Ft),_t.normalize()},t.prototype.toRotationMatrix=function(E){return gn.FromQuaternionToRef(this,E),this},t.prototype.fromRotationMatrix=function(E){return t.FromRotationMatrixToRef(E,this),this},t}(),vn=function(){function t(E,O,_t){void 0===E&&(E=0),void 0===O&&(O=0),void 0===_t&&(_t=0),this.x=E,this.y=O,this.z=_t}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var E=Math.abs(this.x),O=Math.abs(this.y);if(E!==O)return!0;var _t=Math.abs(this.z);return E!==_t||O!==_t},enumerable:!1,configurable:!0}),t.Add=function(E,O){return new t(E.x,E.y,E.z).addInPlace(O)},t.GetClipFactor=function(E,O,_t,Ft){var Pt=t.Dot(E,_t)-Ft;return Pt/(Pt-(t.Dot(O,_t)-Ft))},t.GetAngleBetweenVectors=function(E,O,_t){var Ft=E.normalizeToRef(wn.Vector3[1]),Pt=O.normalizeToRef(wn.Vector3[2]),Dt=t.Dot(Ft,Pt),Lt=wn.Vector3[3];return t.CrossToRef(Ft,Pt,Lt),t.Dot(Lt,_t)>0?Math.acos(Dt):-Math.acos(Dt)},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1],E[O+2])},t.FromFloatArray=function(E,O){return t.FromArray(E,O)},t.FromArrayToRef=function(E,O,_t){_t.x=E[O],_t.y=E[O+1],_t.z=E[O+2]},t.FromFloatArrayToRef=function(E,O,_t){return t.FromArrayToRef(E,O,_t)},t.FromFloatsToRef=function(E,O,_t,Ft){Ft.copyFromFloats(E,O,_t)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(E,O){var _t=t.Zero();return t.TransformCoordinatesToRef(E,O,_t),_t},t.TransformCoordinatesToRef=function(E,O,_t){return t.TransformCoordinatesFromFloatsToRef(E.x,E.y,E.z,O,_t)},t.TransformCoordinatesFromFloatsToRef=function(E,O,_t,Ft,Pt){var Dt=Ft.m,Lt=E*Dt[0]+O*Dt[4]+_t*Dt[8]+Dt[12],Ut=E*Dt[1]+O*Dt[5]+_t*Dt[9]+Dt[13],Xt=E*Dt[2]+O*Dt[6]+_t*Dt[10]+Dt[14],Kt=1/(E*Dt[3]+O*Dt[7]+_t*Dt[11]+Dt[15]);Pt.x=Lt*Kt,Pt.y=Ut*Kt,Pt.z=Xt*Kt},t.TransformNormal=function(E,O){var _t=t.Zero();return t.TransformNormalToRef(E,O,_t),_t},t.TransformNormalToRef=function(E,O,_t){this.TransformNormalFromFloatsToRef(E.x,E.y,E.z,O,_t)},t.TransformNormalFromFloatsToRef=function(E,O,_t,Ft,Pt){var Dt=Ft.m;Pt.x=E*Dt[0]+O*Dt[4]+_t*Dt[8],Pt.y=E*Dt[1]+O*Dt[5]+_t*Dt[9],Pt.z=E*Dt[2]+O*Dt[6]+_t*Dt[10]},t.CatmullRom=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt;return new t(.5*(2*O.x+(-E.x+_t.x)*Pt+(2*E.x-5*O.x+4*_t.x-Ft.x)*Dt+(-E.x+3*O.x-3*_t.x+Ft.x)*Lt),.5*(2*O.y+(-E.y+_t.y)*Pt+(2*E.y-5*O.y+4*_t.y-Ft.y)*Dt+(-E.y+3*O.y-3*_t.y+Ft.y)*Lt),.5*(2*O.z+(-E.z+_t.z)*Pt+(2*E.z-5*O.z+4*_t.z-Ft.z)*Dt+(-E.z+3*O.z-3*_t.z+Ft.z)*Lt))},t.Clamp=function(E,O,_t){var Ft=new t;return t.ClampToRef(E,O,_t,Ft),Ft},t.ClampToRef=function(E,O,_t,Ft){var Pt=E.x;Pt=(Pt=Pt>_t.x?_t.x:Pt)<O.x?O.x:Pt;var Dt=E.y;Dt=(Dt=Dt>_t.y?_t.y:Dt)<O.y?O.y:Dt;var Lt=E.z;Lt=(Lt=Lt>_t.z?_t.z:Lt)<O.z?O.z:Lt,Ft.copyFromFloats(Pt,Dt,Lt)},t.Hermite=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt,Ut=2*Lt-3*Dt+1,Xt=-2*Lt+3*Dt,Kt=Lt-2*Dt+Pt,Zt=Lt-Dt;return new t(E.x*Ut+_t.x*Xt+O.x*Kt+Ft.x*Zt,E.y*Ut+_t.y*Xt+O.y*Kt+Ft.y*Zt,E.z*Ut+_t.z*Xt+O.z*Kt+Ft.z*Zt)},t.Lerp=function(E,O,_t){var Ft=new t(0,0,0);return t.LerpToRef(E,O,_t,Ft),Ft},t.LerpToRef=function(E,O,_t,Ft){Ft.x=E.x+(O.x-E.x)*_t,Ft.y=E.y+(O.y-E.y)*_t,Ft.z=E.z+(O.z-E.z)*_t},t.Dot=function(E,O){return E.x*O.x+E.y*O.y+E.z*O.z},t.Cross=function(E,O){var _t=t.Zero();return t.CrossToRef(E,O,_t),_t},t.CrossToRef=function(E,O,_t){var Ft=E.y*O.z-E.z*O.y,Pt=E.z*O.x-E.x*O.z,Dt=E.x*O.y-E.y*O.x;_t.copyFromFloats(Ft,Pt,Dt)},t.Normalize=function(E){var O=t.Zero();return t.NormalizeToRef(E,O),O},t.NormalizeToRef=function(E,O){E.normalizeToRef(O)},t.Minimize=function(E,O){var _t=new t(E.x,E.y,E.z);return _t.minimizeInPlace(O),_t},t.Maximize=function(E,O){var _t=new t(E.x,E.y,E.z);return _t.maximizeInPlace(O),_t},t.Distance=function(E,O){return Math.sqrt(t.DistanceSquared(E,O))},t.DistanceSquared=function(E,O){var _t=E.x-O.x,Ft=E.y-O.y,Pt=E.z-O.z;return _t*_t+Ft*Ft+Pt*Pt},t.Center=function(E,O){var _t=t.Add(E,O);return _t.scaleInPlace(.5),_t},t.RotationFromAxis=function(E,O,_t){var Ft=t.Zero();return t.RotationFromAxisToRef(E,O,_t,Ft),Ft},t.RotationFromAxisToRef=function(E,O,_t,Ft){var Pt=wn.Quaternion[0];bn.RotationQuaternionFromAxisToRef(E,O,_t,Pt),Ft.copyFrom(Pt.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var E=this.x||0;return 397*(E=397*E^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var E=[];return this.toArray(E,0),E},t.prototype.toArray=function(E,O){return void 0===O&&(O=0),E[O]=this.x,E[O+1]=this.y,E[O+2]=this.z,this},t.prototype.toQuaternion=function(){return bn.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(E){return this.addInPlaceFromFloats(E.x,E.y,E.z)},t.prototype.addInPlaceFromFloats=function(E,O,_t){return this.x+=E,this.y+=O,this.z+=_t,this},t.prototype.add=function(E){return new t(this.x+E.x,this.y+E.y,this.z+E.z)},t.prototype.addToRef=function(E,O){return O.copyFromFloats(this.x+E.x,this.y+E.y,this.z+E.z)},t.prototype.subtractInPlace=function(E){return this.x-=E.x,this.y-=E.y,this.z-=E.z,this},t.prototype.subtract=function(E){return new t(this.x-E.x,this.y-E.y,this.z-E.z)},t.prototype.subtractToRef=function(E,O){return this.subtractFromFloatsToRef(E.x,E.y,E.z,O)},t.prototype.subtractFromFloats=function(E,O,_t){return new t(this.x-E,this.y-O,this.z-_t)},t.prototype.subtractFromFloatsToRef=function(E,O,_t,Ft){return Ft.copyFromFloats(this.x-E,this.y-O,this.z-_t)},t.prototype.applyMatrix4=function(E){this.applyMatrix4ToRef(E,this)},t.prototype.applyMatrix4ToRef=function(E,O){var _t=this,Ft=_t.x,Pt=_t.y,Dt=_t.z,Lt=E.m,Ut=1/(Lt[3]*Ft+Lt[7]*Pt+Lt[11]*Dt+Lt[15]);return O.x=(Lt[0]*Ft+Lt[4]*Pt+Lt[8]*Dt+Lt[12])*Ut,O.y=(Lt[1]*Ft+Lt[5]*Pt+Lt[9]*Dt+Lt[13])*Ut,O.z=(Lt[2]*Ft+Lt[6]*Pt+Lt[10]*Dt+Lt[14])*Ut,O},t.prototype.rotate=function(E){return this.rotateToRef(E,this)},t.prototype.rotateToRef=function(E,O){var _t=this,Ft=_t.x,Pt=_t.y,Dt=_t.z,Lt=E.x,Ut=E.y,Xt=E.z,Kt=E.w,Zt=Kt*Ft+Ut*Dt-Xt*Pt,le=Kt*Pt+Xt*Ft-Lt*Dt,ve=Kt*Dt+Lt*Pt-Ut*Ft,Ce=-Lt*Ft-Ut*Pt-Xt*Dt;return O.x=Zt*Kt+Ce*-Lt+le*-Xt-ve*-Ut,O.y=le*Kt+Ce*-Ut+ve*-Lt-Zt*-Xt,O.z=ve*Kt+Ce*-Xt+Zt*-Ut-le*-Lt,O},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(E){return this.x*=E,this.y*=E,this.z*=E,this},t.prototype.scale=function(E){return new t(this.x*E,this.y*E,this.z*E)},t.prototype.scaleToRef=function(E,O){return O.copyFromFloats(this.x*E,this.y*E,this.z*E)},t.prototype.scaleAndAddToRef=function(E,O){return O.addInPlaceFromFloats(this.x*E,this.y*E,this.z*E)},t.prototype.equals=function(E){return E&&this.x===E.x&&this.y===E.y&&this.z===E.z},t.prototype.equalsWithEpsilon=function(E,O){return void 0===O&&(O=ln),E&&hn.WithinEpsilon(this.x,E.x,O)&&hn.WithinEpsilon(this.y,E.y,O)&&hn.WithinEpsilon(this.z,E.z,O)},t.prototype.equalsToFloats=function(E,O,_t){return this.x===E&&this.y===O&&this.z===_t},t.prototype.multiplyInPlace=function(E){return this.x*=E.x,this.y*=E.y,this.z*=E.z,this},t.prototype.multiply=function(E){return this.multiplyByFloats(E.x,E.y,E.z)},t.prototype.multiplyToRef=function(E,O){return O.copyFromFloats(this.x*E.x,this.y*E.y,this.z*E.z)},t.prototype.multiplyByFloats=function(E,O,_t){return new t(this.x*E,this.y*O,this.z*_t)},t.prototype.divide=function(E){return new t(this.x/E.x,this.y/E.y,this.z/E.z)},t.prototype.divideToRef=function(E,O){return O.copyFromFloats(this.x/E.x,this.y/E.y,this.z/E.z)},t.prototype.divideInPlace=function(E){return this.divideToRef(E,this)},t.prototype.minimizeInPlace=function(E){return this.minimizeInPlaceFromFloats(E.x,E.y,E.z)},t.prototype.maximizeInPlace=function(E){return this.maximizeInPlaceFromFloats(E.x,E.y,E.z)},t.prototype.minimizeInPlaceFromFloats=function(E,O,_t){return E<this.x&&(this.x=E),O<this.y&&(this.y=O),_t<this.z&&(this.z=_t),this},t.prototype.maximizeInPlaceFromFloats=function(E,O,_t){return E>this.x&&(this.x=E),O>this.y&&(this.y=O),_t>this.z&&(this.z=_t),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(E){return 0===E||1===E?this:this.scaleInPlace(1/E)},t.prototype.normalizeToNew=function(){var E=new t(0,0,0);return this.normalizeToRef(E),E},t.prototype.normalizeToRef=function(E){var O=this.length();return 0===O||1===O?E.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/O,E)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(E){return this.copyFromFloats(E.x,E.y,E.z)},t.prototype.copyFromFloats=function(E,O,_t){return this.x=E,this.y=O,this.z=_t,this},t.prototype.set=function(E,O,_t){return this.copyFromFloats(E,O,_t)},t.prototype.setAll=function(E){return this.x=this.y=this.z=E,this},t}(),wn={Vector3:v(6,vn.Zero),Matrix:v(2,gn.Identity),Quaternion:v(3,bn.Zero),staticUp:vn.Up(),tmpMatrix:gn.Zero()},_n=function(){function t(E){this._radians=E,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(E,O){var _t=O.subtract(E);return new t(Math.atan2(_t.y,_t.x))},t.FromRadians=function(E){return new t(E)},t.FromDegrees=function(E){return new t(E*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}(),Tn=function(){function t(E,O){void 0===E&&(E=0),void 0===O&&(O=0),this.x=E,this.y=O}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(E,O){return new t(E.x,E.y).addInPlace(O)},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1])},t.FromArrayToRef=function(E,O,_t){_t.x=E[O],_t.y=E[O+1]},t.CatmullRom=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt;return new t(.5*(2*O.x+(-E.x+_t.x)*Pt+(2*E.x-5*O.x+4*_t.x-Ft.x)*Dt+(-E.x+3*O.x-3*_t.x+Ft.x)*Lt),.5*(2*O.y+(-E.y+_t.y)*Pt+(2*E.y-5*O.y+4*_t.y-Ft.y)*Dt+(-E.y+3*O.y-3*_t.y+Ft.y)*Lt))},t.Clamp=function(E,O,_t){var Ft=E.x;Ft=(Ft=Ft>_t.x?_t.x:Ft)<O.x?O.x:Ft;var Pt=E.y;return new t(Ft,Pt=(Pt=Pt>_t.y?_t.y:Pt)<O.y?O.y:Pt)},t.Hermite=function(E,O,_t,Ft,Pt){var Dt=Pt*Pt,Lt=Pt*Dt,Ut=2*Lt-3*Dt+1,Xt=-2*Lt+3*Dt,Kt=Lt-2*Dt+Pt,Zt=Lt-Dt;return new t(E.x*Ut+_t.x*Xt+O.x*Kt+Ft.x*Zt,E.y*Ut+_t.y*Xt+O.y*Kt+Ft.y*Zt)},t.Lerp=function(E,O,_t){return new t(E.x+(O.x-E.x)*_t,E.y+(O.y-E.y)*_t)},t.Dot=function(E,O){return E.x*O.x+E.y*O.y},t.Normalize=function(E){var O=new t(E.x,E.y);return O.normalize(),O},t.Minimize=function(E,O){return new t(E.x<O.x?E.x:O.x,E.y<O.y?E.y:O.y)},t.Maximize=function(E,O){return new t(E.x>O.x?E.x:O.x,E.y>O.y?E.y:O.y)},t.Transform=function(E,O){var _t=t.Zero();return t.TransformToRef(E,O,_t),_t},t.TransformToRef=function(E,O,_t){var Ft=O.m,Pt=E.x*Ft[0]+E.y*Ft[4]+Ft[12],Dt=E.x*Ft[1]+E.y*Ft[5]+Ft[13];_t.x=Pt,_t.y=Dt},t.PointInTriangle=function(E,O,_t,Ft){var Pt=.5*(-_t.y*Ft.x+O.y*(-_t.x+Ft.x)+O.x*(_t.y-Ft.y)+_t.x*Ft.y),Dt=Pt<0?-1:1,Lt=(O.y*Ft.x-O.x*Ft.y+(Ft.y-O.y)*E.x+(O.x-Ft.x)*E.y)*Dt,Ut=(O.x*_t.y-O.y*_t.x+(O.y-_t.y)*E.x+(_t.x-O.x)*E.y)*Dt;return Lt>0&&Ut>0&&Lt+Ut<2*Pt*Dt},t.Distance=function(E,O){return Math.sqrt(t.DistanceSquared(E,O))},t.DistanceSquared=function(E,O){var _t=E.x-O.x,Ft=E.y-O.y;return _t*_t+Ft*Ft},t.Center=function(E,O){var _t=t.Add(E,O);return _t.scaleInPlace(.5),_t},t.DistanceOfPointFromSegment=function(E,O,_t){var Ft=t.DistanceSquared(O,_t);if(0===Ft)return t.Distance(E,O);var Pt=_t.subtract(O),Dt=Math.max(0,Math.min(1,t.Dot(E.subtract(O),Pt)/Ft)),Lt=O.add(Pt.multiplyByFloats(Dt,Dt));return t.Distance(E,Lt)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},t.prototype.toArray=function(E,O){return void 0===O&&(O=0),E[O]=this.x,E[O+1]=this.y,this},t.prototype.asArray=function(){var E=new Array;return this.toArray(E,0),E},t.prototype.copyFrom=function(E){return this.x=E.x,this.y=E.y,this},t.prototype.copyFromFloats=function(E,O){return this.x=E,this.y=O,this},t.prototype.set=function(E,O){return this.copyFromFloats(E,O)},t.prototype.add=function(E){return new t(this.x+E.x,this.y+E.y)},t.prototype.addToRef=function(E,O){return O.x=this.x+E.x,O.y=this.y+E.y,this},t.prototype.addInPlace=function(E){return this.x+=E.x,this.y+=E.y,this},t.prototype.addVector3=function(E){return new t(this.x+E.x,this.y+E.y)},t.prototype.subtract=function(E){return new t(this.x-E.x,this.y-E.y)},t.prototype.subtractToRef=function(E,O){return O.x=this.x-E.x,O.y=this.y-E.y,this},t.prototype.subtractInPlace=function(E){return this.x-=E.x,this.y-=E.y,this},t.prototype.multiplyInPlace=function(E){return this.x*=E.x,this.y*=E.y,this},t.prototype.multiply=function(E){return new t(this.x*E.x,this.y*E.y)},t.prototype.multiplyToRef=function(E,O){return O.x=this.x*E.x,O.y=this.y*E.y,this},t.prototype.multiplyByFloats=function(E,O){return new t(this.x*E,this.y*O)},t.prototype.divide=function(E){return new t(this.x/E.x,this.y/E.y)},t.prototype.divideToRef=function(E,O){return O.x=this.x/E.x,O.y=this.y/E.y,this},t.prototype.divideInPlace=function(E){return this.divideToRef(E,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(E){return this.x*=E,this.y*=E,this},t.prototype.scale=function(E){var O=new t(0,0);return this.scaleToRef(E,O),O},t.prototype.scaleToRef=function(E,O){return O.x=this.x*E,O.y=this.y*E,this},t.prototype.scaleAndAddToRef=function(E,O){return O.x+=this.x*E,O.y+=this.y*E,this},t.prototype.equals=function(E){return E&&this.x===E.x&&this.y===E.y},t.prototype.equalsWithEpsilon=function(E,O){return void 0===O&&(O=ln),E&&hn.WithinEpsilon(this.x,E.x,O)&&hn.WithinEpsilon(this.y,E.y,O)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var E=this.length();if(0===E)return this;var O=1/E;return this.x*=O,this.y*=O,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),zt=function(O,_t,Ft){this.startPoint=O,this.midPoint=_t,this.endPoint=Ft;var Pt=Math.pow(_t.x,2)+Math.pow(_t.y,2),Dt=(Math.pow(O.x,2)+Math.pow(O.y,2)-Pt)/2,Lt=(Pt-Math.pow(Ft.x,2)-Math.pow(Ft.y,2))/2,Ut=(O.x-_t.x)*(_t.y-Ft.y)-(_t.x-Ft.x)*(O.y-_t.y);this.centerPoint=new Tn((Dt*(_t.y-Ft.y)-Lt*(O.y-_t.y))/Ut,((O.x-_t.x)*Lt-(_t.x-Ft.x)*Dt)/Ut),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=_n.BetweenTwoPoints(this.centerPoint,this.startPoint);var Xt=this.startAngle.degrees(),Kt=_n.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),Zt=_n.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();Kt-Xt>180&&(Kt-=360),Kt-Xt<-180&&(Kt+=360),Zt-Kt>180&&(Zt-=360),Zt-Kt<-180&&(Zt+=360),this.orientation=Kt-Xt<0?E.Orientation.CW:E.Orientation.CCW,this.angle=_n.FromDegrees(this.orientation===E.Orientation.CW?Xt-Zt:Zt-Xt)},xn=function(){function t(){}return t.X=new vn(1,0,0),t.Y=new vn(0,1,0),t.Z=new vn(0,0,1),t}(),An=function(){function t(){}return t.Interpolate=function(E,O,_t,Ft,Pt){for(var Dt=1-3*Ft+3*O,Lt=3*Ft-6*O,Ut=3*O,Xt=E,Kt=0;Kt<5;Kt++){var Zt=Xt*Xt;Xt-=1/(3*Dt*Zt+2*Lt*Xt+Ut)*(Dt*(Zt*Xt)+Lt*Zt+Ut*Xt-E),Xt=Math.min(1,Math.max(0,Xt))}return 3*Math.pow(1-Xt,2)*Xt*_t+3*(1-Xt)*Math.pow(Xt,2)*Pt+Math.pow(Xt,3)},t}(),Cn=function(){function t(E,O,_t,Ft){void 0===E&&(E=0),void 0===O&&(O=0),void 0===_t&&(_t=0),void 0===Ft&&(Ft=1),this.r=E,this.g=O,this.b=_t,this.a=Ft}return t.FromHexString=function(E){if("#"!==E.substring(0,1)||9!==E.length)return new t(0,0,0,0);var O=parseInt(E.substring(1,3),16),_t=parseInt(E.substring(3,5),16),Ft=parseInt(E.substring(5,7),16),Pt=parseInt(E.substring(7,9),16);return t.FromInts(O,_t,Ft,Pt)},t.Lerp=function(E,O,_t){var Ft=new t(0,0,0,0);return t.LerpToRef(E,O,_t,Ft),Ft},t.LerpToRef=function(E,O,_t,Ft){Ft.r=E.r+(O.r-E.r)*_t,Ft.g=E.g+(O.g-E.g)*_t,Ft.b=E.b+(O.b-E.b)*_t,Ft.a=E.a+(O.a-E.a)*_t},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(E,O){return void 0===O&&(O=1),new t(E.r,E.g,E.b,O)},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1],E[O+2],E[O+3])},t.FromInts=function(E,O,_t,Ft){return new t(E/255,O/255,_t/255,Ft/255)},t.CheckColors4=function(E,O){if(E.length===3*O){for(var _t=[],Ft=0;Ft<E.length;Ft+=3){var Pt=Ft/3*4;_t[Pt]=E[Ft],_t[Pt+1]=E[Ft+1],_t[Pt+2]=E[Ft+2],_t[Pt+3]=1}return _t}return E},t.prototype.addInPlace=function(E){return this.r+=E.r,this.g+=E.g,this.b+=E.b,this.a+=E.a,this},t.prototype.asArray=function(){var E=new Array;return this.toArray(E,0),E},t.prototype.toArray=function(E,O){return void 0===O&&(O=0),E[O]=this.r,E[O+1]=this.g,E[O+2]=this.b,E[O+3]=this.a,this},t.prototype.add=function(E){return new t(this.r+E.r,this.g+E.g,this.b+E.b,this.a+E.a)},t.prototype.subtract=function(E){return new t(this.r-E.r,this.g-E.g,this.b-E.b,this.a-E.a)},t.prototype.subtractToRef=function(E,O){return O.r=this.r-E.r,O.g=this.g-E.g,O.b=this.b-E.b,O.a=this.a-E.a,this},t.prototype.scale=function(E){return new t(this.r*E,this.g*E,this.b*E,this.a*E)},t.prototype.scaleToRef=function(E,O){return O.r=this.r*E,O.g=this.g*E,O.b=this.b*E,O.a=this.a*E,this},t.prototype.scaleAndAddToRef=function(E,O){return O.r+=this.r*E,O.g+=this.g*E,O.b+=this.b*E,O.a+=this.a*E,this},t.prototype.clampToRef=function(E,O,_t){return void 0===E&&(E=0),void 0===O&&(O=1),_t.r=hn.Clamp(this.r,E,O),_t.g=hn.Clamp(this.g,E,O),_t.b=hn.Clamp(this.b,E,O),_t.a=hn.Clamp(this.a,E,O),this},t.prototype.multiply=function(E){return new t(this.r*E.r,this.g*E.g,this.b*E.b,this.a*E.a)},t.prototype.multiplyToRef=function(E,O){return O.r=this.r*E.r,O.g=this.g*E.g,O.b=this.b*E.b,O.a=this.a*E.a,O},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var E=this.r||0;return 397*(E=397*(E=397*E^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(E){return this.r=E.r,this.g=E.g,this.b=E.b,this.a=E.a,this},t.prototype.copyFromFloats=function(E,O,_t,Ft){return this.r=E,this.g=O,this.b=_t,this.a=Ft,this},t.prototype.set=function(E,O,_t,Ft){return this.copyFromFloats(E,O,_t,Ft)},t.prototype.toHexString=function(){var E=255*this.r|0,O=255*this.g|0,_t=255*this.b|0,Ft=255*this.a|0;return"#"+hn.ToHex(E)+hn.ToHex(O)+hn.ToHex(_t)+hn.ToHex(Ft)},t.prototype.toLinearSpace=function(){var E=new t;return this.toLinearSpaceToRef(E),E},t.prototype.toLinearSpaceToRef=function(E){return E.r=Math.pow(this.r,pn),E.g=Math.pow(this.g,pn),E.b=Math.pow(this.b,pn),E.a=this.a,this},t.prototype.toGammaSpace=function(){var E=new t;return this.toGammaSpaceToRef(E),E},t.prototype.toGammaSpaceToRef=function(E){return E.r=Math.pow(this.r,cn),E.g=Math.pow(this.g,cn),E.b=Math.pow(this.b,cn),E.a=this.a,this},t}(),En=function(){function t(E,O,_t){void 0===E&&(E=0),void 0===O&&(O=0),void 0===_t&&(_t=0),this.r=E,this.g=O,this.b=_t}return t.FromHexString=function(E){if("#"!==E.substring(0,1)||7!==E.length)return new t(0,0,0);var O=parseInt(E.substring(1,3),16),_t=parseInt(E.substring(3,5),16),Ft=parseInt(E.substring(5,7),16);return t.FromInts(O,_t,Ft)},t.FromArray=function(E,O){return void 0===O&&(O=0),new t(E[O],E[O+1],E[O+2])},t.FromInts=function(E,O,_t){return new t(E/255,O/255,_t/255)},t.Lerp=function(E,O,_t){var Ft=new t(0,0,0);return t.LerpToRef(E,O,_t,Ft),Ft},t.LerpToRef=function(E,O,_t,Ft){Ft.r=E.r+(O.r-E.r)*_t,Ft.g=E.g+(O.g-E.g)*_t,Ft.b=E.b+(O.b-E.b)*_t},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var E=this.r||0;return 397*(E=397*E^(this.g||0))^(this.b||0)},t.prototype.toArray=function(E,O){return void 0===O&&(O=0),E[O]=this.r,E[O+1]=this.g,E[O+2]=this.b,this},t.prototype.toColor4=function(E){return void 0===E&&(E=1),new Cn(this.r,this.g,this.b,E)},t.prototype.asArray=function(){var E=new Array;return this.toArray(E,0),E},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(E){return new t(this.r*E.r,this.g*E.g,this.b*E.b)},t.prototype.multiplyToRef=function(E,O){return O.r=this.r*E.r,O.g=this.g*E.g,O.b=this.b*E.b,this},t.prototype.equals=function(E){return E&&this.r===E.r&&this.g===E.g&&this.b===E.b},t.prototype.equalsFloats=function(E,O,_t){return this.r===E&&this.g===O&&this.b===_t},t.prototype.scale=function(E){return new t(this.r*E,this.g*E,this.b*E)},t.prototype.scaleToRef=function(E,O){return O.r=this.r*E,O.g=this.g*E,O.b=this.b*E,this},t.prototype.scaleAndAddToRef=function(E,O){return O.r+=this.r*E,O.g+=this.g*E,O.b+=this.b*E,this},t.prototype.clampToRef=function(E,O,_t){return void 0===E&&(E=0),void 0===O&&(O=1),_t.r=hn.Clamp(this.r,E,O),_t.g=hn.Clamp(this.g,E,O),_t.b=hn.Clamp(this.b,E,O),this},t.prototype.add=function(E){return new t(this.r+E.r,this.g+E.g,this.b+E.b)},t.prototype.addToRef=function(E,O){return O.r=this.r+E.r,O.g=this.g+E.g,O.b=this.b+E.b,this},t.prototype.subtract=function(E){return new t(this.r-E.r,this.g-E.g,this.b-E.b)},t.prototype.subtractToRef=function(E,O){return O.r=this.r-E.r,O.g=this.g-E.g,O.b=this.b-E.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(E){return this.r=E.r,this.g=E.g,this.b=E.b,this},t.prototype.copyFromFloats=function(E,O,_t){return this.r=E,this.g=O,this.b=_t,this},t.prototype.set=function(E,O,_t){return this.copyFromFloats(E,O,_t)},t.prototype.toHexString=function(){var E=255*this.r|0,O=255*this.g|0,_t=255*this.b|0;return"#"+hn.ToHex(E)+hn.ToHex(O)+hn.ToHex(_t)},t.prototype.toLinearSpace=function(){var E=new t;return this.toLinearSpaceToRef(E),E},t.prototype.toLinearSpaceToRef=function(E){return E.r=Math.pow(this.r,pn),E.g=Math.pow(this.g,pn),E.b=Math.pow(this.b,pn),this},t.prototype.toGammaSpace=function(){var E=new t;return this.toGammaSpaceToRef(E),E},t.prototype.toGammaSpaceToRef=function(E){return E.r=Math.pow(this.r,cn),E.g=Math.pow(this.g,cn),E.b=Math.pow(this.b,cn),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}(),Rn=function(){function t(E){this._length=0,this._points=E,this._length=this._computeLength(E)}return t.CreateQuadraticBezier=function(E,O,_t,Ft){Ft=Ft>2?Ft:3;for(var Pt=new Array,s=function(E,O,_t,Ft){return(1-E)*(1-E)*O+2*E*(1-E)*_t+E*E*Ft},Dt=0;Dt<=Ft;Dt++)Pt.push(new vn(s(Dt/Ft,E.x,O.x,_t.x),s(Dt/Ft,E.y,O.y,_t.y),s(Dt/Ft,E.z,O.z,_t.z)));return new t(Pt)},t.CreateCubicBezier=function(E,O,_t,Ft,Pt){Pt=Pt>3?Pt:4;for(var Dt=new Array,a=function(E,O,_t,Ft,Pt){return(1-E)*(1-E)*(1-E)*O+3*E*(1-E)*(1-E)*_t+3*E*E*(1-E)*Ft+E*E*E*Pt},Lt=0;Lt<=Pt;Lt++)Dt.push(new vn(a(Lt/Pt,E.x,O.x,_t.x,Ft.x),a(Lt/Pt,E.y,O.y,_t.y,Ft.y),a(Lt/Pt,E.z,O.z,_t.z,Ft.z)));return new t(Dt)},t.CreateHermiteSpline=function(E,O,_t,Ft,Pt){for(var Dt=new Array,Lt=1/Pt,Ut=0;Ut<=Pt;Ut++)Dt.push(vn.Hermite(E,O,_t,Ft,Ut*Lt));return new t(Dt)},t.CreateCatmullRomSpline=function(E,O,_t){var Ft=new Array,Pt=1/O,Dt=0;if(_t){for(var Lt=E.length,Ut=0;Ut<Lt;Ut++){Dt=0;for(var Xt=0;Xt<O;Xt++)Ft.push(vn.CatmullRom(E[Ut%Lt],E[(Ut+1)%Lt],E[(Ut+2)%Lt],E[(Ut+3)%Lt],Dt)),Dt+=Pt}Ft.push(Ft[0])}else{var Kt=new Array;for(Kt.push(E[0].clone()),Array.prototype.push.apply(Kt,E),Kt.push(E[E.length-1].clone()),Ut=0,Ut=0;Ut<Kt.length-3;Ut++)for(Dt=0,Xt=0;Xt<O;Xt++)Ft.push(vn.CatmullRom(Kt[Ut],Kt[Ut+1],Kt[Ut+2],Kt[Ut+3],Dt)),Dt+=Pt;Ut--,Ft.push(vn.CatmullRom(Kt[Ut],Kt[Ut+1],Kt[Ut+2],Kt[Ut+3],Dt))}return new t(Ft)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(E){for(var O=this._points[this._points.length-1],_t=this._points.slice(),Ft=E.getPoints(),Pt=1;Pt<Ft.length;Pt++)_t.push(Ft[Pt].subtract(Ft[0]).add(O));return new t(_t)},t.prototype._computeLength=function(E){for(var O=0,_t=1;_t<E.length;_t++)O+=E[_t].subtract(E[_t-1]).length();return O},t}(),Mn=function(){function t(E,O,_t,Ft){this.normal=new vn(E,O,_t),this.d=Ft}return t.FromArray=function(E){return new t(E[0],E[1],E[2],E[3])},t.FromPoints=function(E,O,_t){var Ft=new t(0,0,0,0);return Ft.copyFromPoints(E,O,_t),Ft},t.FromPositionAndNormal=function(E,O){var _t=new t(0,0,0,0);return O.normalize(),_t.normal=O,_t.d=-(O.x*E.x+O.y*E.y+O.z*E.z),_t},t.SignedDistanceToPlaneFromPositionAndNormal=function(E,O,_t){var Ft=-(O.x*E.x+O.y*E.y+O.z*E.z);return vn.Dot(_t,O)+Ft},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},t.prototype.normalize=function(){var E=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),O=0;return 0!==E&&(O=1/E),this.normal.x*=O,this.normal.y*=O,this.normal.z*=O,this.d*=O,this},t.prototype.transform=function(E){var O=wn.Matrix[0];gn.TransposeToRef(E,O);var _t=O.m,Ft=this.normal.x,Pt=this.normal.y,Dt=this.normal.z,Lt=this.d;return new t(Ft*_t[0]+Pt*_t[1]+Dt*_t[2]+Lt*_t[3],Ft*_t[4]+Pt*_t[5]+Dt*_t[6]+Lt*_t[7],Ft*_t[8]+Pt*_t[9]+Dt*_t[10]+Lt*_t[11],Ft*_t[12]+Pt*_t[13]+Dt*_t[14]+Lt*_t[15])},t.prototype.dotCoordinate=function(E){return this.normal.x*E.x+this.normal.y*E.y+this.normal.z*E.z+this.d},t.prototype.copyFromPoints=function(E,O,_t){var Ft,Pt=O.x-E.x,Dt=O.y-E.y,Lt=O.z-E.z,Ut=_t.x-E.x,Xt=_t.y-E.y,Kt=_t.z-E.z,Zt=Dt*Kt-Lt*Xt,le=Lt*Ut-Pt*Kt,ve=Pt*Xt-Dt*Ut,Ce=Math.sqrt(Zt*Zt+le*le+ve*ve);return Ft=0!==Ce?1/Ce:0,this.normal.x=Zt*Ft,this.normal.y=le*Ft,this.normal.z=ve*Ft,this.d=-(this.normal.x*E.x+this.normal.y*E.y+this.normal.z*E.z),this},t.prototype.isFrontFacingTo=function(E,O){return vn.Dot(this.normal,E)<=O},t.prototype.signedDistanceTo=function(E){return vn.Dot(E,this.normal)+this.d},t}(),Sn=function(){function t(){}return t.GetPlanes=function(E){for(var O=[],_t=0;_t<6;_t++)O.push(new Mn(0,0,0,0));return t.GetPlanesToRef(E,O),O},t.GetNearPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]+_t[2],O.normal.y=_t[7]+_t[6],O.normal.z=_t[11]+_t[10],O.d=_t[15]+_t[14],O.normalize()},t.GetFarPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]-_t[2],O.normal.y=_t[7]-_t[6],O.normal.z=_t[11]-_t[10],O.d=_t[15]-_t[14],O.normalize()},t.GetLeftPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]+_t[0],O.normal.y=_t[7]+_t[4],O.normal.z=_t[11]+_t[8],O.d=_t[15]+_t[12],O.normalize()},t.GetRightPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]-_t[0],O.normal.y=_t[7]-_t[4],O.normal.z=_t[11]-_t[8],O.d=_t[15]-_t[12],O.normalize()},t.GetTopPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]-_t[1],O.normal.y=_t[7]-_t[5],O.normal.z=_t[11]-_t[9],O.d=_t[15]-_t[13],O.normalize()},t.GetBottomPlaneToRef=function(E,O){var _t=E.m;O.normal.x=_t[3]+_t[1],O.normal.y=_t[7]+_t[5],O.normal.z=_t[11]+_t[9],O.d=_t[15]+_t[13],O.normalize()},t.GetPlanesToRef=function(E,O){t.GetNearPlaneToRef(E,O[0]),t.GetFarPlaneToRef(E,O[1]),t.GetLeftPlaneToRef(E,O[2]),t.GetRightPlaneToRef(E,O[3]),t.GetTopPlaneToRef(E,O[4]),t.GetBottomPlaneToRef(E,O[5])},t}(),In=function(){function e(E,O){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new Tn(E,O))}return e.StartingAt=function(E,O){return new e(E,O)},e.prototype.addLineTo=function(E,O){if(this.closed)return this;var _t=new Tn(E,O),Ft=this._points[this._points.length-1];return this._points.push(_t),this._length+=_t.subtract(Ft).length(),this},e.prototype.addArcTo=function(O,_t,Ft,Pt,Dt){if(void 0===Dt&&(Dt=36),this.closed)return this;var Lt=this._points[this._points.length-1],Ut=new Tn(O,_t),Xt=new Tn(Ft,Pt),Kt=new zt(Lt,Ut,Xt),Zt=Kt.angle.radians()/Dt;Kt.orientation===E.Orientation.CW&&(Zt*=-1);for(var le=Kt.startAngle.radians()+Zt,ve=0;ve<Dt;ve++){var Ce=Math.cos(le)*Kt.radius+Kt.centerPoint.x,Re=Math.sin(le)*Kt.radius+Kt.centerPoint.y;this.addLineTo(Ce,Re),le+=Zt}return this},e.prototype.close=function(){return this.closed=!0,this},e.prototype.length=function(){var E=this._length;if(!this.closed){var O=this._points[this._points.length-1];E+=this._points[0].subtract(O).length()}return E},e.prototype.getPoints=function(){return this._points},e.prototype.getPointAtLengthPosition=function(E){if(E<0||E>1)return Tn.Zero();for(var O=E*this.length(),_t=0,Ft=0;Ft<this._points.length;Ft++){var Pt=(Ft+1)%this._points.length,Dt=this._points[Ft],Lt=this._points[Pt].subtract(Dt),Ut=Lt.length()+_t;if(O>=_t&&O<=Ut){var Xt=Lt.normalize(),Kt=O-_t;return new Tn(Dt.x+Xt.x*Kt,Dt.y+Xt.y*Kt)}_t=Ut}return Tn.Zero()},e}(),Fn=function(){function t(E,O,_t){void 0===O&&(O=null),this.path=E,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var Ft=0;Ft<E.length;Ft++)this._curve[Ft]=E[Ft].clone();this._raw=_t||!1,this._compute(O)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(E,O){void 0===O&&(O=null);for(var _t=0;_t<E.length;_t++)this._curve[_t].x=E[_t].x,this._curve[_t].y=E[_t].y,this._curve[_t].z=E[_t].z;return this._compute(O),this},t.prototype._compute=function(E){var O=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[O-1]=this._curve[O-1].subtract(this._curve[O-2]),this._raw||this._tangents[O-1].normalize();var _t,Ft,Pt,Dt,Lt=this._tangents[0],Ut=this._normalVector(this._curve[0],Lt,E);this._normals[0]=Ut,this._raw||this._normals[0].normalize(),this._binormals[0]=vn.Cross(Lt,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var Xt=1;Xt<O;Xt++)_t=this._getLastNonNullVector(Xt),Xt<O-1&&(Ft=this._getFirstNonNullVector(Xt),this._tangents[Xt]=_t.add(Ft),this._tangents[Xt].normalize()),this._distances[Xt]=this._distances[Xt-1]+_t.length(),Pt=this._tangents[Xt],Dt=this._binormals[Xt-1],this._normals[Xt]=vn.Cross(Dt,Pt),this._raw||this._normals[Xt].normalize(),this._binormals[Xt]=vn.Cross(Pt,this._normals[Xt]),this._raw||this._binormals[Xt].normalize()},t.prototype._getFirstNonNullVector=function(E){for(var O=1,_t=this._curve[E+O].subtract(this._curve[E]);0===_t.length()&&E+O+1<this._curve.length;)O++,_t=this._curve[E+O].subtract(this._curve[E]);return _t},t.prototype._getLastNonNullVector=function(E){for(var O=1,_t=this._curve[E].subtract(this._curve[E-O]);0===_t.length()&&E>O+1;)O++,_t=this._curve[E].subtract(this._curve[E-O]);return _t},t.prototype._normalVector=function(E,O,_t){var Ft,Pt,Dt=O.length();(0===Dt&&(Dt=1),null==_t)?(Pt=hn.WithinEpsilon(Math.abs(O.y)/Dt,1,ln)?hn.WithinEpsilon(Math.abs(O.x)/Dt,1,ln)?hn.WithinEpsilon(Math.abs(O.z)/Dt,1,ln)?vn.Zero():new vn(0,0,1):new vn(1,0,0):new vn(0,-1,0),Ft=vn.Cross(O,Pt)):(Ft=vn.Cross(O,_t),vn.CrossToRef(Ft,O,Ft));return Ft.normalize(),Ft},t}(),kn=function(){function t(E,O){this.width=E,this.height=O}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(E,O,_t){return new t(E.width+(O.width-E.width)*_t,E.height+(O.height-E.height)*_t)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},t.prototype.copyFrom=function(E){this.width=E.width,this.height=E.height},t.prototype.copyFromFloats=function(E,O){return this.width=E,this.height=O,this},t.prototype.set=function(E,O){return this.copyFromFloats(E,O)},t.prototype.multiplyByFloats=function(E,O){return new t(this.width*E,this.height*O)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(E){return!!E&&this.width===E.width&&this.height===E.height},t.prototype.add=function(E){return new t(this.width+E.width,this.height+E.height)},t.prototype.subtract=function(E){return new t(this.width-E.width,this.height-E.height)},t}(),On={looping:!0,speed:1,weight:1,layer:0},Pn=function(E){function e(O,_t){void 0===_t&&(_t=On);var Ft=E.call(this)||this;return Ft.isAnimationClip=!0,Ft.looping=On.looping,Ft.weight=On.weight,Ft.playing=!1,Ft.shouldReset=!1,Ft.speed=On.speed,Ft.name=f("AnimClip"),Ft.layer=On.layer,Ft.clip=O,Ft.setParams(i({},_t)),Ft}return o(e,E),e.prototype.setParams=function(E){return this.looping=void 0!==E.looping?E.looping:this.looping,this.speed=E.speed||this.speed,this.weight=E.weight||this.weight,this.layer=E.layer||this.layer,this},e.prototype.toJSON=function(){var O=JSON.parse(JSON.stringify(E.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),O},e.prototype.play=function(E){var O;void 0===E&&(E=!1),null===(O=this.owner)||void 0===O||O.play(this,E)},e.prototype.pause=function(){var E;null===(E=this.owner)||void 0===E||E.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var E;null===(E=this.owner)||void 0===E||E.stop(this)},r([Se.readonly],e.prototype,"clip",void 0),r([Se.field],e.prototype,"looping",void 0),r([Se.field],e.prototype,"weight",void 0),r([Se.field],e.prototype,"playing",void 0),r([Se.field],e.prototype,"shouldReset",void 0),r([Se.field],e.prototype,"speed",void 0),r([Se.readonly],e.prototype,"name",void 0),e}(Se);E.InputEventType=void 0,(on=E.InputEventType||(E.InputEventType={}))[on.DOWN=0]="DOWN",on[on.UP=1]="UP",E.CameraMode=void 0,(an=E.CameraMode||(E.CameraMode={}))[an.FirstPerson=0]="FirstPerson",an[an.ThirdPerson=1]="ThirdPerson",an[an.BuildingToolGodMode=2]="BuildingToolGodMode",E.LandRole=void 0,(sn=E.LandRole||(E.LandRole={})).OWNER="owner",sn.OPERATOR="operator",E.ActionButton=void 0,(un=E.ActionButton||(E.ActionButton={})).POINTER="POINTER",un.PRIMARY="PRIMARY",un.SECONDARY="SECONDARY",un.ANY="ANY";var Nn,zn,Yt=function(E){if(this.callback=E,!E||!("apply"in E)||!("call"in E))throw new Error("Callback is not a function");Ln.ensureInstance()},Bn=function(E){function e(){return null!==E&&E.apply(this,arguments)||this}return o(e,E),r([M("pointerDown")],e)}(Yt),Dn=function(E){function e(){return null!==E&&E.apply(this,arguments)||this}return o(e,E),r([M("pointerUp")],e)}(Yt),Jt=function(E,O){this.fn=E,this.useRaycast=O},Ln=function(){function e(){var O,_t;this.subscriptions=((O={})[E.ActionButton.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},O[E.ActionButton.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},O[E.ActionButton.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},O[E.ActionButton.ANY]={BUTTON_DOWN:[],BUTTON_UP:[]},O),this.internalState=((_t={})[E.ActionButton.POINTER]={BUTTON_DOWN:!1},_t[E.ActionButton.PRIMARY]={BUTTON_DOWN:!1},_t[E.ActionButton.SECONDARY]={BUTTON_DOWN:!1},_t[E.ActionButton.ANY]={BUTTON_DOWN:!1},_t)}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(E){return this.internalState[E]},e.prototype.subscribe=function(E,O,_t,Ft){var Pt=this;return this.subscriptions[O][E].push(new Jt(Ft,_t)),function(){Pt.unsubscribe(E,O,Ft)}},e.prototype.unsubscribe=function(E,O,_t){var Ft=this.getSubscriptionId(E,O,_t);return Ft>-1&&this.subscriptions[O][E].splice(Ft,1)},e.prototype.handlePointerEvent=function(O){var _t=this.getPointerById(O.buttonId),Ft=i(i({},O),{button:_t,direction:(new vn).copyFrom(O.direction),origin:(new vn).copyFrom(O.origin),hit:void 0}),Pt=O.hit?i(i({},O.hit),{hitPoint:(new vn).copyFrom(O.hit.hitPoint),normal:(new vn).copyFrom(O.hit.normal),worldNormal:(new vn).copyFrom(O.hit.worldNormal)}):void 0;if(O.type===E.InputEventType.DOWN){this.internalState[_t].BUTTON_DOWN=!0;for(var Dt=0;Dt<this.subscriptions[_t].BUTTON_DOWN.length;Dt++)(Lt=this.subscriptions[_t].BUTTON_DOWN[Dt]).useRaycast?Ft.hit=Pt:Ft.hit=void 0,Lt.fn(Ft);Pt&&Pt.entityId&&F.engine&&(Xt=(Ut=F.engine.entities[Pt.entityId])&&Ut.getComponentOrNull(Bn))&&(Ft.hit=Pt,Xt.callback(Ft))}else{for(this.internalState[_t].BUTTON_DOWN=!1,Dt=0;Dt<this.subscriptions[_t].BUTTON_UP.length;Dt++){var Lt;(Lt=this.subscriptions[_t].BUTTON_UP[Dt]).useRaycast?Ft.hit=Pt:Ft.hit=void 0,Lt.fn(Ft)}var Ut,Xt;Pt&&Pt.entityId&&F.engine&&(Xt=(Ut=F.engine.entities[Pt.entityId])&&Ut.getComponentOrNull(Dn))&&(Ft.hit=Pt,Xt.callback(Ft))}},e.prototype.getSubscriptionId=function(E,O,_t){for(var Ft=0;Ft<this.subscriptions[O][E].length;Ft++)if(this.subscriptions[O][E][Ft].fn===_t)return Ft;return-1},e.prototype.getPointerById=function(O){return 0===O?E.ActionButton.POINTER:1===O?E.ActionButton.PRIMARY:E.ActionButton.SECONDARY},e}();E.CLASS_ID=void 0,(Nn=E.CLASS_ID||(E.CLASS_ID={}))[Nn.TRANSFORM=1]="TRANSFORM",Nn[Nn.UUID_CALLBACK=8]="UUID_CALLBACK",Nn[Nn.BOX_SHAPE=16]="BOX_SHAPE",Nn[Nn.SPHERE_SHAPE=17]="SPHERE_SHAPE",Nn[Nn.PLANE_SHAPE=18]="PLANE_SHAPE",Nn[Nn.CONE_SHAPE=19]="CONE_SHAPE",Nn[Nn.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",Nn[Nn.TEXT_SHAPE=21]="TEXT_SHAPE",Nn[Nn.NFT_SHAPE=22]="NFT_SHAPE",Nn[Nn.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",Nn[Nn.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",Nn[Nn.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",Nn[Nn.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",Nn[Nn.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",Nn[Nn.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",Nn[Nn.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",Nn[Nn.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",Nn[Nn.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",Nn[Nn.BILLBOARD=32]="BILLBOARD",Nn[Nn.ANIMATION=33]="ANIMATION",Nn[Nn.FONT=34]="FONT",Nn[Nn.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",Nn[Nn.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",Nn[Nn.GLTF_SHAPE=54]="GLTF_SHAPE",Nn[Nn.OBJ_SHAPE=55]="OBJ_SHAPE",Nn[Nn.AVATAR_SHAPE=56]="AVATAR_SHAPE",Nn[Nn.BASIC_MATERIAL=64]="BASIC_MATERIAL",Nn[Nn.PBR_MATERIAL=65]="PBR_MATERIAL",Nn[Nn.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",Nn[Nn.SOUND=67]="SOUND",Nn[Nn.TEXTURE=68]="TEXTURE",Nn[Nn.VIDEO_CLIP=70]="VIDEO_CLIP",Nn[Nn.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",Nn[Nn.AUDIO_CLIP=200]="AUDIO_CLIP",Nn[Nn.AUDIO_SOURCE=201]="AUDIO_SOURCE",Nn[Nn.AUDIO_STREAM=202]="AUDIO_STREAM",Nn[Nn.GIZMOS=203]="GIZMOS",Nn[Nn.SMART_ITEM=204]="SMART_ITEM",Nn[Nn.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",Nn[Nn.NAME=300]="NAME",Nn[Nn.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",Nn[Nn.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",E.AvatarModifiers=void 0,(zn=E.AvatarModifiers||(E.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",zn.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var Un,qn=function(O){function n(E){var _t=O.call(this)||this;return _t.area=E.area,_t.modifiers=E.modifiers,_t}return o(n,O),r([Se.field],n.prototype,"area",void 0),r([Se.field],n.prototype,"modifiers",void 0),r([M("engine.avatarModifierArea",E.CLASS_ID.AVATAR_MODIFIER_AREA)],n)}(Se),Hn=function(O){function n(E){void 0===E&&(E={});var _t=O.call(this)||this;return _t.position=E.position||vn.Zero(),_t.rotation=E.rotation||bn.Identity,_t.scale=E.scale||new vn(1,1,1),_t}return o(n,O),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(E,O){void 0===O&&(O=wn.staticUp);var _t=new gn;return gn.LookAtLHToRef(this.position,E,O,_t),_t.invert(),bn.FromRotationMatrixToRef(_t,this.rotation),this},n.prototype.rotate=function(E,O){return this.rotation.multiplyInPlace(this.rotation.angleAxis(O,E)),this},n.prototype.translate=function(E){return this.position.addInPlace(E),this},r([Se.field],n.prototype,"position",void 0),r([Se.field],n.prototype,"rotation",void 0),r([Se.field],n.prototype,"scale",void 0),r([M("engine.transform",E.CLASS_ID.TRANSFORM)],n)}(Se),Gn=function(O){function n(E,_t,Ft){void 0===E&&(E=!0),void 0===_t&&(_t=!0),void 0===Ft&&(Ft=!0);var Pt=O.call(this)||this;return Pt.x=!0,Pt.y=!0,Pt.z=!0,Pt.x=E,Pt.y=_t,Pt.z=Ft,Pt}return o(n,O),r([Se.field],n.prototype,"x",void 0),r([Se.field],n.prototype,"y",void 0),r([Se.field],n.prototype,"z",void 0),r([M("engine.billboard",E.CLASS_ID.BILLBOARD)],n)}(Se),jn=function(E){function e(){var O=null!==E&&E.apply(this,arguments)||this;return O.withCollisions=!0,O.isPointerBlocker=!0,O.visible=!0,O}return o(e,E),r([Se.field],e.prototype,"withCollisions",void 0),r([Se.field],e.prototype,"isPointerBlocker",void 0),r([Se.field],e.prototype,"visible",void 0),e}(Se),Wn=function(O){function n(){return null!==O&&O.apply(this,arguments)||this}return o(n,O),r([Se.field],n.prototype,"uvs",void 0),r([F("engine.shape",E.CLASS_ID.BOX_SHAPE)],n)}(jn),Vn=function(O){function n(){return null!==O&&O.apply(this,arguments)||this}return o(n,O),r([F("engine.shape",E.CLASS_ID.SPHERE_SHAPE)],n)}(jn),Qn=function(O){function n(){return null!==O&&O.apply(this,arguments)||this}return o(n,O),r([Se.field],n.prototype,"segments",void 0),r([Se.field],n.prototype,"arc",void 0),r([F("engine.shape",E.CLASS_ID.CIRCLE_SHAPE)],n)}(jn),Xn=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.width=1,E.height=1,E}return o(n,O),r([Se.field],n.prototype,"width",void 0),r([Se.field],n.prototype,"height",void 0),r([Se.field],n.prototype,"uvs",void 0),r([F("engine.shape",E.CLASS_ID.PLANE_SHAPE)],n)}(jn),Yn=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.radiusTop=0,E.radiusBottom=1,E.segmentsHeight=1,E.segmentsRadial=36,E.openEnded=!1,E.radius=null,E.arc=360,E}return o(n,O),r([Se.field],n.prototype,"radiusTop",void 0),r([Se.field],n.prototype,"radiusBottom",void 0),r([Se.field],n.prototype,"segmentsHeight",void 0),r([Se.field],n.prototype,"segmentsRadial",void 0),r([Se.field],n.prototype,"openEnded",void 0),r([Se.field],n.prototype,"radius",void 0),r([Se.field],n.prototype,"arc",void 0),r([F("engine.shape",E.CLASS_ID.CONE_SHAPE)],n)}(jn),Kn=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.radiusTop=1,E.radiusBottom=1,E.segmentsHeight=1,E.segmentsRadial=36,E.openEnded=!1,E.radius=null,E.arc=360,E}return o(n,O),r([Se.field],n.prototype,"radiusTop",void 0),r([Se.field],n.prototype,"radiusBottom",void 0),r([Se.field],n.prototype,"segmentsHeight",void 0),r([Se.field],n.prototype,"segmentsRadial",void 0),r([Se.field],n.prototype,"openEnded",void 0),r([Se.field],n.prototype,"radius",void 0),r([Se.field],n.prototype,"arc",void 0),r([F("engine.shape",E.CLASS_ID.CYLINDER_SHAPE)],n)}(jn),Zn=function(O){function n(E){var _t=O.call(this)||this;return _t.src=E,_t}return o(n,O),r([jn.readonly],n.prototype,"src",void 0),r([F("engine.shape",E.CLASS_ID.GLTF_SHAPE)],n)}(jn);E.PictureFrameStyle=void 0,(Un=E.PictureFrameStyle||(E.PictureFrameStyle={}))[Un.Classic=0]="Classic",Un[Un.Baroque_Ornament=1]="Baroque_Ornament",Un[Un.Diamond_Ornament=2]="Diamond_Ornament",Un[Un.Minimal_Wide=3]="Minimal_Wide",Un[Un.Minimal_Grey=4]="Minimal_Grey",Un[Un.Blocky=5]="Blocky",Un[Un.Gold_Edges=6]="Gold_Edges",Un[Un.Gold_Carved=7]="Gold_Carved",Un[Un.Gold_Wide=8]="Gold_Wide",Un[Un.Gold_Rounded=9]="Gold_Rounded",Un[Un.Metal_Medium=10]="Metal_Medium",Un[Un.Metal_Wide=11]="Metal_Wide",Un[Un.Metal_Slim=12]="Metal_Slim",Un[Un.Metal_Rounded=13]="Metal_Rounded",Un[Un.Pins=14]="Pins",Un[Un.Minimal_Black=15]="Minimal_Black",Un[Un.Minimal_White=16]="Minimal_White",Un[Un.Tape=17]="Tape",Un[Un.Wood_Slim=18]="Wood_Slim",Un[Un.Wood_Wide=19]="Wood_Wide",Un[Un.Wood_Twigs=20]="Wood_Twigs",Un[Un.Canvas=21]="Canvas",Un[Un.None=22]="None";var $n,Jn=function(O){function n(_t,Ft){void 0===Ft&&(Ft={});var Pt=O.call(this)||this;Pt.src=_t;var Dt=new En(.6404918,.611472,.8584906),Lt=E.PictureFrameStyle.Classic;return"r"in Ft?Dt=Ft:null!=Ft&&(Ft.color&&(Dt=Ft.color),Ft.style&&(Lt=Ft.style)),Pt.color=Dt,Pt.style=Lt,Pt}return o(n,O),r([jn.readonly],n.prototype,"src",void 0),r([jn.readonly],n.prototype,"style",void 0),r([Se.field],n.prototype,"color",void 0),r([F("engine.shape",E.CLASS_ID.NFT_SHAPE)],n)}(jn),ti=function(O){function n(E,_t){var Ft=O.call(this)||this;if(Ft.src=E,_t)for(var Pt in _t)Ft[Pt]=_t[Pt];return Ft}return o(n,O),r([Se.readonly],n.prototype,"src",void 0),r([Se.readonly],n.prototype,"samplingMode",void 0),r([Se.readonly],n.prototype,"wrap",void 0),r([Se.readonly],n.prototype,"hasAlpha",void 0),r([F("engine.texture",E.CLASS_ID.TEXTURE)],n)}(Se),ei=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.states=[],E}return o(n,O),n.prototype.addClip=function(E){var O=this;return this.states.push(E),E.onChange((function(){O.dirty=!0})),E.owner=this,this},n.prototype.getClip=function(E){for(var O=0;O<this.states.length;O++){var _t=this.states[O];if(_t.clip===E)return _t}var Ft=new Pn(E);return this.addClip(Ft),Ft},n.prototype.stop=function(E){if(E)E.playing=!1,E.shouldReset=!0;else for(var O=0;O<this.states.length;O++){var _t=this.states[O];this.stop(_t)}},n.prototype.play=function(E,O){void 0===O&&(O=!1);for(var _t=0;_t<this.states.length;_t++){var Ft=this.states[_t];Ft.layer===E.layer&&E!==Ft&&this.pause(Ft)}O&&(E.shouldReset=!0),E.playing=!0,E.dirty=!0,E.data.nonce=Math.random()},n.prototype.pause=function(E){if(E)E.playing=!1;else for(var O=0;O<this.states.length;O++){var _t=this.states[O];this.pause(_t)}},r([Se.readonly],n.prototype,"states",void 0),r([M("engine.animator",E.CLASS_ID.ANIMATION)],n)}(jn),ni=function(O){function n(E){var _t=O.call(this)||this;return _t.src=E,_t}return o(n,O),r([Se.readonly],n.prototype,"src",void 0),r([F("engine.shape",E.CLASS_ID.OBJ_SHAPE)],n)}(jn),ii=function(O){function n(E){void 0===E&&(E="");var _t=O.call(this)||this;return _t.src=E,_t}return o(n,O),r([Se.readonly],n.prototype,"src",void 0),r([F("engine.font",E.CLASS_ID.FONT)],n)}(Se);E.Fonts=void 0,($n=E.Fonts||(E.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",$n.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",$n.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",$n.LiberationSans="builtin:LiberationSans SDF",$n.SansSerif="SansSerif",$n.SansSerif_Heavy="SansSerif_Heavy",$n.SansSerif_Bold="SansSerif_Bold",$n.SansSerif_SemiBold="SansSerif_SemiBold";var ri,oi=function(O){function n(E){var _t=O.call(this)||this;return _t.outlineWidth=0,_t.outlineColor=new En(1,1,1),_t.color=new En(1,1,1),_t.fontSize=10,_t.fontWeight="normal",_t.opacity=1,_t.value="",_t.lineSpacing="0px",_t.lineCount=0,_t.resizeToFit=!1,_t.textWrapping=!1,_t.shadowBlur=0,_t.shadowOffsetX=0,_t.shadowOffsetY=0,_t.shadowColor=new En(1,1,1),_t.zIndex=0,_t.hTextAlign="center",_t.vTextAlign="center",_t.width=1,_t.height=1,_t.paddingTop=0,_t.paddingRight=0,_t.paddingBottom=0,_t.paddingLeft=0,_t.isPickable=!1,_t.billboard=!1,_t.visible=!0,E&&(_t.value=E),_t}return o(n,O),r([Se.field],n.prototype,"outlineWidth",void 0),r([Se.field],n.prototype,"outlineColor",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"fontSize",void 0),r([Se.field],n.prototype,"fontWeight",void 0),r([Se.component],n.prototype,"font",void 0),r([Se.field],n.prototype,"opacity",void 0),r([Se.field],n.prototype,"value",void 0),r([Se.field],n.prototype,"lineSpacing",void 0),r([Se.field],n.prototype,"lineCount",void 0),r([Se.field],n.prototype,"resizeToFit",void 0),r([Se.field],n.prototype,"textWrapping",void 0),r([Se.field],n.prototype,"shadowBlur",void 0),r([Se.field],n.prototype,"shadowOffsetX",void 0),r([Se.field],n.prototype,"shadowOffsetY",void 0),r([Se.field],n.prototype,"shadowColor",void 0),r([Se.field],n.prototype,"zIndex",void 0),r([Se.field],n.prototype,"hTextAlign",void 0),r([Se.field],n.prototype,"vTextAlign",void 0),r([Se.field],n.prototype,"width",void 0),r([Se.field],n.prototype,"height",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([Se.field],n.prototype,"isPickable",void 0),r([Se.field],n.prototype,"billboard",void 0),r([Se.field],n.prototype,"visible",void 0),r([M("engine.text",E.CLASS_ID.TEXT_SHAPE)],n)}(Se);E.TransparencyMode=void 0,(ri=E.TransparencyMode||(E.TransparencyMode={}))[ri.OPAQUE=0]="OPAQUE",ri[ri.ALPHA_TEST=1]="ALPHA_TEST",ri[ri.ALPHA_BLEND=2]="ALPHA_BLEND",ri[ri.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",ri[ri.AUTO=4]="AUTO";var ai,si=function(O){function n(){var _t=null!==O&&O.apply(this,arguments)||this;return _t.alphaTest=.5,_t.castShadows=!0,_t.transparencyMode=E.TransparencyMode.AUTO,_t}return o(n,O),r([Se.field],n.prototype,"alphaTest",void 0),r([Se.field],n.prototype,"albedoColor",void 0),r([Se.field],n.prototype,"emissiveColor",void 0),r([Se.field],n.prototype,"metallic",void 0),r([Se.field],n.prototype,"roughness",void 0),r([Se.field],n.prototype,"ambientColor",void 0),r([Se.field],n.prototype,"reflectionColor",void 0),r([Se.field],n.prototype,"reflectivityColor",void 0),r([Se.field],n.prototype,"directIntensity",void 0),r([Se.field],n.prototype,"microSurface",void 0),r([Se.field],n.prototype,"emissiveIntensity",void 0),r([Se.field],n.prototype,"environmentIntensity",void 0),r([Se.field],n.prototype,"specularIntensity",void 0),r([Se.component],n.prototype,"albedoTexture",void 0),r([Se.component],n.prototype,"alphaTexture",void 0),r([Se.component],n.prototype,"emissiveTexture",void 0),r([Se.component],n.prototype,"bumpTexture",void 0),r([Se.component],n.prototype,"refractionTexture",void 0),r([Se.field],n.prototype,"castShadows",void 0),r([Se.field],n.prototype,"transparencyMode",void 0),r([F("engine.material",E.CLASS_ID.PBR_MATERIAL)],n)}(Se),ui=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.alphaTest=.5,E.castShadows=!0,E}return o(n,O),r([Se.component],n.prototype,"texture",void 0),r([Se.field],n.prototype,"alphaTest",void 0),r([Se.field],n.prototype,"castShadows",void 0),r([F("engine.material",E.CLASS_ID.BASIC_MATERIAL)],n)}(Se),ci=function(E){function e(O){var _t=E.call(this)||this;if(_t.uuid=f("UUID"),!O||!("apply"in O)||!("call"in O))throw new Error("Callback is not a function");return _t.callback=O,_t}return o(e,E),e.uuidEvent=function(E,O){if(delete E[O]){var _t=O+"_"+Math.random();E[_t]=void 0,Object.defineProperty(E,_t,i(i({},Object.getOwnPropertyDescriptor(E,_t)),{enumerable:!1})),Object.defineProperty(E,O.toString(),{get:function(){return this[_t]},set:function(E){var Ft=this[_t];if(E){if(!(E instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[O]=E.uuid}else this.data[O]=null;if(this[_t]=E,E!==Ft){this.dirty=!0;for(var Pt=0;Pt<this.subscriptions.length;Pt++)this.subscriptions[Pt](O,E,Ft)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([Se.field],e.prototype,"callback",void 0),e}(Se),pi=function(O){function n(){var _t=null!==O&&O.apply(this,arguments)||this;return _t.button=E.ActionButton.ANY,_t.hoverText="Interact",_t.distance=10,_t.showFeedback=!0,_t}return o(n,O),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([Se.field],n.prototype,"button",void 0),r([Se.field],n.prototype,"hoverText",void 0),r([Se.field],n.prototype,"distance",void 0),r([Se.field],n.prototype,"showFeedback",void 0),n}(ci),li=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.type="onPointerLock",E}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onPointerLock",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),di=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.type="onAnimationEnd",E}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onAnimationEnd",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),yi=function(O){function n(){return null!==O&&O.apply(this,arguments)||this}return o(n,O),r([M("engine.smartItem",E.CLASS_ID.SMART_ITEM)],n)}(Se),fi=function(O){function n(E){var _t=O.call(this)||this;return _t.url=E,_t}return o(n,O),r([Se.readonly],n.prototype,"url",void 0),r([F("engine.VideoClip",E.CLASS_ID.VIDEO_CLIP)],n)}(Se);E.VideoStatus=void 0,(ai=E.VideoStatus||(E.VideoStatus={}))[ai.NONE=0]="NONE",ai[ai.ERROR=1]="ERROR",ai[ai.LOADING=2]="LOADING",ai[ai.READY=3]="READY",ai[ai.PLAYING=4]="PLAYING",ai[ai.BUFFERING=5]="BUFFERING";var hi,mi=function(O){function n(_t,Ft){var Pt=O.call(this)||this;if(Pt.volume=1,Pt.playbackRate=1,Pt.loop=!1,Pt.seek=-1,Pt._position=-1,Pt._videoLength=-1,Pt._status=E.VideoStatus.NONE,Pt.playing=!1,!(_t instanceof fi))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(Pt.videoClipId=D(_t),Ft)for(var Dt in Ft)Pt[Dt]=Ft[Dt];return Pt}return o(n,O),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(E){this.seek=E,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var E=JSON.parse(JSON.stringify(O.prototype.toJSON.call(this)));return this.seek=-1,E}return O.prototype.toJSON.call(this)},n.prototype.update=function(O){O.videoClipId==this.videoClipId&&(this._status=O.videoStatus||E.VideoStatus.NONE,this._videoLength=O.totalVideoLength,this._position=O.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([Se.readonly],n.prototype,"videoClipId",void 0),r([Se.readonly],n.prototype,"samplingMode",void 0),r([Se.readonly],n.prototype,"wrap",void 0),r([Se.field],n.prototype,"volume",void 0),r([Se.field],n.prototype,"playbackRate",void 0),r([Se.field],n.prototype,"loop",void 0),r([Se.field],n.prototype,"seek",void 0),r([Se.field],n.prototype,"playing",void 0),r([F("engine.VideoTexture",E.CLASS_ID.VIDEO_TEXTURE)],n)}(Se),gi=function(){function e(){var O=this;this.position=new vn,this.rotation=new bn,this.feetPosition=new vn,this.worldPosition=new vn,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=E.CameraMode.FirstPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(E){switch(E.type){case"positionChanged":O.positionChanged(E.data);break;case"rotationChanged":O.rotationChanged(E.data);break;case"cameraModeChanged":O.cameraModeChanged(E.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return O.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return O.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return O.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return O.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return O.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return O.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return O.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return O.lastEventPosition.y-O.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return O.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return O.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return O.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return O.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return O.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(E){this.lastEventPosition=E.position,this.lastEventWorldPosition=E.cameraPosition,this._playerHeight=E.playerHeight},e.prototype.rotationChanged=function(E){this.lastEventRotation=E.quaternion},e.prototype.cameraModeChanged=function(E){this._cameraMode=E.cameraMode},e}();!function(E){E.HitFirst="rqhf",E.HitAll="rqha"}(hi||(hi={}));var bi,vi=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(E){var O=gi.instance.rotation,_t=gn.Identity();O.toRotationMatrix(_t);var Ft=vn.TransformCoordinates(vn.Forward(),_t);return{origin:gi.instance.position,direction:Ft,distance:E}},t.prototype.getRayFromPositions=function(E,O){var _t=O.subtract(E),Ft=_t.length();return{origin:E,direction:_t.normalize(),distance:Ft}},t.prototype.hitFirst=function(E,O,_t){var Ft="number"==typeof _t?hi.HitFirst+_t:y();this.queries[Ft]=O,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Ft,queryType:"HitFirst",ray:E})},t.prototype.hitAll=function(E,O,_t){var Ft="number"==typeof _t?hi.HitAll+_t:y();this.queries[Ft]=O,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:Ft,queryType:"HitAll",ray:E})},t.prototype.hitFirstAvatar=function(E,O){d("not implemented yet")},t.prototype.hitAllAvatars=function(E,O){d("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(E){this.queries[E.payload.queryId](E.payload.payload),delete this.queries[E.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(E){this.queries[E.payload.queryId](E.payload.payload),delete this.queries[E.payload.queryId]},t}(),wi=function(){function t(){}return t.prototype.activate=function(E){E.eventManager.addListener(Ge,this,(function(E){"HitFirst"===E.payload.queryType?vi.instance.handleRaycastHitFirstResponse(E):"HitAll"===E.payload.queryType&&vi.instance.handleRaycastHitAllResponse(E)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),_i=function(){function t(){}return t.prototype.activate=function(E){E.eventManager.addListener(je,this,(function(E){Ln.instance.handlePointerEvent(E.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}(),Ti=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(E){E.eventManager.addListener(He,this,this.handleEvent),E.eventManager.addListener(Ut,this,this.componentAdded),E.eventManager.addListener(Lt,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(E){for(var O in E.components){var _t=E.components[O];_t instanceof ci&&(this.handlerMap[_t.uuid]=_t)}},t.prototype.onRemoveEntity=function(E){for(var O in E.components){var _t=E.components[O];_t instanceof ci&&delete this.handlerMap[_t.uuid]}},t.prototype.componentAdded=function(E){if(E.entity.isAddedToEngine()){var O=E.entity.components[E.componentName];O instanceof ci&&(this.handlerMap[O.uuid]=O)}},t.prototype.componentRemoved=function(E){E.entity.isAddedToEngine()&&E.component instanceof ci&&delete this.handlerMap[E.component.uuid]},t.prototype.handleEvent=function(E){if(E.uuid in this.handlerMap){var O=this.handlerMap[E.uuid];O&&O.callback&&"call"in O.callback&&O.callback(E.payload)}},t}(),xi=new wi,Ai=new _i,Ci=new Ti,Ei=function(O){function n(E){var _t=O.call(this)||this;return _t.loop=!1,_t.volume=1,_t.url=E,_t}return o(n,O),r([Se.readonly],n.prototype,"url",void 0),r([Se.field],n.prototype,"loop",void 0),r([Se.field],n.prototype,"loadingCompleteEventId",void 0),r([Se.field],n.prototype,"volume",void 0),r([F("engine.AudioClip",E.CLASS_ID.AUDIO_CLIP)],n)}(Se),Ri=function(O){function n(E){var _t=O.call(this)||this;if(_t.audioClip=E,_t.loop=!1,_t.volume=1,_t.playing=!1,_t.pitch=1,_t.playedAtTimestamp=Date.now(),!(E instanceof Ei))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return _t.audioClipId=D(E),_t}return o(n,O),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([Se.readonly],n.prototype,"audioClipId",void 0),r([Se.field],n.prototype,"loop",void 0),r([Se.field],n.prototype,"volume",void 0),r([Se.field],n.prototype,"playing",void 0),r([Se.field],n.prototype,"pitch",void 0),r([Se.field],n.prototype,"playedAtTimestamp",void 0),r([M("engine.AudioSource",E.CLASS_ID.AUDIO_SOURCE)],n)}(Se),Mi=function(O){function n(E){var _t=O.call(this)||this;return _t.playing=!1,_t.volume=1,_t.url=E,_t.playing=!0,_t}return o(n,O),r([Se.readonly],n.prototype,"url",void 0),r([Se.field],n.prototype,"playing",void 0),r([Se.field],n.prototype,"volume",void 0),r([M("engine.AudioStream",E.CLASS_ID.AUDIO_STREAM)],n)}(Se);E.Gizmo=void 0,(bi=E.Gizmo||(E.Gizmo={})).MOVE="MOVE",bi.ROTATE="ROTATE",bi.SCALE="SCALE",bi.NONE="NONE";var Si,Ii=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.type="gizmoEvent",E}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.gizmoEvent",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Fi=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.position=!0,E.rotation=!0,E.scale=!0,E.cycle=!0,E.localReference=!1,E}return o(n,O),r([Se.field],n.prototype,"position",void 0),r([Se.field],n.prototype,"rotation",void 0),r([Se.field],n.prototype,"scale",void 0),r([Se.field],n.prototype,"cycle",void 0),r([Se.field],n.prototype,"selectedGizmo",void 0),r([Se.field],n.prototype,"localReference",void 0),r([M("engine.gizmos",E.CLASS_ID.GIZMOS)],n)}(Se),ki=function(E){function e(O){var _t=E.call(this)||this;return _t.name=null,_t.visible=!0,_t.opacity=1,_t.hAlign="center",_t.vAlign="center",_t.width="100px",_t.height="50px",_t.positionX="0px",_t.positionY="0px",_t.isPointerBlocker=!0,O&&(_t._parent=O,_t.data.parentComponent=D(O)),_t}return o(e,E),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([Se.field],e.prototype,"name",void 0),r([Se.field],e.prototype,"visible",void 0),r([Se.field],e.prototype,"opacity",void 0),r([Se.field],e.prototype,"hAlign",void 0),r([Se.field],e.prototype,"vAlign",void 0),r([Se.uiValue],e.prototype,"width",void 0),r([Se.uiValue],e.prototype,"height",void 0),r([Se.uiValue],e.prototype,"positionX",void 0),r([Se.uiValue],e.prototype,"positionY",void 0),r([Se.field],e.prototype,"isPointerBlocker",void 0),e}(Se),Oi=function(O){function n(){return O.call(this,null)||this}return o(n,O),r([F("engine.shape",E.CLASS_ID.UI_FULLSCREEN_SHAPE)],n)}(ki),Pi=function(O){function n(){return O.call(this,null)||this}return o(n,O),r([F("engine.shape",E.CLASS_ID.UI_WORLD_SPACE_SHAPE)],n)}(ki),Ni=function(O){function n(){return O.call(this,null)||this}return o(n,O),r([F("engine.shape",E.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],n)}(ki),zi=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.adaptWidth=!1,E.adaptHeight=!1,E.thickness=0,E.color=Cn.Clear(),E.alignmentUsesSize=!0,E}return o(n,O),r([Se.field],n.prototype,"adaptWidth",void 0),r([Se.field],n.prototype,"adaptHeight",void 0),r([Se.field],n.prototype,"thickness",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"alignmentUsesSize",void 0),r([F("engine.shape",E.CLASS_ID.UI_CONTAINER_RECT)],n)}(ki);E.UIStackOrientation=void 0,(Si=E.UIStackOrientation||(E.UIStackOrientation={}))[Si.VERTICAL=0]="VERTICAL",Si[Si.HORIZONTAL=1]="HORIZONTAL";var Bi=function(O){function n(){var _t=null!==O&&O.apply(this,arguments)||this;return _t.adaptWidth=!0,_t.adaptHeight=!0,_t.color=Cn.Clear(),_t.stackOrientation=E.UIStackOrientation.VERTICAL,_t.spacing=0,_t}return o(n,O),r([Se.field],n.prototype,"adaptWidth",void 0),r([Se.field],n.prototype,"adaptHeight",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"stackOrientation",void 0),r([Se.field],n.prototype,"spacing",void 0),r([F("engine.shape",E.CLASS_ID.UI_CONTAINER_STACK)],n)}(ki),Di=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.fontSize=10,E.fontWeight="normal",E.thickness=0,E.cornerRadius=0,E.color=Cn.White(),E.background=Cn.White(),E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=Cn.Black(),E.text="button",E}return o(n,O),r([Se.field],n.prototype,"fontSize",void 0),r([Se.field],n.prototype,"fontWeight",void 0),r([Se.field],n.prototype,"thickness",void 0),r([Se.field],n.prototype,"cornerRadius",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"background",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([Se.field],n.prototype,"shadowBlur",void 0),r([Se.field],n.prototype,"shadowOffsetX",void 0),r([Se.field],n.prototype,"shadowOffsetY",void 0),r([Se.field],n.prototype,"shadowColor",void 0),r([Se.field],n.prototype,"text",void 0),r([F("engine.shape",E.CLASS_ID.UI_BUTTON_SHAPE)],n)}(ki),Li=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.outlineWidth=0,E.outlineColor=Cn.White(),E.color=Cn.White(),E.fontSize=10,E.fontAutoSize=!1,E.fontWeight="normal",E.value="",E.lineSpacing=0,E.lineCount=0,E.adaptWidth=!1,E.adaptHeight=!1,E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=Cn.Black(),E.hTextAlign="left",E.vTextAlign="bottom",E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E}return o(n,O),r([Se.field],n.prototype,"outlineWidth",void 0),r([Se.field],n.prototype,"outlineColor",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"fontSize",void 0),r([Se.field],n.prototype,"fontAutoSize",void 0),r([Se.field],n.prototype,"fontWeight",void 0),r([Se.component],n.prototype,"font",void 0),r([Se.field],n.prototype,"value",void 0),r([Se.field],n.prototype,"lineSpacing",void 0),r([Se.field],n.prototype,"lineCount",void 0),r([Se.field],n.prototype,"adaptWidth",void 0),r([Se.field],n.prototype,"adaptHeight",void 0),r([Se.field],n.prototype,"textWrapping",void 0),r([Se.field],n.prototype,"shadowBlur",void 0),r([Se.field],n.prototype,"shadowOffsetX",void 0),r([Se.field],n.prototype,"shadowOffsetY",void 0),r([Se.field],n.prototype,"shadowColor",void 0),r([Se.field],n.prototype,"hTextAlign",void 0),r([Se.field],n.prototype,"vTextAlign",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([F("engine.shape",E.CLASS_ID.UI_TEXT_SHAPE)],n)}(ki),Ui=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.outlineWidth=0,E.outlineColor=Cn.Black(),E.color=Cn.Clear(),E.thickness=1,E.fontSize=10,E.fontWeight="normal",E.value="",E.placeholderColor=Cn.White(),E.placeholder="",E.margin=10,E.maxWidth=100,E.hTextAlign="left",E.vTextAlign="bottom",E.autoStretchWidth=!0,E.background=Cn.Black(),E.focusedBackground=Cn.Black(),E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=Cn.White(),E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.onTextSubmit=null,E.onChanged=null,E.onFocus=null,E.onBlur=null,E}return o(n,O),r([Se.field],n.prototype,"outlineWidth",void 0),r([Se.field],n.prototype,"outlineColor",void 0),r([Se.field],n.prototype,"color",void 0),r([Se.field],n.prototype,"thickness",void 0),r([Se.field],n.prototype,"fontSize",void 0),r([Se.field],n.prototype,"fontWeight",void 0),r([Se.component],n.prototype,"font",void 0),r([Se.field],n.prototype,"value",void 0),r([Se.field],n.prototype,"placeholderColor",void 0),r([Se.field],n.prototype,"placeholder",void 0),r([Se.field],n.prototype,"margin",void 0),r([Se.field],n.prototype,"maxWidth",void 0),r([Se.field],n.prototype,"hTextAlign",void 0),r([Se.field],n.prototype,"vTextAlign",void 0),r([Se.field],n.prototype,"autoStretchWidth",void 0),r([Se.field],n.prototype,"background",void 0),r([Se.field],n.prototype,"focusedBackground",void 0),r([Se.field],n.prototype,"textWrapping",void 0),r([Se.field],n.prototype,"shadowBlur",void 0),r([Se.field],n.prototype,"shadowOffsetX",void 0),r([Se.field],n.prototype,"shadowOffsetY",void 0),r([Se.field],n.prototype,"shadowColor",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([ci.uuidEvent],n.prototype,"onTextSubmit",void 0),r([ci.uuidEvent],n.prototype,"onChanged",void 0),r([ci.uuidEvent],n.prototype,"onFocus",void 0),r([ci.uuidEvent],n.prototype,"onBlur",void 0),r([F("engine.shape",E.CLASS_ID.UI_INPUT_TEXT_SHAPE)],n)}(ki),qi=function(O){function n(E,_t){var Ft=O.call(this,E)||this;return Ft.sourceLeft=0,Ft.sourceTop=0,Ft.sourceWidth=1,Ft.sourceHeight=1,Ft.paddingTop=0,Ft.paddingRight=0,Ft.paddingBottom=0,Ft.paddingLeft=0,Ft.sizeInPixels=!0,Ft.onClick=null,Ft.source=_t,Ft}return o(n,O),r([Se.field],n.prototype,"sourceLeft",void 0),r([Se.field],n.prototype,"sourceTop",void 0),r([Se.field],n.prototype,"sourceWidth",void 0),r([Se.field],n.prototype,"sourceHeight",void 0),r([Se.component],n.prototype,"source",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([Se.field],n.prototype,"sizeInPixels",void 0),r([ci.uuidEvent],n.prototype,"onClick",void 0),r([F("engine.shape",E.CLASS_ID.UI_IMAGE_SHAPE)],n)}(ki),Hi=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.valueX=0,E.valueY=0,E.borderColor=Cn.White(),E.backgroundColor=Cn.Clear(),E.isHorizontal=!1,E.isVertical=!1,E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.onChanged=null,E}return o(n,O),r([Se.field],n.prototype,"valueX",void 0),r([Se.field],n.prototype,"valueY",void 0),r([Se.field],n.prototype,"borderColor",void 0),r([Se.field],n.prototype,"backgroundColor",void 0),r([Se.field],n.prototype,"isHorizontal",void 0),r([Se.field],n.prototype,"isVertical",void 0),r([Se.field],n.prototype,"paddingTop",void 0),r([Se.field],n.prototype,"paddingRight",void 0),r([Se.field],n.prototype,"paddingBottom",void 0),r([Se.field],n.prototype,"paddingLeft",void 0),r([ci.uuidEvent],n.prototype,"onChanged",void 0),r([F("engine.shape",E.CLASS_ID.UI_SLIDER_SHAPE)],n)}(ki),Gi=function(O){function n(){var E=null!==O&&O.apply(this,arguments)||this;return E.useDummyModel=!1,E.talking=!1,E}var _t;return o(n,O),_t=n,n.Dummy=function(){var E=new _t;return E.useDummyModel=!0,E},r([Se.field],n.prototype,"id",void 0),r([Se.field],n.prototype,"name",void 0),r([Se.field],n.prototype,"expressionTriggerId",void 0),r([Se.field],n.prototype,"expressionTriggerTimestamp",void 0),r([Se.field],n.prototype,"bodyShape",void 0),r([Se.field],n.prototype,"wearables",void 0),r([Se.field],n.prototype,"skinColor",void 0),r([Se.field],n.prototype,"hairColor",void 0),r([Se.field],n.prototype,"eyeColor",void 0),r([Se.field],n.prototype,"useDummyModel",void 0),r([Se.field],n.prototype,"talking",void 0),_t=r([M("engine.avatarShape",E.CLASS_ID.AVATAR_SHAPE)],n)}(Se),ji=function(O){function n(E){var _t=O.call(this,E)||this;return _t.type="onFocus",Ci.handlerMap[_t.uuid]=_t,_t}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onFocus",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Wi=function(O){function n(E){var _t=O.call(this,E)||this;return _t.type="onTextSubmit",Ci.handlerMap[_t.uuid]=_t,_t}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onTextSubmit",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Vi=function(O){function n(E){var _t=O.call(this,E)||this;return _t.type="onBlur",Ci.handlerMap[_t.uuid]=_t,_t}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onBlur",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Qi=function(O){function n(E){var _t=O.call(this,E)||this;return _t.type="onEnter",Ci.handlerMap[_t.uuid]=_t,_t}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onEnter",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Xi=function(O){function n(E){var _t=O.call(this,E)||this;return _t.type="onChange",Ci.handlerMap[_t.uuid]=_t,_t}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onChange",E.CLASS_ID.UUID_CALLBACK)],n)}(ci),Yi=function(O){function n(E,_t){var Ft=O.call(this,E)||this;return Ft.type="onClick",Ci.handlerMap[Ft.uuid]=Ft,_t&&(Ft.showFeedback=!(!1===_t.showFeedback),_t.button&&(Ft.button=_t.button),_t.hoverText&&(Ft.hoverText=_t.hoverText),_t.distance&&(Ft.distance=_t.distance)),Ft}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.onClick",E.CLASS_ID.UUID_CALLBACK)],n)}(pi),Ki=function(O){function n(E,_t){var Ft=O.call(this,E)||this;return Ft.type="pointerDown",Ci.handlerMap[Ft.uuid]=Ft,_t&&(Ft.showFeedback=!(!1===_t.showFeedback),_t.button&&(Ft.button=_t.button),_t.hoverText&&(Ft.hoverText=_t.hoverText),_t.distance&&(Ft.distance=_t.distance)),Ft}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.pointerDown",E.CLASS_ID.UUID_CALLBACK)],n)}(pi),Zi=function(O){function n(E,_t){var Ft=O.call(this,E)||this;return Ft.type="pointerUp",Ci.handlerMap[Ft.uuid]=Ft,_t&&(Ft.showFeedback=!(!1===_t.showFeedback),_t.button&&(Ft.button=_t.button),_t.hoverText&&(Ft.hoverText=_t.hoverText),_t.distance&&(Ft.distance=_t.distance)),Ft}return o(n,O),r([Se.readonly],n.prototype,"type",void 0),r([M("engine.pointerUp",E.CLASS_ID.UUID_CALLBACK)],n)}(pi),$i=null,Ji=null,tr=null;function fn(){return tr||(tr=new qe),tr}var er=function(){function t(){var E=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Ji){(Ji=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(E){$i=E}));var E=fn();dcl.subscribe("comms"),dcl.onEvent((function(O){"comms"===O.type&&E.notifyObservers(O.data)}))}return Ji}().then((function(O){E.connected=!0,E.flush()}))}return t.prototype.on=function(E,O){return fn().add((function(_t){try{var Ft=JSON.parse(_t.message);Ft.message===E&&O(Ft.payload,_t.sender)}catch(_t){dcl.error("Error parsing comms message "+(_t.message||""),_t)}}))},t.prototype.sendRaw=function(E){this.messageQueue.push(E),this.connected&&this.flush()},t.prototype.emit=function(E,O){var _t=JSON.stringify({message:E,payload:O});this.sendRaw(_t),fn().notifyObservers({message:_t,sender:"self"})},t.prototype.flush=function(){var E=this;if(0!==this.messageQueue.length&&this.connected&&$i&&!this.flushing){var O=this.messageQueue.shift();this.flushing=!0,dcl.callRpc($i.rpcHandle,"send",[O]).then((function(O){E.flushing=!1,E.flush()}),(function(O){E.flushing=!1,l("Error flushing MessageBus",O)}))}},t}(),nr=new Fe("scene");nr.uuid="0";var ir=new Pe(nr);F.engine=ir,"undefined"!=typeof dcl&&(ir.addSystem(new rn(dcl),1/0),ct(dcl)),ir.addSystem(Ci),ir.addSystem(Ai),ir.addSystem(xi),E.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",E.Angle=_n,E.AnimationState=Pn,E.Animator=ei,E.Arc2=zt,E.Attachable=O,E.AudioClip=Ei,E.AudioSource=Ri,E.AudioStream=Mi,E.AvatarModifierArea=qn,E.AvatarShape=Gi,E.Axis=xn,E.BasicMaterial=ui,E.BezierCurve=An,E.Billboard=Gn,E.BoxShape=Wn,E.Camera=gi,E.CircleShape=Qn,E.Color3=En,E.Color4=Cn,E.Component=M,E.ComponentAdded=Ut,E.ComponentGroup=Ie,E.ComponentRemoved=Lt,E.ConeShape=Yn,E.Curve3=Rn,E.CylinderShape=Kn,E.DEG2RAD=dn,E.DisposableComponent=F,E.DisposableComponentCreated=Ce,E.DisposableComponentRemoved=Re,E.DisposableComponentUpdated=Me,E.Engine=Pe,E.Entity=Fe,E.Epsilon=ln,E.EventConstructor=w,E.EventManager=Pt,E.Font=ii,E.Frustum=Sn,E.GLTFShape=Zn,E.Gizmos=Fi,E.GlobalPointerDown=Bn,E.GlobalPointerUp=Dn,E.Input=Ln,E.Material=si,E.MathTmp=wn,E.Matrix=gn,E.MessageBus=er,E.MultiObserver=Ue,E.NFTShape=Jn,E.OBJShape=ni,E.Observable=qe,E.ObservableComponent=Se,E.Observer=Y,E.ObserverEventState=Le,E.OnAnimationEnd=di,E.OnBlur=Vi,E.OnChanged=Xi,E.OnClick=Yi,E.OnEnter=Qi,E.OnFocus=ji,E.OnGizmoEvent=Ii,E.OnPointerDown=Ki,E.OnPointerLock=li,E.OnPointerUUIDEvent=pi,E.OnPointerUp=Zi,E.OnTextSubmit=Wi,E.OnUUIDEvent=ci,E.ParentChanged=Xt,E.Path2=In,E.Path3D=Fn,E.PhysicsCast=vi,E.Plane=Mn,E.PlaneShape=Xn,E.PointerEvent=je,E.PointerEventComponent=Yt,E.PointerEventSystem=_i,E.Quaternion=bn,E.RAD2DEG=yn,E.RaycastEventSystem=wi,E.RaycastResponse=Ge,E.Scalar=hn,E.Shape=jn,E.Size=kn,E.SmartItem=yi,E.SphereShape=Vn,E.Subscription=Jt,E.TextShape=oi,E.Texture=ti,E.ToGammaSpace=cn,E.ToLinearSpace=pn,E.Transform=Hn,E.UIButton=Di,E.UICanvas=Ni,E.UIContainerRect=zi,E.UIContainerStack=Bi,E.UIFullScreen=Oi,E.UIImage=qi,E.UIInputText=Ui,E.UIScrollRect=Hi,E.UIShape=ki,E.UIText=Li,E.UIValue=Kt,E.UIWorldSpace=Pi,E.UUIDEvent=He,E.UUIDEventSystem=Ti,E.Vector2=Tn,E.Vector3=vn,E.Vector4=mn,E.VideoClip=fi,E.VideoTexture=mi,E._initEventObservables=ct,E.buildArray=v,E.engine=ir,E.error=l,E.executeTask=q,E.getComponentClassId=N,E.getComponentId=D,E.getComponentName=L,E.getMessageObserver=fn,E.isDisposableComponent=B,E.log=d,E.newId=f,E.onCameraModeChangedObservable=We,E.onEnterScene=Xe,E.onEnterSceneObservable=Qe,E.onIdleStateChangedObservable=Ve,E.onLeaveScene=Ke,E.onLeaveSceneObservable=Ye,E.onPlayerExpressionObservable=$e,E.onProfileChanged=tn,E.onSceneReadyObservable=Ze,E.onVideoEvent=Je,E.openExternalURL=function(E){"undefined"!=typeof dcl?dcl.openExternalUrl(E):l("ERROR: openExternalURL dcl is undefined")},E.openNFTDialog=function(E,O){if(void 0===O&&(O=null),"undefined"!=typeof dcl){var _t=E.match(/ethereum:\/\/(.+)\/(.+)/);if(!_t||_t.length<3)return;dcl.openNFTDialog(_t[1],_t[2],O)}else l("ERROR: openNFTDialog dcl is undefined")},E.pointerEventSystem=Ai,E.raycastEventSystem=xi,E.teleportTo=function(E){var O;O=[E],void 0===ze&&"undefined"!=typeof dcl&&(ze=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==ze&&"undefined"!=typeof dcl&&ze.then((function(E){dcl.callRpc(E.rpcHandle,"requestTeleport",O)}))},E.uuid=y,E.uuidEventSystem=Ci,Object.defineProperty(E,"__esModule",{value:!0})}(this.self=this.self||{}),function(E,O){"object"==typeof exports&&"undefined"!=typeof module?O(exports,require("@decentraland/Identity"),require("@decentraland/web3-provider"),require("eth-connect")):"function"==typeof define&&define.amd?define("@compicactus/dcl-scene-utils",["exports","@decentraland/Identity","@decentraland/web3-provider","eth-connect"],O):O((E="undefined"!=typeof globalThis?globalThis:E||self)["@compicactus/dcl-scene-utils"]={},E.Identity,E.web3Provider,E.eth)}(this,(function(E,O,_t,Ft){var Pt=function(E){if(E&&E.__esModule)return E;var O=Object.create(null);return E&&Object.keys(E).forEach((function(_t){if("default"!==_t){var Ft=Object.getOwnPropertyDescriptor(E,_t);Object.defineProperty(O,_t,Ft.get?Ft:{enumerable:!0,get:function(){return E[_t]}})}})),O.default=E,Object.freeze(O)}(Ft),r=function(E,O){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,O){E.__proto__=O}||function(E,O){for(var _t in O)Object.prototype.hasOwnProperty.call(O,_t)&&(E[_t]=O[_t])},r(E,O)
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */};function s(E,O){function n(){this.constructor=E}r(E,O),E.prototype=null===O?Object.create(O):(n.prototype=O.prototype,new n)}var u=function(){return u=Object.assign||function(E){for(var O,_t=1,Ft=arguments.length;_t<Ft;_t++)for(var Pt in O=arguments[_t])Object.prototype.hasOwnProperty.call(O,Pt)&&(E[Pt]=O[Pt]);return E},u.apply(this,arguments)};function p(E,O,_t,Ft){var Pt,Dt=arguments.length,Lt=Dt<3?O:null===Ft?Ft=Object.getOwnPropertyDescriptor(O,_t):Ft;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Lt=Reflect.decorate(E,O,_t,Ft);else for(var Ut=E.length-1;Ut>=0;Ut--)(Pt=E[Ut])&&(Lt=(Dt<3?Pt(Lt):Dt>3?Pt(O,_t,Lt):Pt(O,_t))||Lt);return Dt>3&&Lt&&Object.defineProperty(O,_t,Lt),Lt}function c(E,O,_t,Ft){return new(_t||(_t=Promise))((function(Pt,Dt){function r(E){try{u(Ft.next(E))}catch(E){Dt(E)}}function s(E){try{u(Ft.throw(E))}catch(E){Dt(E)}}function u(E){var O;E.done?Pt(E.value):(O=E.value,O instanceof _t?O:new _t((function(E){E(O)}))).then(r,s)}u((Ft=Ft.apply(E,O||[])).next())}))}function y(E,O){var _t,Ft,Pt,Dt,Lt={label:0,sent:function(){if(1&Pt[0])throw Pt[1];return Pt[1]},trys:[],ops:[]};return Dt={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(Dt[Symbol.iterator]=function(){return this}),Dt;function s(Dt){return function(Ut){return function(Dt){if(_t)throw new TypeError("Generator is already executing.");for(;Lt;)try{if(_t=1,Ft&&(Pt=2&Dt[0]?Ft.return:Dt[0]?Ft.throw||((Pt=Ft.return)&&Pt.call(Ft),0):Ft.next)&&!(Pt=Pt.call(Ft,Dt[1])).done)return Pt;switch(Ft=0,Pt&&(Dt=[2&Dt[0],Pt.value]),Dt[0]){case 0:case 1:Pt=Dt;break;case 4:return Lt.label++,{value:Dt[1],done:!1};case 5:Lt.label++,Ft=Dt[1],Dt=[0];continue;case 7:Dt=Lt.ops.pop(),Lt.trys.pop();continue;default:if(!((Pt=(Pt=Lt.trys).length>0&&Pt[Pt.length-1])||6!==Dt[0]&&2!==Dt[0])){Lt=0;continue}if(3===Dt[0]&&(!Pt||Dt[1]>Pt[0]&&Dt[1]<Pt[3])){Lt.label=Dt[1];break}if(6===Dt[0]&&Lt.label<Pt[1]){Lt.label=Pt[1],Pt=Dt;break}if(Pt&&Lt.label<Pt[2]){Lt.label=Pt[2],Lt.ops.push(Dt);break}Pt[2]&&Lt.ops.pop(),Lt.trys.pop();continue}Dt=O.call(E,Lt)}catch(E){Dt=[6,E],Ft=0}finally{_t=Pt=0}if(5&Dt[0])throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}([Dt,Ut])}}}function d(E){var O="function"==typeof Symbol&&Symbol.iterator,_t=O&&E[O],Ft=0;if(_t)return _t.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&Ft>=E.length&&(E=void 0),{value:E&&E[Ft++],done:!E}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(E,O){var _t="function"==typeof Symbol&&E[Symbol.iterator];if(!_t)return E;var Ft,Pt,Dt=_t.call(E),Lt=[];try{for(;(void 0===O||O-- >0)&&!(Ft=Dt.next()).done;)Lt.push(Ft.value)}catch(E){Pt={error:E}}finally{try{Ft&&!Ft.done&&(_t=Dt.return)&&_t.call(Dt)}finally{if(Pt)throw Pt.error}}return Lt}function m(){for(var E=[],O=0;O<arguments.length;O++)E=E.concat(l(arguments[O]));return E}var h=function(E,O,_t){return c(void 0,void 0,void 0,(function(){var Ft,Pt;return y(this,(function(Dt){switch(Dt.label){case 0:Ft=0,Dt.label=1;case 1:if(!(Ft<_t))return[3,6];Dt.label=2;case 2:return Dt.trys.push([2,4,,5]),[4,fetch(E,O)];case 3:return[2,Dt.sent()];case 4:if(Pt=Dt.sent(),Ft+1===_t)throw Pt;return[3,5];case 5:return Ft++,[3,1];case 6:return[2]}}))}))};function g(E){for(var O=(new Date).getTime(),_t=0;_t<1e7&&!((new Date).getTime()-O>E);_t++);}var Dt={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828,.001507878303527832,.9648514986038208,.9648514986038208,.9984922409057617,.9984921216964722,.03514862060546875,.03514862060546875,.0015079975128173828]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},Lt=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],Ut=function(E){function t(){var O=E.call(this)||this;return O.element_entities=[],O.current_compi=0,O.character_name="Compi",O.variation={body:"",cigar:"",eyes:"",glasses:"",hat:"",mustache:"",nose:"",pot:""},O.plane_material=new BasicMaterial,O.addComponent(new PlaneShape),O.addComponent(O.plane_material),O}return s(t,E),t.prototype.play_random=function(){var E=Math.floor(Math.random()*Lt.length);this.set_body(this.current_compi,E,!1)},t.prototype.play=function(E){this.set_body(this.current_compi,E,!1)},t.prototype.remove_elements=function(){for(var E=0;E<this.element_entities.length;E++)engine.removeEntity(this.element_entities[E])},t.prototype.set_body=function(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Pt,Dt;return y(this,(function(Ut){return log("set mp4 body"),this.current_compi=E,_t&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),Ft="https://dweb.link/ipfs/bafybeia7pyfmyjcnjrodau2yxm3h3bs6suv3xfzwvhohktnw6v2cevayaq/mp4/"+E+"/"+E+"_"+Lt[O]+".mp4",log(Ft),Pt=new VideoClip(Ft),Dt=new VideoTexture(Pt),this.plane_material.texture=Dt,Dt.playing=!0,[2]}))}))},t.prototype.set_body_=function(E){return c(this,void 0,void 0,(function(){var O,_t;return y(this,(function(Ft){switch(Ft.label){case 0:return log("set body"),this.remove_elements(),O={headers:{Accept:"application/json"},method:"GET"},log("get variations"),[4,h("https://dweb.link/ipfs/QmVcN4A6EzBrrWcsovrKsRg5sTootZ9HmSuTadGQ2XrL9y",O,3).then((function(E){return null==E?[]:E.json()})).catch((function(E){return log("Error")}))];case 1:return _t=Ft.sent(),log("variations",_t),this.variation=_t[E],this.add_element("body"),this.add_element("cigar"),this.add_element("eyes"),this.add_element("glasses"),this.add_element("hat"),this.add_element("mustache"),this.add_element("nose"),this.add_element("pot"),[2]}}))}))},t.prototype.add_element=function(E){""!=this.variation[E]&&(this.element_entities.push(new Entity),this.get_last_element().addComponent(new GLTFShape("compi_models/"+this.variation[E]+".glb")),this.get_last_element().addComponent(new Animator),engine.addEntity(this.get_last_element()),this.get_last_element().setParent(this))},t.prototype.get_last_element=function(){return this.element_entities[this.element_entities.length-1]},t}(Entity),Xt={Add:{position:[-.9736900329589844,.5958811640739441,.040917061269283295],rotation:[9992007221626409e-31,4.81169628585576e-8,-.3581227958202362,-.9336745142936707],scale:[.18492013216018677,.18492008745670319,.18492013216018677],uv:[.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526,.746986985206604,.8680751919746399,.8492201566696167,.8680751919746399,.8492201566696167,.9703083634376526,.746986985206604,.9703083634376526]},ArrowLeftCompi:{position:[1.4788908958435059,.6966143846511841,.040916964411735535],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.14559833705425262,.14559833705425262,.14559833705425262],uv:[.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089,.53712397813797,.8761494755744934,.6298521161079407,.8761494755744934,.6298521161079407,.9688776731491089,.53712397813797,.9688776731491089]},ArrowLeftQuestions:{position:[-.5068280696868896,-.20516154170036316,.0409170463681221],rotation:[-7105427357601002e-30,1.3435888490676007e-7,-1.0000001192092896,902615418659717e-29],scale:[.13791120052337646,.13791120052337646,.13791120052337646],uv:[.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493,.5374969244003296,.876522421836853,.629479169845581,.876522421836853,.629479169845581,.9685047268867493,.5374969244003296,.9685047268867493]},ArrowRightCompi:{position:[.5825899839401245,.7002140879631042,.04091687127947807],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.15308743715286255,.15308743715286255,.15308743715286255],uv:[.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133,.5377315878868103,.8767570853233337,.6292445063591003,.8767570853233337,.6292445063591003,.9682701230049133,.5377315878868103,.9682701230049133]},ArrowRightQuestions:{position:[-1.3984005451202393,-.21152262389659882,.04091695323586464],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.14561930298805237,.14561930298805237,.14561930298805237],uv:[.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332,.5326187610626221,.8716443181037903,.6300644874572754,.8716443181037903,.6300644874572754,.9690901637077332,.5326187610626221,.9690901637077332]},BackgroundAnswers:{position:[-.00592494010925293,-.07895167171955109,-1.060785503881334e-8],rotation:[-0,-1174602272000988e-29,8.742277657347586e-8,1],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},BackgroundCompicactus:{position:[1.0598316192626953,-.04718310385942459,.0029314737766981125],rotation:[-7103880569560197e-31,-6.2252460963918566e-9,.04633298143744469,-.998926043510437],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494,.8326539993286133,.09020934253931046,.874096155166626,.09020934253931046,.874096155166626,.13165152072906494,.8326539993286133,.13165152072906494]},BackgroundQuestions:{position:[-.9756283760070801,-.06579305976629257,-8.83987905098138e-9],rotation:[-0,-1.3435884227419592e-7,1,-4.371138828673793e-8],scale:[.8324118256568909,1.189159631729126,1.189159631729126],uv:[.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331,.09974434971809387,.4196958541870117,.4860137104988098,.4196958541870117,.4860137104988098,.960472822189331,.09974434971809387,.960472822189331]},CancelRedCompi:{position:[1.0075632333755493,-.01593323051929474,.07591697573661804],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537,.5147221088409424,.6938798427581787,.6448183059692383,.6938798427581787,.6448183059692383,.8239762783050537,.5147221088409424,.8239762783050537]},Compicactus:{position:[1.0598316192626953,-.04718310385942459,.044343285262584686],rotation:[901047179509523e-30,2.344884952876214e-9,-.017452403903007507,-.9998477101325989],scale:[1.1614147424697876,1.1614147424697876,1.1614147424697876],uv:[.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617,.001507878303527832,.0351487398147583,.9648514986038208,.0015079975128173828,.9984921216964722,.9648516178131104,.03514862060546875,.9984922409057617]},EditAnswer:{position:[-.17161095142364502,.5804060697555542,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},EditName:{position:[1.023306131362915,.9744213819503784,.040916845202445984],rotation:[-0,0,-0,-1],scale:[.21622267365455627,.21622267365455627,.21622267365455627],uv:[.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433,.6404823064804077,.8690820932388306,.7427154779434204,.8690820932388306,.7427154779434204,.9713152647018433,.6404823064804077,.9713152647018433]},Help:{position:[-.4528905153274536,1.1889170408248901,.04091717302799225],rotation:[-0,0,-0,-1],scale:[.36114898324012756,.18057449162006378,.36114898324012756],uv:[.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142,.6136775016784668,.13104644417762756,.7717379331588745,.13104644417762756,.7717379331588745,.21007665991783142,.6136775016784668,.21007665991783142]},Mint:{position:[-.002437543123960495,1.3288666009902954,.04091716185212135],rotation:[-0,0,-0,-1],scale:[.4449852406978607,.22249262034893036,.4449852406978607],uv:[.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283,.4526936113834381,.13239853084087372,.6056946516036987,.13239853084087372,.6056946516036987,.20889903604984283,.4526936113834381,.20889903604984283]},Name:{position:[1.0389444828033447,.7171220183372498,.040916867554187775],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6634318828582764,.28844866156578064,.28844866156578064],uv:[.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064,.5097656846046448,.2790776193141937,.739005982875824,.2790776193141937,.739005982875824,.3787473142147064,.5097656846046448,.3787473142147064]},OkGreenCompi:{position:[1.0075632333755493,-.01593323051929474,.08991697430610657],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537,.6978199481964111,.6938798427581787,.827916145324707,.6938798427581787,.827916145324707,.8239762783050537,.6978199481964111,.8239762783050537]},PolygonMana:{position:[.5321251749992371,1.2641630172729492,.04091712832450867],rotation:[-0,0,-0,-1],scale:[.528679609298706,.505429208278656,.47581160068511963],uv:[.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647,.21294867992401123,.026864349842071533,.4362680912017822,.026864349842071533,.4362680912017822,.22785180807113647,.21294867992401123,.22785180807113647]},Remove:{position:[.10745614767074585,.5804059505462646,.040917061269283295],rotation:[-0,0,-0,-1],scale:[.19285941123962402,.19285941123962402,.19285941123962402],uv:[.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203,.7486777305603027,.8712334632873535,.8466081619262695,.8712334632873535,.8466081619262695,.9691638946533203,.7486777305603027,.9691638946533203]},SelectedQuestion:{position:[-.9813814163208008,.285593181848526,.06129398196935654],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.6806405782699585,.09864357113838196,.19728714227676392],uv:[.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728,.1351213902235031,.30550289154052734,.45817357301712036,.30550289154052734,.45817357301712036,.3523220419883728,.1351213902235031,.3523220419883728]},WorkingYellowCompi:{position:[1.0075632333755493,-.01593323051929474,.10591697692871094],rotation:[-2842170943040401e-29,12324151505631147e-31,4.371138118131057e-8,1.0000001192092896],scale:[.4886789917945862,.4886789917945862,.4886789917945862],uv:[.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212,.6094315052032471,.5350365042686462,.739527702331543,.5350365042686462,.739527702331543,.6651329398155212,.6094315052032471,.6651329398155212]}},Kt=["Action-01-Look_R-L","Action-02-Look_R","Action-03-Look_L","Action-04-Look-Up","Action-05-Sleep","Action-06-Dancing","Action-07-Swinging","Action-08-LOL","Action-09-Pised_Off","Action-10-Yawn","Action-11-Alert","Action-12_Sigh"],Zt=function(E){function t(){var O=E.call(this)||this;return O.images_path="https://cors-anywhere.herokuapp.com/https://voxters.s3.eu-west-3.amazonaws.com/thumbnails/boxter_{__ID__}.jpg",O.videos_path="",O.character_name="Voxter",O}return s(t,E),t}(function(E){function t(){var O=E.call(this)||this;return O.element_entities=[],O.current_compi=0,O.images_path="",O.videos_path="",O.character_name="",O.plane_material=new BasicMaterial,O.addComponent(new PlaneShape),O.addComponent(O.plane_material),O}return s(t,E),t.prototype.play_random=function(){var E=Math.floor(Math.random()*Kt.length);this.set_video_body(this.current_compi,E,!1)},t.prototype.play=function(E){this.set_video_body(this.current_compi,E,!1)},t.prototype.remove_elements=function(){for(var E=0;E<this.element_entities.length;E++)engine.removeEntity(this.element_entities[E])},t.prototype.set_body=function(E,O,_t){return c(this,void 0,void 0,(function(){return y(this,(function(Ft){return""!=this.images_path&&this.set_image_body(E,O,_t),""!=this.videos_path&&this.set_video_body(E,O,_t),[2]}))}))},t.prototype.set_image_body=function(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Pt,Dt;return y(this,(function(Lt){return""==this.images_path||(log("set image body"),this.current_compi=E,_t&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),Ft=Kt[O],Pt=(Pt=this.images_path.replace("{__ID__}",String(E))).replace("{__ACTION__}",String(Ft)),log(Pt),Dt=new Texture(Pt),this.plane_material.texture=Dt),[2]}))}))},t.prototype.set_video_body=function(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Pt,Dt,Lt;return y(this,(function(Ut){return""==this.videos_path||(log("set video body"),this.current_compi=E,_t&&(this.plane_material=new BasicMaterial,this.addComponentOrReplace(this.plane_material)),Ft=Kt[O],Pt=(Pt=this.images_path.replace("{__ID__}",String(E))).replace("{__ACTION__}",String(Ft)),log(Pt),Dt=new VideoClip(Pt),Lt=new VideoTexture(Dt),this.plane_material.texture=Lt,Lt.playing=!0),[2]}))}))},t}(Entity)),le=p([Component("fixShape")],(function(){this.fixed=!1})),ve=new Material;ve.alphaTest=1,ve.albedoColor=new Color4(0,0,0,0);var Ce=engine.getComponentGroup(PlaneShape,le,OnPointerDown),Re=function(){function e(){this.timer=0}return e.prototype.update=function(E){var O,_t;if(this.timer+=E,!(this.timer<1))try{for(var Ft=d(Ce.entities),Pt=Ft.next();!Pt.done;Pt=Ft.next()){var Dt=Pt.value,Lt=Dt.getComponent(le);if(!Lt.fixed){Lt.fixed=!0;var Ut=new Entity;Ut.addComponent(new PlaneShape),Ut.addComponent(Dt.getComponent(OnPointerDown)),Ut.addComponent(ve),Ut.setParent(Dt),Lt.fixentity=Ut}Lt.fixentity.getComponent(PlaneShape).visible=Dt.getComponent(PlaneShape).visible}}catch(E){O={error:E}}finally{try{Pt&&!Pt.done&&(_t=Ft.return)&&_t.call(Ft)}finally{if(O)throw O.error}}},e}();engine.addSystem(new Re);var Me={COMPICACTUS:0,VOXTER:1,ETHERMON:2,ROVI:3,ZEDRUN:4},Se={MATIC:"matic",MUMBAI:"mumbai",MOCKUP:"mockup"},Ie=new Texture("https://dweb.link/ipfs/bafybeifaih2h275bmmessdnwk5tkbbdsc6y4aacpbiu4jdsu2numusrxne/CompiUIB.png"),Fe=new Material;Fe.transparencyMode=1,Fe.albedoTexture=Ie,Fe.emissiveTexture=Ie,Fe.emissiveIntensity=1,Fe.emissiveColor=new Color3(.5,.5,.5);var Pe=new UICanvas,Ne=p([Component("stool")],(function(){this.current_compi=-1,this.current_token=-1,this.current_menu=0,this.goto_compi=-1,this.dirty_compi=!1,this.play_animation=-1,this.answer="",this.answer_drawn=0,this.answer_dt=0,this.questions="",this.name="",this.price="-",this.price_number=0,this.price_discount=!1,this.question_list=[],this.current_qpage=0,this.goto_qpage=0,this.current_question=0,this.goto_question=0,this.name_to_set="",this.answer_to_set="",this.question_to_add="",this.asking_question="",this.dirty_questions=!1,this.current_action="",this.forced=!1,this.broadcast=[],this.working=!1})),ze=function(E){function t(O,_t){var Ft=E.call(this)||this;if(Ft.compidata_shape=new TextShape,Ft.answer_shape=new TextShape,Ft.questions_shape=new TextShape,Ft.price_shape=new TextShape,Ft.remove_entity=new Entity,Ft.editanswer_entity=new Entity,Ft.cancel_entity=new Entity,Ft.error_entity=new Entity,Ft.ok_entity=new Entity,Ft.working_entity=new Entity,_t.character==Me.COMPICACTUS)Ft.planesMenu=Dt,Ft.compi_entity=new Ut;else{if(_t.character!=Me.VOXTER)throw new Error("Character not found: "+_t.character);Ft.planesMenu=Xt,Ft.compi_entity=new Zt}Ft.textInput=new UIInputText(Pe),Ft.stool_component=new Ne,Ft.addComponent(Ft.stool_component),engine.addEntity(Ft),Ft.stool_component.network=_t,-1!=O&&(Ft.stool_component.forced=!0,Ft.stool_component.current_action="goto_compi",Ft.stool_component.goto_compi=O,Ft.stool_component.dirty_compi=!0,log("Forced")),Ft.stool_component.forced||(Ft.createPlane(Ft.planesMenu.ArrowLeftCompi).addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="previous_compi")}),{hoverText:"Previous "+Ft.compi_entity.character_name})),Ft.createPlane(Ft.planesMenu.ArrowRightCompi).addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="next_compi")}),{hoverText:"Next "+Ft.compi_entity.character_name})),Ft.createPlane(Ft.planesMenu.Add).addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="add_question")}),{hoverText:"Add question"})),Ft.editanswer_entity=Ft.createPlane(Ft.planesMenu.EditAnswer),Ft.editanswer_entity.getComponent(PlaneShape).visible=!1,Ft.editanswer_entity.addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="edit_answer")}),{hoverText:"Edit answer"})),Ft.remove_entity=Ft.createPlane(Ft.planesMenu.Remove),Ft.remove_entity.getComponent(PlaneShape).visible=!1,Ft.remove_entity.addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="remove_question")}),{hoverText:"Remove Question"})),Ft.createPlane(Ft.planesMenu.EditName).addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="set_name")}),{hoverText:"Set Name"})),Ft.cancel_entity=Ft.createPlane(Ft.planesMenu.CancelRedCompi),engine.removeEntity(Ft.cancel_entity),Ft.cancel_entity.addComponent(new OnPointerDown((function(){Ft.stool_component.current_action="cancel"}),{hoverText:"Cancel"})),Ft.error_entity=Ft.createPlane(Ft.planesMenu.CancelRedCompi),engine.removeEntity(Ft.error_entity),Ft.error_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(Ft.error_entity)}),{hoverText:"Error. Please try again!"})),Ft.ok_entity=Ft.createPlane(Ft.planesMenu.OkGreenCompi),engine.removeEntity(Ft.ok_entity),Ft.ok_entity.addComponent(new OnPointerDown((function(){engine.removeEntity(Ft.ok_entity)}),{hoverText:"Success"})),Ft.working_entity=Ft.createPlane(Ft.planesMenu.WorkingYellowCompi),engine.removeEntity(Ft.working_entity),Ft.working_entity.addComponent(new OnPointerDown((function(){}),{hoverText:"Waiting for signature. Check wallet!"}))),Ft.arrowleftquestions_entity=Ft.createPlane(Ft.planesMenu.ArrowLeftQuestions),Ft.arrowleftquestions_entity.addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="previous_question_page")}),{hoverText:"Prev page"})),Ft.arrowrightquestions_entity=Ft.createPlane(Ft.planesMenu.ArrowRightQuestions),Ft.arrowrightquestions_entity.addComponent(new OnPointerDown((function(){Ft.stool_component.working||(Ft.stool_component.current_action="next_question_page")}),{hoverText:"Next page"}));var Pt=Ft.createPlane(Ft.planesMenu.BackgroundAnswers);Ft.createPlane(Ft.planesMenu.BackgroundCompicactus);var Lt=Ft.createPlane(Ft.planesMenu.BackgroundQuestions),Kt=Ft.createPlane(Ft.planesMenu.Compicactus);Ft.createPlane(Ft.planesMenu.Name),engine.removeEntity(Kt),Ft.compi_entity.addComponent(Kt.getComponent(Transform)),Ft.compi_entity.setParent(Ft),Ft.compi_entity.getComponent(PlaneShape).uvs=Kt.getComponent(PlaneShape).uvs;var le=new OnPointerDown((function(E){Ft.stool_component.working||(0==E.buttonId?Ft.stool_component.current_action="ask_question":1==E.buttonId?Ft.stool_component.current_action="previous_question":2==E.buttonId&&(Ft.stool_component.current_action="next_question"))}),{hoverText:"E: Up - F: Down - Click: Ask"});return Lt.addComponent(le),Pt.addComponent(le),Ft.compidata_shape.fontSize=1,Ft.compidata_shape.value="",Ft.compidata_shape.hTextAlign="left",Ft.compidata_shape.vTextAlign="center",Ft.compidata_shape.font=new Font(Fonts.SanFrancisco_Heavy),Ft.compidata_shape.color=Color3.Black(),Ft.compidata_entity=new Entity,Ft.compidata_entity.addComponent(Ft.compidata_shape),Ft.compidata_entity.addComponent(new Transform({position:new Vector3(1.3,1.24,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.4,.4,.4)})),Ft.compidata_entity.setParent(Ft),Ft.questions_shape.textWrapping=!0,Ft.questions_shape.font=new Font(Fonts.SanFrancisco_Heavy),Ft.questions_shape.hTextAlign="left",Ft.questions_shape.vTextAlign="top",Ft.questions_shape.fontSize=1,Ft.questions_shape.fontWeight="normal",Ft.questions_shape.value="",Ft.questions_shape.width=1.5,Ft.questions_shape.color=Color3.Black(),Ft.questions_entity=new Entity,Ft.questions_entity.addComponent(Ft.questions_shape),Ft.questions_entity.addComponent(new Transform({position:new Vector3(-1,.74,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),Ft.questions_entity.setParent(Ft),Ft.answer_shape.textWrapping=!0,Ft.answer_shape.font=new Font(Fonts.SanFrancisco_Heavy),Ft.answer_shape.hTextAlign="center",Ft.answer_shape.vTextAlign="top",Ft.answer_shape.fontSize=1,Ft.answer_shape.fontWeight="normal",Ft.answer_shape.value="",Ft.answer_shape.width=1.3,Ft.answer_shape.color=Color3.Black(),Ft.answer_entity=new Entity,Ft.answer_entity.addComponent(Ft.answer_shape),Ft.answer_entity.addComponent(new Transform({position:new Vector3(0,.65,.08),rotation:Quaternion.Euler(0,180,0),scale:new Vector3(.5,.5,1)})),Ft.answer_entity.setParent(Ft),Ft.textInput.width="50%",Ft.textInput.height="50px",Ft.textInput.vAlign="bottom",Ft.textInput.hAlign="center",Ft.textInput.fontSize=30,Ft.textInput.placeholder="Write name here",Ft.textInput.placeholderColor=Color4.Gray(),Ft.textInput.positionY="200px",Ft.textInput.isPointerBlocker=!0,Ft.textInput.visible=!1,Ft}return s(t,E),t.prototype.createPlane=function(E){var O=new Entity,_t=new PlaneShape;_t.uvs=E.uv,O.addComponent(_t);var Ft=new Transform({position:new(Vector3.bind.apply(Vector3,m([void 0],E.position))),rotation:new(Quaternion.bind.apply(Quaternion,m([void 0],E.rotation))),scale:new(Vector3.bind.apply(Vector3,m([void 0],E.scale)))});return Ft.position.y+=.55,O.addComponent(Ft),O.addComponent(Fe),O.setParent(this),O.addComponent(new le),O},t.prototype.destroy=function(){engine.removeEntity(this)},t}(Entity),De=engine.getComponentGroup(Ne),Le=function(){function e(){}return e.prototype.update=function(E){var O,_t;try{for(var Ft=d(De.entities),Pt=Ft.next();!Pt.done;Pt=Ft.next()){var Dt=Pt.value,Lt=Dt,Ut=Dt.getComponent(Ne);Ut.answer_drawn<Ut.answer.length&&(Ut.answer_drawn+=Math.round(100*E),Ut.answer_drawn>Ut.answer.length&&(Ut.answer_drawn=Ut.answer.length),Lt.answer_shape.value=Ut.answer.substring(0,Ut.answer_drawn)),Ut.questions!=Lt.questions_shape.value&&(Lt.questions_shape.value=Ut.questions,Lt.questions_shape.width=1.2),Ut.play_animation>=0&&(Lt.compi_entity.play(Ut.play_animation),Ut.play_animation=-1),"cancel"!=Ut.current_action?Ut.working||("goto_compi"!=Ut.current_action?-1!=Ut.current_compi?Ut.dirty_compi?(Ut.working=!0,this.updateCompi(Lt)):"previous_compi"!=Ut.current_action?"next_compi"!=Ut.current_action?-2!=Ut.current_compi&&(Ut.dirty_questions?(Ut.working=!0,this.updateQuestions(Lt)):"add_question"!=Ut.current_action?"remove_question"!=Ut.current_action?"edit_answer"!=Ut.current_action?"set_name"!=Ut.current_action?"ask_question"!=Ut.current_action?"previous_question"!=Ut.current_action?"next_question"!=Ut.current_action?"previous_question_page"!=Ut.current_action?"next_question_page"!=Ut.current_action||(log("action: next_question_page"),Ut.working=!0,Ut.current_action="",Ut.goto_qpage=Ut.current_qpage+1,this.gotoQPage(Ut)):(log("action: previous_question_page"),Ut.working=!0,Ut.current_action="",Ut.goto_qpage=Ut.current_qpage-1,this.gotoQPage(Ut)):(Ut.working=!0,Ut.current_action="",Ut.goto_question=Ut.current_question+1,this.gotoQuestion(Ut)):(Ut.working=!0,Ut.current_action="",Ut.goto_question=Ut.current_question-1,this.gotoQuestion(Ut)):(Ut.working=!0,Ut.current_action="",this.askQuestion(Dt)):(Ut.working=!0,Ut.current_action="",this.setName(Dt)):(Ut.working=!0,Ut.current_action="",this.editAnwser(Dt)):(Ut.working=!0,Ut.current_action="",this.removeQuestion(Dt)):(Ut.working=!0,Ut.current_action="",this.addQuestion(Dt))):(Ut.working=!0,Ut.current_action="",Ut.goto_compi=Ut.current_compi+1,this.goto(Ut)):(Ut.working=!0,Ut.current_action="",Ut.goto_compi=Ut.current_compi-1,this.goto(Ut)):(Ut.working=!0,Ut.current_action="",Ut.goto_compi=0,this.goto(Ut)):(Ut.working=!0,Ut.current_action="",this.goto(Ut))):(Ut.current_action="",Lt.textInput.visible=!1,engine.removeEntity(Lt.cancel_entity),Ut.working=!1)}}catch(E){O={error:E}}finally{try{Pt&&!Pt.done&&(_t=Ft.return)&&_t.call(Ft)}finally{if(O)throw O.error}}},e.prototype.goto=function(E){return c(this,void 0,void 0,(function(){var O;return y(this,(function(_t){switch(_t.label){case 0:return log("goto"),log("stool_component.current_compi",E.current_compi),log("stool_component.goto_compi",E.goto_compi),log("stool_component.dirty_compi",E.dirty_compi),E.forced?[3,2]:(log("Getting compis"),[4,E.network.balanceOf()]);case 1:return O=_t.sent(),log("compisCount",O),O>0?(log("compisCount>0"),E.goto_compi<0?(log("stool_component.goto_compi<0"),E.current_compi=O-1,E.dirty_compi=!0):E.goto_compi>=O?(log("stool_component.goto_compi>=compisCount"),E.current_compi=0,E.dirty_compi=!0):(E.current_compi=E.goto_compi,E.dirty_compi=!0)):(log("else1"),E.current_compi=-2,E.goto_compi=0,E.dirty_compi=!0),[3,3];case 2:log("else2"),E.current_compi=E.goto_compi,E.dirty_compi=!0,_t.label=3;case 3:return log("stool_component.current_compi",E.current_compi),log("stool_component.goto_compi",E.goto_compi),log("stool_component.dirty_compi",E.dirty_compi),E.working=!1,[2]}}))}))},e.prototype.gotoQuestion=function(E){return c(this,void 0,void 0,(function(){var O,_t;return y(this,(function(Ft){for(O=0,_t=0;_t<E.question_list.length;_t++)""!=E.question_list[_t].value&&(O+=1);return E.goto_question<0?(E.goto_question=O-1,E.current_question=O-1,E.dirty_questions=!0):E.goto_question>=O?(E.goto_question=0,E.current_question=0,E.dirty_questions=!0):(E.current_question=E.goto_question,E.dirty_questions=!0),log(E.goto_question,E.current_question),E.working=!1,[2]}))}))},e.prototype.gotoQPage=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft,Pt;return y(this,(function(Dt){switch(Dt.label){case 0:for(O=0,Pt=0;Pt<E.question_list.length;Pt++)""!=E.question_list[Pt].value&&(O+=1);return E.goto_qpage<0||E.goto_qpage>E.current_qpage&&O<10?E.current_qpage=0:E.current_qpage=E.goto_qpage,log("current_qpage",E.current_qpage),_t=10*E.current_qpage,[4,E.network.getQuestions(E.current_token,_t)];case 1:for(Ft=Dt.sent(),log(Ft),Pt=0;Pt<Ft.length;Pt++)E.question_list[Pt]={id:Pt+_t,value:Ft[Pt]};return E.current_question=0,E.dirty_questions=!0,E.working=!1,[2]}}))}))},e.prototype.updateCompi=function(E,O){return c(this,void 0,void 0,(function(){var O,_t,Ft;return y(this,(function(Pt){switch(Pt.label){case 0:return(O=E.getComponent(Ne)).dirty_compi=!1,O.current_compi<0?(E.compi_entity.set_body(0,0,!0),E.compidata_shape.value="Demo",O.working=!1,[2]):(log("updateCompi"),E.compidata_shape.value="-",_t=0,O.forced?[3,2]:(E.editanswer_entity.getComponent(PlaneShape).visible=!1,E.remove_entity.getComponent(PlaneShape).visible=!1,[4,O.network.tokenOfOwnerByIndex(O.current_compi)]));case 1:return _t=Pt.sent(),O.current_token=_t,[3,3];case 2:_t=O.current_token=O.current_compi,Pt.label=3;case 3:return log("compiId",_t),[4,O.network.getName(_t)];case 4:return""===(Ft=Pt.sent())&&(Ft="No name set"),E.compidata_shape.value="#"+_t+":"+Ft,E.compi_entity.set_body(_t,0,!0),this.gotoQPage(O),O.working=!1,[2]}}))}))},e.prototype.updateQuestions=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft,Pt,Dt;return y(this,(function(Lt){switch(Lt.label){case 0:return[4,(O=E.getComponent(Ne)).network.getQuestionsCount(O.current_token)];case 1:for(_t=Lt.sent(),E.arrowleftquestions_entity.getComponent(PlaneShape).visible=!0,E.arrowrightquestions_entity.getComponent(PlaneShape).visible=!0,_t>10?0==10*O.current_qpage&&(E.arrowleftquestions_entity.getComponent(PlaneShape).visible=!1):(log("hide arrows"),E.arrowleftquestions_entity.getComponent(PlaneShape).visible=!1,E.arrowrightquestions_entity.getComponent(PlaneShape).visible=!1),Ft="",Pt=0,Dt=0;Dt<O.question_list.length;Dt++)""!=O.question_list[Dt].value&&(O.current_question==Dt?Ft+="[ ":Ft+="",Ft+=""+O.question_list[Dt].value,Pt+=1,O.current_question==Dt?Ft+=" ]\n":Ft+="\n");return O.questions=Ft,Pt<10&&(E.arrowrightquestions_entity.getComponent(PlaneShape).visible=!1),O.dirty_questions=!1,O.working=!1,[2]}}))}))},e.prototype.setName=function(E){return c(this,void 0,void 0,(function(){var O,_t=this;return y(this,(function(Ft){return O=E.getComponent(Ne),log("Set Name"),O.current_compi<0||(E.textInput.visible=!0,E.textInput.placeholder="Write name here",engine.addEntity(E.cancel_entity),E.textInput.onTextSubmit=new OnTextSubmit((function(Ft){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return E.textInput.visible=!1,engine.removeEntity(E.cancel_entity),engine.addEntity(E.working_entity),[4,O.network.setName(O.current_token,Ft.text).then((function(_t){1===_t.status?(O.dirty_compi=!0,O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.ok_entity),log("setName Ok ",_t)):(O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on setName",_t))})).catch((function(_t){O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on setName",_t)}))];case 1:return _t.sent(),[2]}}))}))})),engine.addEntity(E.cancel_entity)),[2]}))}))},e.prototype.askQuestion=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le;return y(this,(function(ve){switch(ve.label){case 0:return O=E.getComponent(Ne),_t=O.question_list[O.current_question].value,[4,O.network.getAnswer(O.current_token,_t)];case 1:for(Ft=ve.sent(),log(Ft),Pt=/\{.*?\}/g,Lt=Ft;null!==(Dt=Pt.exec(Ft));)Dt.index===Pt.lastIndex&&Pt.lastIndex++,Dt.forEach((function(E,_t){log("Found match, group "+_t+": "+E);var Ft=void 0;try{Ft=JSON.parse(E)}catch(O){log("Error parsing json to broadcast "+E)}null!=Ft&&O.broadcast.push(Ft),Lt=Lt.replace(E,"")}));for(Ut="You: "+_t+"\n\n"+E.compi_entity.character_name+": "+Lt,O.answer=Ut,O.answer_drawn=0,Xt=Math.floor(3*Math.random()),Kt=!1,Zt=0;Zt<O.broadcast.length;Zt++)null!=O.broadcast[Zt].emote&&(O.play_animation=z(O.broadcast[Zt].emote),O.broadcast[Zt].emote=void 0,Kt=!0),null!=O.broadcast[Zt].audio&&(le=new AudioStream(O.broadcast[Zt].audio),E.addComponentOrReplace(le),le.playing=!0,le.volume=.2,O.broadcast[Zt].audio=void 0);return Kt||(O.play_animation=Xt),log("stool_component.play_animation",O.play_animation),O.forced||(E.editanswer_entity.getComponent(PlaneShape).visible=!0,E.remove_entity.getComponent(PlaneShape).visible=!0),O.working=!1,[2]}}))}))},e.prototype.addQuestion=function(E){return c(this,void 0,void 0,(function(){var O,_t=this;return y(this,(function(Ft){return O=E.getComponent(Ne),E.textInput.visible=!0,E.textInput.placeholder="Write question",engine.addEntity(E.cancel_entity),E.textInput.onTextSubmit=new OnTextSubmit((function(Ft){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return E.textInput.visible=!1,engine.removeEntity(E.cancel_entity),engine.addEntity(E.working_entity),[4,O.network.addQuestion(O.current_token,Ft.text,"Default answer").then((function(_t){1===_t.status?(O.dirty_compi=!0,O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.ok_entity),log("addQuestion Ok ",_t)):(O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on addQuestion",_t))})).catch((function(_t){O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on addQuestion",_t)}))];case 1:return _t.sent(),[2]}}))}))})),engine.addEntity(E.cancel_entity),[2]}))}))},e.prototype.removeQuestion=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft;return y(this,(function(Pt){switch(Pt.label){case 0:return O=E.getComponent(Ne),_t=O.question_list[O.current_question].value,Ft=O.question_list[O.current_question].id,engine.addEntity(E.working_entity),[4,O.network.removeQuestion(O.current_token,_t,Ft).then((function(_t){1===_t.status?(O.dirty_compi=!0,O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.ok_entity),log("removeQuestion Ok ",_t)):(O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on removeQuestion",_t))})).catch((function(_t){O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on removeQuestion",_t)}))];case 1:return Pt.sent(),[2]}}))}))},e.prototype.editAnwser=function(E){return c(this,void 0,void 0,(function(){var O,_t=this;return y(this,(function(Ft){return O=E.getComponent(Ne),log("Edit Anwser"),engine.addEntity(E.cancel_entity),E.textInput.visible=!0,E.textInput.placeholder="Write answer here",E.textInput.onTextSubmit=new OnTextSubmit((function(Ft){return c(_t,void 0,void 0,(function(){var _t;return y(this,(function(Pt){switch(Pt.label){case 0:return E.textInput.visible=!1,log("this.current_token",O.current_token),_t=O.question_list[O.current_question].value,engine.removeEntity(E.cancel_entity),engine.addEntity(E.working_entity),[4,O.network.addQuestion(O.current_token,_t,Ft.text).then((function(_t){1===_t.status?(O.dirty_compi=!0,O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.ok_entity),log("addQuestion (Edit Anwser) Ok ",_t)):(O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on addQuestion (Edit Anwser)",_t))})).catch((function(_t){O.working=!1,engine.removeEntity(E.working_entity),engine.addEntity(E.error_entity),log("Error on addQuestion (Edit Anwser)",_t)}))];case 1:return Pt.sent(),[2]}}))}))})),[2]}))}))},e}();function z(E){return"dance"==E?5:"lol"==E?7:"alert"==E?10:"swing"==E?6:"look_l"==E?2:"look_r"==E?1:"look_r_l"==E?0:"look_up"==E?3:"pissed_off"==E?8:"sigh"==E?11:"sleep"==E?4:"yawn"==E?9:0}var Ue,qe="0c53c51c",He=se("0x"),Ge=0;function ee(E){return c(this,void 0,void 0,(function(){var O;return y(this,(function(_t){switch(_t.label){case 0:O=[],_t.label=1;case 1:return _t.trys.push([1,3,,5]),[4,pe(E,"eth_requestAccounts",[])];case 2:return O=_t.sent(),[3,5];case 3:return _t.sent(),[4,pe(E,"eth_accounts",[])];case 4:return O=_t.sent(),[3,5];case 5:if(0===O.length)throw new Error("Could not find a valid connected account");return[2,O[0]]}}))}))}function te(E,O,_t){return c(this,void 0,void 0,(function(){return y(this,(function(Ft){return[2,pe(E,"eth_signTypedData_v4",[O,_t])]}))}))}function ie(E,O,_t){for(var Ft=0;Ft<E&&!(_t.length>=E);Ft++)_t=""+_t+O;return _t}function ae(E,O,_t){return c(this,void 0,void 0,(function(){var Ft;return y(this,(function(Pt){switch(Pt.label){case 0:return Ft=ue(O),[4,pe(E,"eth_call",[{data:"0x2d0335ab"+Ft,to:_t},"latest"])];case 1:return[2,ue(Pt.sent())]}}))}))}function oe(E,O){return pe(E,"eth_getCode",[O.toLowerCase(),"latest"])}function re(E,O){return c(this,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,oe(E,O)];case 1:return[2,(Ft=_t.sent(),!(se(Ft.toLowerCase())===He))]}var Ft}))}))}function se(E){if(!/^0x[0-9a-f]*$/gi.test(E))throw new Error('Not a valid hex string "'+E+'"');for(var O=E.slice(2);O.length<40;)O="0"+O;return"0x"+O}function ue(E){return function(E,O,_t){for(var Ft=0;Ft<64&&!(_t.length>=64);Ft++)_t="0"+_t;return _t}(0,0,E.toString().replace("0x",""))}function pe(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Pt;return y(this,(function(Dt){switch(Dt.label){case 0:return Pt={jsonrpc:"2.0",id:++Ge,method:O,params:_t},void 0===E.request?[3,2]:[4,E.request(Pt)];case 1:return Ft=Dt.sent(),[3,6];case 2:return void 0===E.sendAsync?[3,4]:[4,E.sendAsync(Pt)];case 3:return Ft=Dt.sent(),[3,6];case 4:return void 0===E.send?[3,6]:[4,E.send(O,_t)];case 5:Ft=Dt.sent(),Dt.label=6;case 6:if(Ft)return[2,Ft.result||Ft];throw new Error('Could not send the transaction correcty. Either the provider does not support the method "'+O+'" or is missing a proper send/request.')}}))}))}!function(E){E.Bid="Bid",E.CollectionFactory="CollectionFactory",E.CollectionManager="CollectionManager",E.CollectionStore="CollectionStore",E.Committee="Committee",E.ERC20="ERC20",E.ERC721="ERC721",E.ERC721CollectionV2="ERC721CollectionV2",E.Forwarder="Forwarder",E.MANAToken="MANAToken",E.Marketplace="Marketplace",E.Rarities="Rarities"}(Ue||(Ue={}));var je,We=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],Ve=[{name:"nonce",type:"uint256"},{name:"from",type:"address"},{name:"functionSignature",type:"bytes"}];!function(E){E.INVALID_ADDRESS="invalid_address",E.CONTRACT_ACCOUNT="contract_account",E.USER_DENIED="user_denied",E.UNKNOWN="unknown"}(je||(je={}));var Qe=function(E){function t(O,_t){var Ft=E.call(this,O)||this;return Ft.code=_t,Ft}return s(t,E),t}(Error);function me(E,O,_t,Ft,Pt){return void 0===Pt&&(Pt={}),c(this,void 0,void 0,(function(){var Dt,Lt,Ut,Xt,Kt,Zt,le,ve,Ce,Re;return y(this,(function(Me){switch(Me.label){case 0:if(Dt=u(u({},{serverURL:"https://transactions-api.decentraland.org/v1"}),Pt),!Ft.address.trim())throw new Qe("The contract address for "+Ft.name+" is empty. You're probably trying to get a proxy contract. Try adding an address to the result of getContract",je.INVALID_ADDRESS);Me.label=1;case 1:return Me.trys.push([1,8,,9]),[4,ee(E)];case 2:return Lt=Me.sent(),[4,re(E,Lt)];case 3:if(Me.sent())throw new Qe("Contract accounts are not supported",je.CONTRACT_ACCOUNT);return[4,ae(O,Lt,Ft.address)];case 4:return Ut=Me.sent(),Se=Ft.chainId,Xt="number"==typeof Se?"0x"+ue(Se.toString(16)):"0x"+ue(Se),Kt=function(E,O){return{name:O.name,version:O.version,verifyingContract:O.address,salt:E}}(Xt,Ft),Zt=function(E,O,_t,Ft){return{types:{EIP712Domain:We,MetaTransaction:Ve},domain:Ft,primaryType:"MetaTransaction",message:{nonce:parseInt(O,16),from:E,functionSignature:_t}}}(Lt,Ut,_t,Kt),[4,te(E,Lt,JSON.stringify(Zt))];case 5:return le=Me.sent(),ve=function(E,O,_t){var Ft=O.replace("0x",""),Pt=Ft.substring(0,64),Dt=Ft.substring(64,128),Lt=function(E){var O=parseInt(E,16);if(O<27&&(O+=27),27!==O&&28!==O)throw Error('Invalid signature version "'+E+'" (parsed: '+O+")");return O.toString(16)}(Ft.substring(128,130)),Ut=_t.replace("0x",""),Xt=(Ut.length/2).toString(16),Kt=Math.ceil(Ut.length/64);return["0x",qe,ue(E),ue("a0"),Pt,Dt,ue(Lt),ue(Xt),ie(64*Kt,"0",Ut)].join("")}(Lt,le,_t),[4,fetch(Dt.serverURL+"/transactions",{headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionData:{from:Lt,params:[Ft.address,ve]}}),method:"POST"})];case 6:if(!(Ce=Me.sent()).ok)throw new Error(Ce.statusText);return[4,Ce.json()];case 7:return[2,Me.sent().txHash];case 8:if(-1!==(Re=Me.sent()).message.indexOf("User denied message signature"))throw new Qe(Re.message,je.USER_DENIED);throw Re instanceof Qe?Re:(log("An error occurred trying to send the meta transaction. Error:",Re.message),new Qe(Re.message,je.UNKNOWN));case 9:return[2]}var Se}))}))}var Xe=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"CHILD_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CHILD_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROOT_CHAIN_ID_BYTES",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"}],Ye=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"discountTokens",type:"address[]"},{indexed:!1,internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"DiscountTokensSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"ERC20Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC721Upgradeable",name:"tokenERC721",type:"address"}],name:"ERC721Set",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"maxSupply",type:"uint256"}],name:"MaxSupplySet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"multPrice",type:"uint256"}],name:"PriceSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"}],name:"TimeWindowSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"balance",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"for_account",type:"address"}],name:"getPrice",outputs:[{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSupply",outputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"},{internalType:"uint256",name:"currentSupply",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTimeWindow",outputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isWindowOpen",outputs:[{internalType:"bool",name:"use_discount",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"maxPrice",type:"uint256"}],name:"mintCompi",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"discountTokens",type:"address[]"},{internalType:"bool[]",name:"discountTokensIsERC1155",type:"bool[]"}],name:"setDiscountTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20Upgradeable",name:"tokenERC20",type:"address"}],name:"setERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC721PresetMinterPauserAutoIdUpgradeable",name:"tokenERC721",type:"address"}],name:"setERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"maxSupply",type:"uint32"}],name:"setMaxSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"multPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"}],name:"setTimeWindow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"withdrawBalance",outputs:[],stateMutability:"nonpayable",type:"function"}],Ke=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"contractURI",type:"string"}],name:"ContractURISet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PAUSER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"baseTokenURI",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"__contractURI",type:"string"}],name:"setContractURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],Ze=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"userAddress",type:"address"},{indexed:!1,internalType:"address payable",name:"relayerAddress",type:"address"},{indexed:!1,internalType:"bytes",name:"functionSignature",type:"bytes"}],name:"MetaTransactionExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"string",name:"answer",type:"string"}],name:"QuestionAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionMuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"uint256",name:"questionId",type:"uint256"}],name:"QuestionRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"scene",type:"string"},{indexed:!1,internalType:"string",name:"question",type:"string"}],name:"QuestionUnmuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contract",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"nameSet",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ERC712_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"string",name:"answer",type:"string"}],name:"addQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"bytes",name:"functionSignature",type:"bytes"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"uint8",name:"sigV",type:"uint8"}],name:"executeMetaTransaction",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"getAnswer",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeperator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"uint256",name:"offset",type:"uint256"}],name:"getQuestions",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"}],name:"getQuestionsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"domainSeparator",type:"string"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"isQuestionMuted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"muteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"},{internalType:"uint256",name:"questionId",type:"uint256"}],name:"removeQuestion",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"setName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_contract",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"scene",type:"string"},{internalType:"string",name:"question",type:"string"}],name:"unmuteQuestion",outputs:[],stateMutability:"nonpayable",type:"function"}],$e=function(){function e(E,O){if(E!=Se.MUMBAI&&E!=Se.MATIC&&E!=Se.MOCKUP)throw new Error("Network not found: "+E);if(O!=Me.COMPICACTUS&&O!=Me.VOXTER)throw new Error("Character not found: "+O);this.contracts=this.getContracts(O),this.character=O,this.network=E,E==Se.MUMBAI?(this.provider=new Pt.HTTPProvider("https://matic-mumbai.chainstacklabs.com/"),this.mana_contract=this.contracts.mana.mumbai,this.minter_contract=this.contracts.minter.mumbai,this.pfp_contract=this.contracts.pfp.mumbai,this.brain_contract=this.contracts.brain.mumbai):E==Se.MATIC&&(this.provider=new Pt.HTTPProvider("https://rpc-mainnet.maticvigil.com"),this.mana_contract=this.contracts.mana.matic,this.minter_contract=this.contracts.minter.matic,this.pfp_contract=this.contracts.pfp.matic,this.brain_contract=this.contracts.brain.matic),this.metaRequestManager=new Pt.RequestManager(this.provider)}return e.prototype.getContracts=function(E){var O;return E==Me.COMPICACTUS?O={matic:{address:"0xB1Eb9BE1Cf04a19448355893ca357f6F010b03B6",name:"CompiPFP"},mumbai:{address:"0xcF904EeCa0dC1d99E6c4Be05f6C9a733041Ce093",name:"CompiPFP"}}:E==Me.VOXTER&&(O={matic:{address:"0x764e5a8c9ca14b456f5afbf31bfb2fa7f1e002b6",name:"Voxters"},mumbai:{address:"",name:""}}),{mana:{matic:{version:"1",abi:Xe,address:"0xA1c57f48F0Deb89f569dFbE6E2B7f46D33606fD4",name:"(PoS) Decentraland MANA",chainId:137},mumbai:{version:"1",abi:Xe,address:"0x4dA830330048be6380f102a83d3B94ea318bc598",name:"Decentraland MANA (PoS)",chainId:80001}},minter:{matic:{version:"1",abi:Ye,address:"0x2E88409bD7eBc3A7b68b808994E2873645b1128D",name:"CompiMinter",chainId:137},mumbai:{version:"1",abi:Ye,address:"0x0d7c91B526bA1334be837a82e92d6ca47ac6bCD7",name:"CompiMinter",chainId:80001}},pfp:{matic:{version:"1",abi:Ke,address:O.matic.address,name:O.matic.name,chainId:137},mumbai:{version:"1",abi:Ke,address:O.mumbai.address,name:O.mumbai.name,chainId:80001}},brain:{matic:{version:"1",abi:Ze,address:"0x89e2558091D28290B834ddd42e59E2b72D07Fe0B",name:"CompiBrain",chainId:137},mumbai:{version:"1",abi:Ze,address:"0x308aF74242aFb7bC598Ff1ced52De1D3E6cb02d7",name:"CompiBrain",chainId:80001}}}},e.prototype.getFunction=function(E,O){for(var _t=0;_t<O.length;_t++)if("function"==O[_t].type&&O[_t].name==E)return O[_t];throw new Error("Function not found: "+E)},e.prototype.prepareMetaTransaction=function(E,O){return c(this,void 0,void 0,(function(){var Ft;return y(this,(function(Dt){switch(Dt.label){case 0:return[4,_t.getProvider()];case 1:return Ft=Dt.sent(),[2,me(new Pt.RequestManager(Ft),this.metaRequestManager,E.data,O)]}}))}))},e.prototype.getFactory=function(E){return c(this,void 0,void 0,(function(){var O;return y(this,(function(_t){switch(_t.label){case 0:return O=new Pt.RequestManager(this.provider),[4,new Pt.ContractFactory(O,E.abi).at(E.address)];case 1:return[2,_t.sent()]}}))}))},e.prototype.waitTX=function(E){return c(this,void 0,void 0,(function(){var O,_t;return y(this,(function(Ft){switch(Ft.label){case 0:O=new Pt.RequestManager(this.provider),_t=null,Ft.label=1;case 1:return null!=_t?[3,3]:(g(2e3),[4,O.eth_getTransactionReceipt(E.toString())]);case 2:return _t=Ft.sent(),[3,1];case 3:return[2,_t]}}))}))},e.prototype.getPrice=function(){return c(this,void 0,void 0,(function(){var E,_t=this;return y(this,(function(Ft){switch(Ft.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer([1e19,!1])];case 1:return[2,Ft.sent()];case 2:return[4,O.getUserPublicKey()];case 3:return E=Ft.sent(),log("publicKeyRequest",E),[2,this.getFactory(this.minter_contract).then((function(O){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,O.getPrice(E)];case 1:return[2,_t.sent()]}}))}))}))]}}))}))},e.prototype.wei2human=function(E){return Pt.fromWei(E,"ether")},e.prototype.isWindowOpen=function(){return c(this,void 0,void 0,(function(){var E=this;return y(this,(function(O){return[2,this.getFactory(this.minter_contract).then((function(O){return c(E,void 0,void 0,(function(){return y(this,(function(E){switch(E.label){case 0:return[4,O.isWindowOpen()];case 1:return[2,E.sent()]}}))}))}))]}))}))},e.prototype.getTimeWindow=function(){return c(this,void 0,void 0,(function(){var E=this;return y(this,(function(O){return[2,this.getFactory(this.minter_contract).then((function(O){return c(E,void 0,void 0,(function(){return y(this,(function(E){switch(E.label){case 0:return[4,O.getTimeWindow()];case 1:return[2,E.sent()]}}))}))}))]}))}))},e.prototype.mintCompi=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft=this;return y(this,(function(Dt){return O=new Pt.SolidityFunction(this.getFunction("mintCompi",Ye)),_t=O.toPayload([E]),log(_t),[2,this.prepareMetaTransaction(_t,this.minter_contract).then((function(E){return c(Ft,void 0,void 0,(function(){return y(this,(function(O){return log("increaseAllowance TX ",E),[2,this.waitTX(E)]}))}))})).then().catch()]}))}))},e.prototype.balance=function(){return c(this,void 0,void 0,(function(){var E,_t=this;return y(this,(function(Ft){switch(Ft.label){case 0:return[4,O.getUserPublicKey()];case 1:return E=Ft.sent(),[2,this.getFactory(this.mana_contract).then((function(O){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,O.balanceOf(E)];case 1:return[2,_t.sent()]}}))}))}))]}}))}))},e.prototype.increaseAllowance=function(E){return c(this,void 0,void 0,(function(){var O,_t,Ft=this;return y(this,(function(Dt){return O=new Pt.SolidityFunction(this.getFunction("increaseAllowance",Xe)),_t=O.toPayload([this.minter_contract.address,E]),log(_t),[2,this.prepareMetaTransaction(_t,this.mana_contract).then((function(E){return c(Ft,void 0,void 0,(function(){return y(this,(function(O){return log("increaseAllowance TX ",E),[2,this.waitTX(E)]}))}))})).then().catch()]}))}))},e.prototype.balanceOf=function(){return c(this,void 0,void 0,(function(){var E,_t=this;return y(this,(function(Ft){switch(Ft.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(3)];case 1:return[2,Ft.sent()];case 2:return[4,O.getUserPublicKey()];case 3:return E=Ft.sent(),log("publicKeyRequest",E),[2,this.getFactory(this.pfp_contract).then((function(O){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,O.balanceOf(E)];case 1:return[2,_t.sent()]}}))}))}))]}}))}))},e.prototype.tokenOfOwnerByIndex=function(E){return c(this,void 0,void 0,(function(){var _t,Ft=this;return y(this,(function(Pt){switch(Pt.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(E)];case 1:return[2,Pt.sent()];case 2:return[4,O.getUserPublicKey()];case 3:return _t=Pt.sent(),log("publicKeyRequest",_t),[2,this.getFactory(this.pfp_contract).then((function(O){return c(Ft,void 0,void 0,(function(){return y(this,(function(Ft){switch(Ft.label){case 0:return[4,O.tokenOfOwnerByIndex(_t,E)];case 1:return[2,Ft.sent()]}}))}))}))]}}))}))},e.prototype.getName=function(E){return c(this,void 0,void 0,(function(){var O=this;return y(this,(function(_t){switch(_t.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer("Mockup Name")];case 1:return[2,_t.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(_t){return c(O,void 0,void 0,(function(){return y(this,(function(O){switch(O.label){case 0:return[4,_t.getName(this.pfp_contract.address,E)];case 1:return[2,O.sent()]}}))}))}))]}}))}))},e.prototype.getQuestionsCount=function(E){return c(this,void 0,void 0,(function(){var O=this;return y(this,(function(_t){switch(_t.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(30)];case 1:return[2,_t.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(_t){return c(O,void 0,void 0,(function(){return y(this,(function(O){switch(O.label){case 0:return[4,_t.getQuestionsCount(this.pfp_contract.address,E,"default")];case 1:return[2,O.sent()]}}))}))}))]}}))}))},e.prototype.setName=function(E,O){return c(this,void 0,void 0,(function(){var _t,Ft,Dt=this;return y(this,(function(Lt){switch(Lt.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,Lt.sent()];case 2:return _t=new Pt.SolidityFunction(this.getFunction("setName",Ze)),Ft=_t.toPayload([this.pfp_contract.address,E,O]),log(Ft),[2,this.prepareMetaTransaction(Ft,this.brain_contract).then((function(E){return c(Dt,void 0,void 0,(function(){return y(this,(function(O){return log("setName TX ",E),[2,this.waitTX(E)]}))}))})).then().catch()]}}))}))},e.prototype.addQuestion=function(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Dt,Lt=this;return y(this,(function(Ut){switch(Ut.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(0)];case 1:return[2,Ut.sent()];case 2:return Ft=new Pt.SolidityFunction(this.getFunction("addQuestion",Ze)),Dt=Ft.toPayload([this.pfp_contract.address,E,"default",O,_t]),log(Dt),[2,this.prepareMetaTransaction(Dt,this.brain_contract).then((function(E){return c(Lt,void 0,void 0,(function(){return y(this,(function(O){return log("addQuestion TX ",E),[2,this.waitTX(E)]}))}))})).then().catch()]}}))}))},e.prototype.removeQuestion=function(E,O,_t){return c(this,void 0,void 0,(function(){var Ft,Dt,Lt=this;return y(this,(function(Ut){switch(Ut.label){case 0:return this.network!=Se.MOCKUP?[3,2]:(log("removeQuestion",O,_t),[4,this.mockupAnswer(0)]);case 1:return[2,Ut.sent()];case 2:return Ft=new Pt.SolidityFunction(this.getFunction("removeQuestion",Ze)),Dt=Ft.toPayload([this.pfp_contract.address,E,"default",O,_t]),log(Dt),[2,this.prepareMetaTransaction(Dt,this.brain_contract).then((function(E){return c(Lt,void 0,void 0,(function(){return y(this,(function(O){return log("removeQuestion TX ",E),[2,this.waitTX(E)]}))}))})).then().catch()]}}))}))},e.prototype.getAnswer=function(E,O){return c(this,void 0,void 0,(function(){var _t=this;return y(this,(function(Ft){switch(Ft.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer("This is an answer to "+E+" "+O)];case 1:return[2,Ft.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(Ft){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,Ft.getAnswer(this.pfp_contract.address,E,"default",O)];case 1:return[2,_t.sent()]}}))}))}))]}}))}))},e.prototype.getQuestions=function(E,O){return c(this,void 0,void 0,(function(){var _t=this;return y(this,(function(Ft){switch(Ft.label){case 0:return this.network!=Se.MOCKUP?[3,2]:[4,this.mockupAnswer(this.getMockupQuestions(E,O))];case 1:return[2,Ft.sent()];case 2:return[2,this.getFactory(this.brain_contract).then((function(Ft){return c(_t,void 0,void 0,(function(){return y(this,(function(_t){switch(_t.label){case 0:return[4,Ft.getQuestions(this.pfp_contract.address,E,"default",O)];case 1:return[2,_t.sent()]}}))}))}))]}}))}))},e.prototype.getMockupQuestions=function(E,O){var _t,Ft=[];_t=O<20?10:O<30?3:0;for(var Pt=0;Pt<10;Pt++)Ft.push("");for(Pt=0;Pt<_t;Pt++)Ft[Pt]="Q "+Pt+" ("+E+", "+O+")";return Ft},e.prototype.mockupAnswer=function(E){return c(this,void 0,void 0,(function(){var O;return y(this,(function(_t){return O=500+500*Math.random(),0==E&&(O=100),g(O),[2,E]}))}))},e}();E.Blockchain=$e,E.CHARACTER=Me,E.CompiNPC=ze,E.CompiNPCSystem=Le,E.Compicactus=Ut,E.NETWORK=Se,Object.defineProperty(E,"__esModule",{value:!0})})),define("@dcl/crypto-scene-utils",["exports","@decentraland/EthereumController","@decentraland/EnvironmentAPI","eth-connect","@decentraland/web3-provider","@dcl/ecs-scene-utils"],(function(E,O,_t,Ft,Pt,Dt){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Lt,Ut,Xt,Kt,Zt,le,p=function(){return(p=Object.assign||function(E){for(var O,_t=1,Ft=arguments.length;_t<Ft;_t++)for(var Pt in O=arguments[_t])Object.prototype.hasOwnProperty.call(O,Pt)&&(E[Pt]=O[Pt]);return E}).apply(this,arguments)};function y(E,O,_t,Ft){return new(_t||(_t=Promise))((function(Pt,Dt){function r(E){try{o(Ft.next(E))}catch(E){Dt(E)}}function d(E){try{o(Ft.throw(E))}catch(E){Dt(E)}}function o(E){var O;E.done?Pt(E.value):(O=E.value,O instanceof _t?O:new _t((function(E){E(O)}))).then(r,d)}o((Ft=Ft.apply(E,O||[])).next())}))}function b(E,O){var _t,Ft,Pt,Dt,Lt={label:0,sent:function(){if(1&Pt[0])throw Pt[1];return Pt[1]},trys:[],ops:[]};return Dt={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(Dt[Symbol.iterator]=function(){return this}),Dt;function d(Dt){return function(Ut){return function(Dt){if(_t)throw new TypeError("Generator is already executing.");for(;Lt;)try{if(_t=1,Ft&&(Pt=2&Dt[0]?Ft.return:Dt[0]?Ft.throw||((Pt=Ft.return)&&Pt.call(Ft),0):Ft.next)&&!(Pt=Pt.call(Ft,Dt[1])).done)return Pt;switch(Ft=0,Pt&&(Dt=[2&Dt[0],Pt.value]),Dt[0]){case 0:case 1:Pt=Dt;break;case 4:return Lt.label++,{value:Dt[1],done:!1};case 5:Lt.label++,Ft=Dt[1],Dt=[0];continue;case 7:Dt=Lt.ops.pop(),Lt.trys.pop();continue;default:if(!((Pt=(Pt=Lt.trys).length>0&&Pt[Pt.length-1])||6!==Dt[0]&&2!==Dt[0])){Lt=0;continue}if(3===Dt[0]&&(!Pt||Dt[1]>Pt[0]&&Dt[1]<Pt[3])){Lt.label=Dt[1];break}if(6===Dt[0]&&Lt.label<Pt[1]){Lt.label=Pt[1],Pt=Dt;break}if(Pt&&Lt.label<Pt[2]){Lt.label=Pt[2],Lt.ops.push(Dt);break}Pt[2]&&Lt.ops.pop(),Lt.trys.pop();continue}Dt=O.call(E,Lt)}catch(E){Dt=[6,E],Ft=0}finally{_t=Pt=0}if(5&Dt[0])throw Dt[1];return{value:Dt[0]?Dt[1]:void 0,done:!0}}([Dt,Ut])}}}function m(E){var O="function"==typeof Symbol&&Symbol.iterator,_t=O&&E[O],Ft=0;if(_t)return _t.call(E);if(E&&"number"==typeof E.length)return{next:function(){return E&&Ft>=E.length&&(E=void 0),{value:E&&E[Ft++],done:!E}}};throw new TypeError(O?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(E,O){var _t="function"==typeof Symbol&&E[Symbol.iterator];if(!_t)return E;var Ft,Pt,Dt=_t.call(E),Lt=[];try{for(;(void 0===O||O-- >0)&&!(Ft=Dt.next()).done;)Lt.push(Ft.value)}catch(E){Pt={error:E}}finally{try{Ft&&!Ft.done&&(_t=Dt.return)&&_t.call(Dt)}finally{if(Pt)throw Pt.error}}return Lt}function x(){for(var E=[],O=0;O<arguments.length;O++)E=E.concat(f(arguments[O]));return E}function v(){return _t.getCurrentRealm().then((function(E){return"http://127.0.0.1:8000"!=E.domain?E.domain:"https://peer.decentraland.org"}))}function g(E,O){var _t=O.id,Ft=O.data,Pt=O.rarity,Dt=O.i18n,Lt=O.thumbnail,Ut=O.image,Xt=Ft.category,Kt=Ft.tags,le=Ft.hides,ve=Ft.replaces,Ce=Ft.representations.map(T),Re=Lt.substring(Lt.lastIndexOf("/")+1),Me=Ut?Ut.substring(Ut.lastIndexOf("/")+1):void 0;return{id:_t,type:Zt.Wearable,category:Xt,tags:Kt,hides:le,replaces:ve,rarity:Pt,representations:Ce,i18n:Dt,thumbnail:Re,image:Me,baseUrl:E+"/content/contents/"}}function T(E){var O=E.contents,_t=E.bodyShapes,Ft=function(E,O){var _t={};for(var Ft in E)Object.prototype.hasOwnProperty.call(E,Ft)&&O.indexOf(Ft)<0&&(_t[Ft]=E[Ft]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var Pt=0;for(Ft=Object.getOwnPropertySymbols(E);Pt<Ft.length;Pt++)O.indexOf(Ft[Pt])<0&&Object.prototype.propertyIsEnumerable.call(E,Ft[Pt])&&(_t[Ft[Pt]]=E[Ft[Pt]])}return _t}(E,["contents","bodyShapes"]),Pt=O.map((function(E){var O=E.key,_t=E.url;return{file:O,hash:_t.substring(_t.lastIndexOf("/")+1)}}));return p(p({},Ft),{bodyShapes:_t,contents:Pt})}function h(E){return y(this,void 0,void 0,(function(){var _t,Ft;return b(this,(function(Pt){switch(Pt.label){case 0:return E?(Ft="https://peer.decentraland.org",[3,3]):[3,1];case 1:return[4,v()];case 2:Ft=Pt.sent(),Pt.label=3;case 3:return _t=Ft,E?[3,5]:[4,O.getUserAccount().then((function(E){return E.toLowerCase()}))];case 4:E=Pt.sent(),Pt.label=5;case 5:return[4,fetch(_t+"/content/entities/profiles?pointer="+(null==E?void 0:E.toLowerCase())).then((function(E){return E.json()})).then((function(E){return E.length?E[0]:E}))];case 6:return[2,Pt.sent()]}}))}))}function _(E){return y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le,ve;return b(this,(function(Ce){switch(Ce.label){case 0:return E?[3,2]:[4,O.getUserAccount()];case 1:E=Ce.sent(),Ce.label=2;case 2:return[4,v()];case 3:return _t=Ce.sent(),[4,fetch(_t+"/lambdas/collections/wearables-by-owner/"+E)];case 4:return[4,Ce.sent().json()];case 5:Ft=Ce.sent(),Pt=[];try{for(Dt=m(Ft),Lt=Dt.next();!Lt.done;Lt=Dt.next())for(Ut=Lt.value,Xt=Ut.urn,Kt=Ut.amount,Zt=0;Zt<Kt;Zt++)Pt.push(Xt)}catch(E){le={error:E}}finally{try{Lt&&!Lt.done&&(ve=Dt.return)&&ve.call(Dt)}finally{if(le)throw le.error}}return[2,Pt]}}))}))}function w(E){return y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le,ve,Ce;return b(this,(function(Re){switch(Re.label){case 0:return E?[3,2]:[4,O.getUserAccount()];case 1:E=Re.sent(),Re.label=2;case 2:return[4,v()];case 3:return _t=Re.sent(),[4,fetch(_t+"/lambdas/collections/wearables-by-owner/"+E+"?includeDefinitions")];case 4:return[4,Re.sent().json()];case 5:Ft=Re.sent(),Pt=[];try{for(Dt=m(Ft),Lt=Dt.next();!Lt.done;Lt=Dt.next())if(Ut=Lt.value,Xt=Ut.definition,Kt=Ut.amount,Xt)for(Zt=g(_t,Xt),le=0;le<Kt;le++)Pt.push(Zt)}catch(E){ve={error:E}}finally{try{Lt&&!Lt.done&&(Ce=Dt.return)&&Ce.call(Dt)}finally{if(ve)throw ve.error}}return[2,Pt]}}))}))}function A(E,O){return void 0===O&&(O=!1),y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,le,ve,Ce,Re;return b(this,(function(Me){switch(Me.label){case 0:return _t=E.map(I),O?[4,M()]:[3,2];case 1:Ft=Me.sent(),Pt=Ft.map(I);try{for(Dt=m(Pt),Lt=Dt.next();!Lt.done;Lt=Dt.next())if(Zt=Lt.value,-1!=_t.indexOf(Zt))return[2,!0]}catch(E){le={error:E}}finally{try{Lt&&!Lt.done&&(ve=Dt.return)&&ve.call(Dt)}finally{if(le)throw le.error}}return[3,4];case 2:return[4,_()];case 3:Ut=Me.sent();try{for(Xt=m(Ut),Kt=Xt.next();!Kt.done;Kt=Xt.next())if(Zt=Kt.value,-1!=_t.indexOf(Zt))return[2,!0]}catch(E){Ce={error:E}}finally{try{Kt&&!Kt.done&&(Re=Xt.return)&&Re.call(Xt)}finally{if(Ce)throw Ce.error}}Me.label=4;case 4:return[2,!1]}}))}))}function M(){var E;return y(this,void 0,void 0,(function(){var O;return b(this,(function(_t){switch(_t.label){case 0:return[4,h()];case 1:return O=_t.sent(),[2,null===(E=O.metadata.avatars[0])||void 0===E?void 0:E.avatar.wearables]}}))}))}!function(E){E.BodyShape="body_shape",E.Earring="earring",E.Empty="",E.Eyebrows="eyebrows",E.Eyes="eyes",E.Eyewear="eyewear",E.FacialHair="facial_hair",E.Feet="feet",E.Hair="hair",E.Hat="hat",E.Head="head",E.Helmet="helmet",E.LowerBody="lower_body",E.Mask="mask",E.Mouth="mouth",E.Tiara="tiara",E.TopHead="top_head",E.UpperBody="upper_body"}(Lt||(Lt={})),function(E){E.En="en",E.Es="es"}(Ut||(Ut={})),function(E){E.Unique="unique",E.Legendary="legendary",E.Mythic="mythic",E.Epic="epic",E.Rare="rare",E.Uncommon="uncommon",E.Common="common"}(Xt||(Xt={})),function(E){E.Basefemale="Basefemale",E.DCLBaseAvatarsBaseFemale="dcl://base-avatars/BaseFemale",E.DCLBaseAvatarsBaseMale="dcl://base-avatars/BaseMale"}(Kt||(Kt={})),function(E){E.Wearable="wearable"}(Zt||(Zt={})),function(E){E[E.none=0]="none",E[E.common=1]="common",E[E.uncommon=2]="uncommon",E[E.rare=3]="rare",E[E.epic=4]="epic",E[E.mythic=5]="mythic",E[E.legendary=6]="legendary",E[E.unique=7]="unique"}(le||(le={}));var ve=0;function k(E){var O=0;switch(E){case"common":O=1;break;case"uncommon":O=2;break;case"rare":O=3;break;case"epic":O=4;break;case"mythic":O=5;break;case"legendary":O=6;break;case"unique":O=7}O>ve&&(ve=O)}function I(E){if(E.indexOf("dcl://")<0)return E;var O=f(E.replace("dcl://","").split("/"),2),_t=O[0],Ft=O[1];return"base-avatars"===_t?"urn:decentraland:off-chain:base-avatars:"+Ft:"urn:decentraland:ethereum:collections-v1:"+_t+":"+Ft}var Ce=Object.freeze({__proto__:null,getUserInfo:h,getUserInventory:_,getUserFullInventory:w,itemInInventory:function(E,O){return void 0===O&&(O=!1),A([E],O)},itemsInInventory:A,equipedItems:M,rarestItem:function(E){var O;return void 0===E&&(E=!1),y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,Ce,Re,Me,Se,Ie,Fe,Pe;return b(this,(function(Ne){switch(Ne.label){case 0:return[4,h()];case 1:return _t=Ne.sent(),[4,w()];case 2:if(Ft=Ne.sent(),!_t||!Ft)return[2,le.none];if(E)try{for(Pt=m(null===(O=_t.metadata.avatars[0])||void 0===O?void 0:O.avatar.wearables),Dt=Pt.next();!Dt.done;Dt=Pt.next()){Lt=Dt.value;try{for(Se=void 0,Ut=m(Ft),Xt=Ut.next();!Xt.done;Xt=Ut.next())Ce=Xt.value,Lt==Ce.id&&Ce.rarity&&k(Ce.rarity)}catch(E){Se={error:E}}finally{try{Xt&&!Xt.done&&(Ie=Ut.return)&&Ie.call(Ut)}finally{if(Se)throw Se.error}}}}catch(E){Re={error:E}}finally{try{Dt&&!Dt.done&&(Me=Pt.return)&&Me.call(Pt)}finally{if(Re)throw Re.error}}else try{for(Kt=m(Ft),Zt=Kt.next();!Zt.done;Zt=Kt.next())(Ce=Zt.value).rarity&&k(Ce.rarity)}catch(E){Fe={error:E}}finally{try{Zt&&!Zt.done&&(Pe=Kt.return)&&Pe.call(Kt)}finally{if(Fe)throw Fe.error}}return log(le[ve]),[2,ve]}}))}))},updateRarity:k,getPlayerSnapshots:function(E){return y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Ft){switch(Ft.label){case 0:return E?[3,2]:[4,h()];case 1:O=Ft.sent(),E=O.id,Ft.label=2;case 2:return[4,v()];case 3:return _t=Ft.sent(),[4,fetch(_t+"/lambdas/profiles?field=snapshots&id="+E.toLowerCase()).then((function(E){return E.json()})).then((function(E){return E[0].avatars.length?E[0].avatars[0].avatar.snapshots:null}))];case 4:return[2,Ft.sent()]}}))}))}}),Re=Object.freeze({__proto__:null,signMessage:function(E){return y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt;return b(this,(function(Lt){switch(Lt.label){case 0:return[4,O.convertMessageToObject(E)];case 1:return _t=Lt.sent(),[4,O.signMessage(_t)];case 2:return Ft=Lt.sent(),Pt=Ft.message,Dt=Ft.signature,[2,{message:Pt,signature:Dt}]}}))}))}}),Me=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];function S(E){return new Promise((function(O,_t){var Ft=new Entity;engine.addEntity(Ft),Ft.addComponent(new Dt.Delay(E,(function(){O(),engine.removeEntity(Ft)})))}))}function N(E){return y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Dt){switch(Dt.label){case 0:return[4,Pt.getProvider()];case 1:return O=Dt.sent(),_t=new Ft.RequestManager(O),[4,new Ft.ContractFactory(_t,Me).at(E)];case 2:return[2,{contract:Dt.sent(),provider:O,requestManager:_t}]}}))}))}function L(E,_t,Ft,Pt){return void 0===Pt&&(Pt=!1),y(this,void 0,void 0,(function(){var Dt,Lt,Ut,Xt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,N(E)];case 1:return Dt=le.sent(),Lt=Dt.contract,Ut=Dt.requestManager,[4,O.getUserAccount()];case 2:return Xt=le.sent(),[4,Lt.transfer(_t.toLowerCase(),Ft,{from:Xt})];case 3:if(Kt=le.sent(),Zt=null,!Pt)return[3,8];le.label=4;case 4:return null!=Zt?[3,7]:[4,S(2e3)];case 5:return le.sent(),[4,Ut.eth_getTransactionReceipt(Kt.toString())];case 6:return Zt=le.sent(),[3,4];case 7:return[2,Zt];case 8:return[2,Kt]}}))}))}function D(E,O,_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,N(E)];case 1:return[4,Ft.sent().contract.allowance(O,_t)];case 2:return[2,+Ft.sent()>1e24]}}))}))}function P(E,_t,Ft,Pt){return void 0===Ft&&(Ft=!1),void 0===Pt&&(Pt="0x0000000000000000001000000000000000000000000000000000000000000000"),y(this,void 0,void 0,(function(){var Dt,Lt,Ut,Xt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,N(E)];case 1:return Dt=le.sent(),Lt=Dt.contract,Ut=Dt.requestManager,[4,O.getUserAccount()];case 2:return Xt=le.sent(),[4,Lt.approve(_t,Pt,{from:Xt})];case 3:if(Kt=le.sent(),Zt=null,!Ft)return[3,8];le.label=4;case 4:return null!=Zt?[3,7]:[4,S(2e3)];case 5:return le.sent(),[4,Ut.eth_getTransactionReceipt(Kt.toString())];case 6:return Zt=le.sent(),[3,4];case 7:return[2,Zt];case 8:return[2,Kt]}}))}))}function B(E,O,_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,N(E)];case 1:return[4,Ft.sent().contract.allowance(O,_t)];case 2:return[2,Ft.sent()]}}))}))}function F(E,O){return y(this,void 0,void 0,(function(){return b(this,(function(_t){switch(_t.label){case 0:return[4,N(E)];case 1:return[4,_t.sent().contract.balanceOf(O)];case 2:return[2,_t.sent()]}}))}))}var Se=Object.freeze({__proto__:null,getContract:N,send:L,isApproved:D,setApproval:P,allowance:B,balance:F});function q(){return y(this,void 0,void 0,(function(){return b(this,(function(E){switch(E.label){case 0:return[4,O.getUserAccount()];case 1:return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",E.sent())]}}))}))}var Ie=Object.freeze({__proto__:null,send:function(E,O,_t){return void 0===_t&&(_t=!1),L("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",E.toLowerCase(),+Ft.toWei(O.toString(),"ether").toString(),_t)},myBalance:q,balance:function(E){return y(this,void 0,void 0,(function(){return b(this,(function(O){return[2,F("0x0f5d2fb29fb7d3cfee444a200298f468908cc942",E)]}))}))}}),Fe=[{constant:!0,inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address[]",name:"_beneficiaries",type:"address[]"},{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"}],name:"issueTokens",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_wearableId",type:"string"},{internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"addWearable",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"bytes32[]",name:"_wearableIds",type:"bytes32[]"},{internalType:"uint256[]",name:"_maxIssuances",type:"uint256[]"}],name:"addWearables",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_allowed",type:"bool"}],name:"setAllowed",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_baseURI",type:"string"}],name:"setBaseURI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_beneficiary",type:"address"},{internalType:"string",name:"_wearableId",type:"string"}],name:"issueToken",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"string",name:"_wearableId",type:"string"}],name:"getWearableKey",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"isComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"wearables",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"issued",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"allowed",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"wearablesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"maxIssuance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256[]",name:"_tokenIds",type:"uint256[]"}],name:"batchTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"completeCollection",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"address",name:"_operator",type:"address"},{internalType:"string",name:"_baseURI",type:"string"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_oldBaseURI",type:"string"},{indexed:!1,internalType:"string",name:"_newBaseURI",type:"string"}],name:"BaseURI",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_allowed",type:"bool"}],name:"Allowed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_maxIssuance",type:"uint256"}],name:"AddWearable",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_beneficiary",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!0,internalType:"bytes32",name:"_wearableIdKey",type:"bytes32"},{indexed:!1,internalType:"string",name:"_wearableId",type:"string"},{indexed:!1,internalType:"uint256",name:"_issuedId",type:"uint256"}],name:"Issue",type:"event"},{anonymous:!1,inputs:[],name:"Complete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}];function z(E){return y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Dt){switch(Dt.label){case 0:return[4,Pt.getProvider()];case 1:return O=Dt.sent(),_t=new Ft.RequestManager(O),[4,new Ft.ContractFactory(_t,Fe).at(E)];case 2:return[2,{contract:Dt.sent(),provider:O,requestManager:_t}]}}))}))}function W(E,O,_t){return void 0===_t&&(_t=!0),y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,z(E)];case 1:return[4,Ft.sent().contract.setApprovalForAll(O,_t)];case 2:return[2,!!Ft.sent()]}}))}))}function j(E,O,_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,z(E)];case 1:return[4,Ft.sent().contract.isApprovedForAll(O,_t)];case 2:return[2,!!Ft.sent()]}}))}))}var Pe=Object.freeze({__proto__:null,getContract:z,transfer:function(E,_t,Ft,Pt){return void 0===Pt&&(Pt=!1),y(this,void 0,void 0,(function(){var Dt,Lt,Ut,Xt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,z(E)];case 1:return Dt=le.sent(),Lt=Dt.contract,Ut=Dt.requestManager,[4,O.getUserAccount()];case 2:return Xt=le.sent(),[4,Lt.transferFrom(Xt.toLowerCase(),_t.toLowerCase(),Ft,{from:Xt})];case 3:if(Kt=le.sent(),Zt=null,!Pt)return[3,8];le.label=4;case 4:return null!=Zt?[3,7]:[4,S(2e3)];case 5:return le.sent(),[4,Ut.eth_getTransactionReceipt(Kt.toString())];case 6:return Zt=le.sent(),[3,4];case 7:return[2,Zt];case 8:return[2,Kt]}}))}))},setApprovalForAll:W,isApprovedForAll:j,checkTokens:function(E,_t){return y(this,void 0,void 0,(function(){var Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return[4,z(E)];case 1:return Ft=le.sent().contract,[4,O.getUserAccount()];case 2:return Pt=le.sent(),[4,Ft.balanceOf(Pt)];case 3:return Dt=le.sent(),0!=Number(Dt)?[3,4]:[2,!1];case 4:if(!_t)return[2,!0];Lt=!1,Ut=0,le.label=5;case 5:return Ut<Number(Dt)?(Kt=Number,[4,Ft.tokenOfOwnerByIndex(Pt,Ut)]):[3,8];case 6:if(Xt=Kt.apply(void 0,[le.sent()]),"number"==typeof _t){if(Xt==_t)return Lt=!0,[3,8]}else for(Zt=0;Zt<_t.length;Zt++)if(Xt==_t[Zt]){Lt=!0;break}le.label=7;case 7:return Ut++,[3,5];case 8:return[2,Lt]}}))}))}}),Ne=[{constant:!1,inputs:[{name:"_ownerCutPerMillion",type:"uint256"}],name:"setOwnerCutPerMillion",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_legacyNFTAddress",type:"address"}],name:"setLegacyNFTAddress",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ERC721_Interface",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"InterfaceId_ValidateFingerprint",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"acceptedToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"}],name:"cancelOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"},{name:"fingerprint",type:"bytes"}],name:"safeExecuteOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"ownerCutPerMillion",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"priceInWei",type:"uint256"},{name:"expiresAt",type:"uint256"}],name:"createOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"publicationFeeInWei",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"nftAddress",type:"address"},{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_publicationFee",type:"uint256"}],name:"setPublicationFee",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"contractName",type:"string"},{name:"migrationId",type:"string"}],name:"isMigrated",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_acceptedToken",type:"address"},{name:"_legacyNFTAddress",type:"address"},{name:"_owner",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"legacyNFTAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"assetId",type:"uint256"}],name:"auctionByAssetId",outputs:[{name:"",type:"bytes32"},{name:"",type:"address"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"orderByAssetId",outputs:[{name:"id",type:"bytes32"},{name:"seller",type:"address"},{name:"nftAddress",type:"address"},{name:"price",type:"uint256"},{name:"expiresAt",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"assetId",type:"uint256"},{name:"price",type:"uint256"}],name:"executeOrder",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"OrderCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"buyer",type:"address"}],name:"OrderSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"nftAddress",type:"address"}],name:"OrderCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"publicationFee",type:"uint256"}],name:"ChangedPublicationFee",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"ownerCutPerMillion",type:"uint256"}],name:"ChangedOwnerCutPerMillion",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"legacyNFTAddress",type:"address"}],name:"ChangeLegacyNFTAddress",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"priceInWei",type:"uint256"},{indexed:!1,name:"expiresAt",type:"uint256"}],name:"AuctionCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"},{indexed:!1,name:"totalPrice",type:"uint256"},{indexed:!0,name:"winner",type:"address"}],name:"AuctionSuccessful",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"id",type:"bytes32"},{indexed:!0,name:"assetId",type:"uint256"},{indexed:!0,name:"seller",type:"address"}],name:"AuctionCancelled",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"contractName",type:"string"},{indexed:!1,name:"migrationId",type:"string"}],name:"Migrated",type:"event"}];function Q(E){return void 0===E&&(E="0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539"),y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Dt){switch(Dt.label){case 0:return[4,Pt.getProvider()];case 1:return O=Dt.sent(),_t=new Ft.RequestManager(O),[4,new Ft.ContractFactory(_t,Ne).at(E)];case 2:return[2,{contract:Dt.sent(),provider:O,requestManager:_t}]}}))}))}var ze={MANAToken:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",LANDRegistry:"0xa57e126b341b18c262ad25b86bb4f65b5e2ade45",LANDProxy:"0xf87e31492faf9a91b02ee0deaad50d51d56d5d4d",TerraformReserve:"0xcca95e580bbbd04851ebfb85f77fd46c9b91f11c",ReturnVesting:"0x79c1fdaba012b9a094c495a86ce5c6199cf86368",LegacyMarketplace:"0xb3bca6f5052c7e24726b44da7403b56a8a1b98f8",Marketplace:"0x19a8ed4860007a66805782ed7e0bed4e44fc6717",MarketplaceProxy:"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539",ServiceLocator:"0x151b11892dd6ab1f91055dcd01d23d03a2c47570",MortgageHelper:"0x90263ea5c57dc6603ca7202920735a6e31235bb9",MortgageManager:"0x9abf1295086afa0e49c60e95c437aa400c5333b8",RCNEngine:"0xba5a17f8ad40dc2c955d95c0547f3e6318bd72e7",RCNToken:"0xf970b8e36e23f7fc3fd752eea86f8be8d83375a6",KyberOracle:"0x2aaf69a2df2828b55fa4a5e30ee8c3c7cd9e5d5b",DecentralandInvite:"0xf886313f213c198458eba7ae9329525e64eb763a",EstateRegistry:"0x1784ef41af86e97f8d28afe95b573a24aeda966e",EstateProxy:"0x959e104e1a4db6317fa58f8295f586e1a978c297",LANDAuction:"0x54b7a124b44054da3692dbc56b116a35c6a3e561",MANABurner:"0xadfeb1de7876fcabeaf87df5a6c566b70f970018",MultiSigWallet:"0x4eac6325e1dbf1ac90434d39766e164dca71139e",Nobody:"0xDf861993Edbe95BAFbfA7760838f8ebbd5Afda9F",ERC721Bid:"0xe479dfd9664c693b2e2992300930b00bfde08233",BidMANABurner:"0x0fcf114c63a5387878e0da051c81cb6febd93b6c",MultisigContractOwner:"0xefc549434a03756f6e37a43757a2927605d8839b",AvatarNameRegistry:"0x894b883905bfEe2CC448880F1b59f4A762E67566",AvatarNameRegistryProxy:"0xcd816354450015A5644857FEd507afEeaE7263af",ExclusiveMasksCollection:"0xc04528c14c8ffd84c7c1fb6719b4a89853035cdd",Halloween2019Collection:"0xc1f4b0eea2bd6690930e6c66efd3e197d620b9c2",Halloween2019CollectionFactory:"0x07ccfd0fbada4ac3c22ecd38037ca5e5c0ad8cfa",Xmas2019Collection:"0xc3af02c0fd486c8e9da5788b915d6fff3f049866",DCLRegistrar:"0x2a187453064356c898cae034eaed119e1663acb8",DCLController:"0x6843291bd86857d97f0d269e698939fb10d60772",Catalyst:"0xcc054fab08127c19f621ab83ade5962cd10584ec",CatalystProxy:"0x4a2f10076101650f40342885b99b6b101d83c486",MCHCollection:"0xf64dc33a192e056bb5f0e5049356a0498b502d50",CommunityContestCollection:"0x32b7495895264ac9d0b12d32afd435453458b1c6",DCLLaunchCollection:"0xd35147be6401dcb20811f2104c33de8e97ed6818",DCGCollection:"0x3163d2cfee3183f9874e2869942cc62649eeb004",StaySafeCollection:"0x201c3af8c471e5842428b74d1e7c0249adda2a92",StaySafeDonation:"0x56505a0313ba2b4bc0be23dbb7eb71b7885fca9e",ClaimWearableForFree:"0x8dd61d1a67bce13a87e20a76c6f164c388a726d6",Moonshot2020Collection:"0x6a99abebb48819d2abe92c5e4dc4f48dc09a3ee8",DAOAgent:"0x9A6ebE7E2a7722F8200d0ffB63a1F6406A0d7dce",LANDMiniMeToken:"0x20dfe381ca71ade2582094cf569a8cb020af5ab1",EstateMiniMeToken:"0x8568f23f343694650370fe5e254b55bfb704a6c7",BuyAdapter:"0xf4fbd84193f9aaf9779dedbb415a806933eb1c95",AdapterFeeCollector:"0x0d58aaae9f0c4d020486f534363f3fca7a6aecb6",AdapterConverter:"0x2859581da59bd4e16a866dd06b461b76d8e489a4",DappcraftMoonminerCollection:"0x1e1d4e6262787c8a8783a37fee698bd42aa42bec",DGSummer2020Collection:"0xbf53c33235cbfc22cef5a61a83484b86342679c5",PMOuttathisworldCollection:"0x75a3752579dc2d63ca229eebbe3537fbabf85a12",DgtbleHeadspaceCollection:"0x574f64ac2e7215cba9752b85fc73030f35166bc0",WonderzoneMeteorchaserCollection:"0x34ed0aa248f60f54dd32fbc9883d6137a491f4f3",BurningStore:"0x0822d44c2e2f96d4cccad80610134861802b2cca",BaseList:"0x21b6EFf834d7cc8c12A5Ec924939aa521F0FE83F",POIAllowListProxy:"0x0ef15a1c7a49429a36cb46d4da8c53119242b54e",NameDenyListProxy:"0x0c4c90a4f29872a2e9ef4c4be3d419792bca9a36"},De=Object.freeze({__proto__:null,mainnet:ze,ropsten:{PrivateNodeWallet:"0x62ba62ff92917edf8ac0386fa10e3b27950bce8d",MANAToken:"0x2a8fd99c19271f4f04b1b7b9c4f7cf264b626edb",LANDRegistry:"0x255baf4096cb1723c00c4b4390a4b3028ecaa8ba",LANDProxy:"0x7a73483784ab79257bb11b96fd62a2c3ae4fb75b",TerraformReserve:"0x4bc79175f1f6fded07f04aa1b4b0465ecff6f1b3",ReturnVesting:"0x58c7e6e382c1c19c132b0361c12cbc33e2b13076",LegacyMarketplace:"0x80faa2b517b84a5aec1078d3600eab4c0b3aff56",Marketplace:"0x3d2f10c76b115db93a418ed286ca0c5abfdbf5d0",MarketplaceProxy:"0x5424912699dabaa5f2998750c1c66e73d67ad219",ServiceLocator:"0xb240b30c12d2a9ea6ba3abbf663d9ae265fbebeb",MortgageHelper:"0x0e4c24f71c8679b8af8e5a22aac3816e2b23f1cc",MortgageManager:"0x31ebb4ffd5e34acfc87ea21a0c56157188f3f0e1",RCNEngine:"0xbeE217bfe06C6FAaa2d5f2e06eBB84C5fb70d9bF",RCNToken:"0x2f45b6fb2f28a73f110400386da31044b2e953d4",KyberOracle:"0x4931d0621360187199de494a1469165079b31bfc",DecentralandInvite:"0x7557dfa02f3bd7d274851e3f627de2ed2ff390e8",EstateRegistry:"0x60e315992d5e62457215dd1e6a49d1ceb7983dfc",EstateProxy:"0x124bf28a423b2ca80b3846c3aa0eb944fe7ebb95",ERC721Bid:"0x250fa138c0a994799c7a49df3097dc71e37b3d6f",BidMANABurner:"0x01f43c3133b83086d4776027fbd152fa8a685fb4",AvatarNameRegistry:"0xd127F8d9C736d91Acdee34645e0b4C9db7178160",AvatarNameRegistryProxy:"0x2d794a7c956624fb93Eb3ff6E48D5b5d6dBA127b",ExclusiveMasksCollection:"0x30ae57840b0e9b8ea55334083d53d80b2cfe80e0",DCLRegistrar:"0xeb6f5d94d79f0750781cc962908b161b95192f53",DCLController:"0xd4e92f6ea18412dbae8b2d2b69e498a2d1064fa2",Catalyst:"0xadd085f2318e9678bbb18b3e0711328f902b374b",BuyAdapter:"0xd1e4e2880ff56cd0d5c68da9bed58bfbf0150948",AdapterFeeCollector:"0x5DC888024cB599CfDdb9E6483ED6bAe1fA9e9D18",AdapterConverter:"0x2782eb28Dcb1eF4E7632273cd4e347e130Ce4646",POIAllowlist:"0x5DC4a5C214f2161F0D5595a6dDd9352409aE3Ab4",NAMEDenylist:"0x20c6f1e86eba703a14414a0cbc1b55c89dba7a0f"},kovan:{MANAToken:"0x230fc362413d9e862326c2c7084610a5a2fdf78a",LANDRegistry:"0x2059291430b9aa2F79547f657816eFb816b36614",LANDProxy:"0x537263c440943f6a6808bCb8CcB3fe03EE838aD1",Marketplace:"0x6f44f195999f06aeb5872db96cdc517f1e839f13"},rinkeby:{MANAToken:"0x28bce5263f5d7f4eb7e8c6d5d78275ca455bac63",LANDProxy:"0x28bef22df3e2040a4be64a9ca0e8b5ae2b91462d",LANDRegistry:"0xaf29226656fade9c97f51741e40f60c5bd67ee31",Multisig:"0x0de35b8b47b129877e0efca24e294b61d7e7eee3"},getContract:function(E,O){return y(this,void 0,void 0,(function(){var _t,Dt;return b(this,(function(Lt){switch(Lt.label){case 0:return[4,Pt.getProvider()];case 1:return _t=Lt.sent(),Dt=new Ft.RequestManager(_t),[4,new Ft.ContractFactory(Dt,O).at(E)];case 2:return[2,{contract:Lt.sent(),provider:_t,requestManager:Dt}]}}))}))}}),Le=Object.freeze({__proto__:null,getContract:Q,isAuthorizedAndHasBalance:function(E,_t){return y(this,void 0,void 0,(function(){var Pt,Dt,Lt;return b(this,(function(Ut){switch(Ut.label){case 0:return Pt=B,Dt=[ze.MANAToken],_t?(Lt=_t,[3,3]):[3,1];case 1:return[4,O.getUserAccount()];case 2:Lt=Ut.sent(),Ut.label=3;case 3:return[4,Pt.apply(void 0,Dt.concat([Lt,ze.MarketplaceProxy]))];case 4:return+Ut.sent()<+Ft.toWei(E,"ether").toString()?[2,!1]:[4,q()];case 5:return+Ut.sent()>=+Ft.toWei(E,"ether").toString()?[2,!0]:[2,!1]}}))}))},isAuthorizedAll:function(E){return y(this,void 0,void 0,(function(){var _t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt;return b(this,(function(le){switch(le.label){case 0:return E?[3,2]:[4,O.getUserAccount()];case 1:E=le.sent(),le.label=2;case 2:return Ft=(_t={buying:{mana:{address:ze.MANAToken,authorized:!1}},bidding:{mana:{address:ze.MANAToken,authorized:!1}},selling:{land:{address:ze.LANDProxy,authorized:!1},estates:{address:ze.EstateProxy,authorized:!1},exclusiveMasks:{address:ze.ExclusiveMasksCollection,authorized:!1},halloween:{address:ze.Halloween2019Collection,authorized:!1},xmas:{address:ze.Xmas2019Collection,authorized:!1},mch:{address:ze.MCHCollection,authorized:!1},communityContest:{address:ze.CommunityContestCollection,authorized:!1},dclLaunch:{address:ze.DCLLaunchCollection,authorized:!1},dcg:{address:ze.DCGCollection,authorized:!1},staySafe:{address:ze.StaySafeCollection,authorized:!1},names:{address:ze.DCLRegistrar,authorized:!1}}}).buying.mana,[4,D(ze.MANAToken,E,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")];case 3:return Ft.authorized=le.sent(),Pt=_t.bidding.mana,[4,D(ze.MANAToken,E,"0xe479dfd9664c693b2e2992300930b00bfde08233")];case 4:for(Lt in Pt.authorized=le.sent(),Dt=[],_t.selling)Dt.push(Lt);Ut=0,le.label=5;case 5:return Ut<Dt.length?(Xt=Dt[Ut],Kt=Xt,Zt=_t.selling[Kt],[4,j(_t.selling[Kt].address,E,"0x8e5660b4ab70168b5a6feea0e0315cb49c8cd539")]):[3,8];case 6:Zt.authorized=le.sent(),le.label=7;case 7:return Ut++,[3,5];case 8:return[2,_t]}}))}))},cancelOrder:function(E,_t){return y(this,void 0,void 0,(function(){var Ft,Pt;return b(this,(function(Dt){switch(Dt.label){case 0:return[4,Q()];case 1:return Ft=Dt.sent().contract,[4,O.getUserAccount()];case 2:return Pt=Dt.sent(),[4,Ft.cancelOrder(E,_t,{from:Pt})];case 3:return[2,Dt.sent()]}}))}))},createOrder:function(E,_t,Pt,Dt){return void 0===Dt&&(Dt=+new Date/1e3+2592e3),y(this,void 0,void 0,(function(){var Lt,Ut,Xt,Kt,Zt=this;return b(this,(function(le){switch(le.label){case 0:return[4,Q()];case 1:return Lt=le.sent(),Ut=Lt.contract,Xt=Lt.requestManager,[4,O.getUserAccount()];case 2:return Kt=le.sent(),[4,j(E,Kt,Ut.address)];case 3:return le.sent()?[3,5]:[4,W(E,Ut.address,!0).then((function(E){return y(Zt,void 0,void 0,(function(){var O;return b(this,(function(_t){switch(_t.label){case 0:O=null,_t.label=1;case 1:return null!=O?[3,4]:[4,S(2e3)];case 2:return _t.sent(),[4,Xt.eth_getTransactionReceipt(E.toString())];case 3:return O=_t.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:le.sent(),le.label=5;case 5:return[4,Ut.createOrder(E,_t,Ft.toWei(Pt,"ether").toString(),Dt,{from:Kt})];case 6:return[2,le.sent()]}}))}))},executeOrder:function(E,_t,Pt){return y(this,void 0,void 0,(function(){var Dt,Lt,Ut,Xt,Kt=this;return b(this,(function(Zt){switch(Zt.label){case 0:return[4,Q()];case 1:return Dt=Zt.sent(),Lt=Dt.contract,Ut=Dt.requestManager,[4,O.getUserAccount()];case 2:return[4,D("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",Xt=Zt.sent(),Lt.address)];case 3:return Zt.sent()?[3,5]:[4,P("0x0F5D2fB29fb7d3CFeE444a200298f468908cC942",Lt.address).then((function(E){return y(Kt,void 0,void 0,(function(){var O;return b(this,(function(_t){switch(_t.label){case 0:O=null,_t.label=1;case 1:return null!=O?[3,4]:[4,S(2e3)];case 2:return _t.sent(),[4,Ut.eth_getTransactionReceipt(E.toString())];case 3:return O=_t.sent(),[3,1];case 4:return[2]}}))}))}))];case 4:Zt.sent(),Zt.label=5;case 5:return[4,Lt.executeOrder(E,_t,Ft.toWei(Pt,"ether").toString(),{from:Xt})];case 6:return[2,Zt.sent()]}}))}))}}),Ue={data:[{symbol:"ETH",name:"Ethereum",address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,gasLimit:"0",sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"WETH",name:"Wrapped Ether",address:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",decimals:18,sp_limit_order:!0,is_quote:!0,quote_priority:2},{symbol:"KNC",name:"KyberNetwork",address:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200",decimals:18,sp_limit_order:!0},{symbol:"DAI",name:"DAI",address:"0x6b175474e89094c44da98b954eedeac495271d0f",decimals:18,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"OMG",name:"OmiseGO",address:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07",decimals:18,sp_limit_order:!0},{symbol:"SNT",name:"Status",address:"0x744d70fdbe2ba4cf95131626614a1763df805b9e",decimals:18,sp_limit_order:!0},{symbol:"ELF",name:"Aelf",address:"0xbf2179859fc6d5bee9bf9158632dc51678a4100e",decimals:18,sp_limit_order:!0},{symbol:"POWR",name:"Power Ledger",address:"0x595832f8fc6bf59c85c527fec3740a1b7a361269",decimals:6,sp_limit_order:!0},{symbol:"MANA",name:"Mana",address:"0x0f5d2fb29fb7d3cfee444a200298f468908cc942",decimals:18,sp_limit_order:!0},{symbol:"BAT",name:"Basic Attention Token",address:"0x0d8775f648430679a709e98d2b0cb6250d2887ef",decimals:18,sp_limit_order:!0},{symbol:"REQ",name:"Request",address:"0x8f8221afbb33998d8584a2b05749ba73c37a938a",decimals:18,listing_time:1588683600,sp_limit_order:!0},{symbol:"LINK",name:"Chain Link",address:"0x514910771af9ca656af840dff83e8264ecf986ca",decimals:18,sp_limit_order:!0},{symbol:"DGX",name:"Digix Gold Token",address:"0x4f3afec4e5a3f2a6a1a411def7d7dfe50ee057bf",decimals:9,gasApprove:12e4,gasLimit:"975000"},{symbol:"IOST",name:"IOStoken",address:"0xfa1a856cfa3409cfa145fa4e20eb270df3eb21ab",decimals:18},{symbol:"ENJ",name:"Enjin Coin",address:"0xf629cbd94d3791c9250152bd8dfbdf380e2a3b9c",decimals:18,sp_limit_order:!0},{symbol:"BLZ",name:"Bluzelle",address:"0x5732046a883704404f284ce41ffadd5b007fd668",decimals:18},{symbol:"POLY",name:"Polymath",address:"0x9992ec3cf6a55b00978cddf2b27bc6882d88d1ec",decimals:18},{symbol:"CVC",name:"Civic",address:"0x41e5560054824ea6b0732e656e3ad64e20e94e45",decimals:8},{symbol:"PAY",name:"TenX",address:"0xb97048628db6b661d4c2aa833e95dbe1a905b280",decimals:18,sp_limit_order:!0},{symbol:"BNT",name:"Bancor",address:"0x1f573d6fb3f13d689ff844b4ce37794d79a7ff1c",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"TUSD",name:"TrueUSD",address:"0x8dd5fbce2f6a956c3022ba3663759011dd51e73e",decimals:18,gasLimit:"780000",sp_limit_order:!0,is_quote:!0,quote_priority:3,is_gas_fixed:!0},{symbol:"LEND",name:"EthLend",address:"0x80fb784b7ed66730e8b1dbd9820afd29931aab03",decimals:18,sp_limit_order:!0},{symbol:"MTL",name:"Metal",address:"0xf433089366899d83a9f26a773d59ec7ecf30355e",decimals:8},{symbol:"REP",name:"Augur",address:"0x1985365e9f78359a9b6ad760e32412f4a445e862",decimals:18,sp_limit_order:!0},{symbol:"ZRX",name:"0x Protocol",address:"0xe41d2489571d322189246dafa5ebde1f4699f498",decimals:18,sp_limit_order:!0},{symbol:"REN",name:"Republic",address:"0x408e41876cccdc0f92210600ef50372656052a38",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"QKC",name:"QuarkChain",address:"0xea26c4ac16d4a5a106820bc8aee85fd0b7b2b664",decimals:18},{symbol:"MKR",name:"Maker",address:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2",decimals:18,gasLimit:"650000",sp_limit_order:!0},{symbol:"OST",name:"Open Simple Token",address:"0x2c4e8f2d746113d0696ce89b35f0d8bf88e0aeca",decimals:18,listing_time:1542027600},{symbol:"PT",name:"Promotion Token",address:"0x094c875704c14783049ddf8136e298b3a099c446",decimals:18,gasLimit:"650000"},{symbol:"ABYSS",name:"ABYSS",address:"0x0e8d6b471e332f140e7d9dbb99e5e3822f728da6",decimals:18,listing_time:1547560800,sp_limit_order:!0},{symbol:"WBTC",name:"Wrapped BTC",address:"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599",decimals:8,listing_time:1548853200,gasLimit:"650000",sp_limit_order:!0,is_quote:!0,quote_priority:1},{symbol:"MLN",name:"Melon Token",address:"0xec67005c4e498ec7f55e092bd1d35cbc47c91892",decimals:18,listing_time:1549321200,sp_limit_order:!0},{symbol:"USDC",name:"USD Coin",address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,listing_time:1549976400,gasLimit:"715000",sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"EURS",name:"STASIS EURS",address:"0xdb25f211ab05b1c97d595516f45794528a807ad8",decimals:2,listing_time:1549976400},{symbol:"MCO",name:"Monaco",address:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d",decimals:8,listing_time:1556283600},{symbol:"PAX",name:"Paxos Standard",address:"0x8e870d67f660d95d5be530380d0ec0bd388289e1",decimals:18,listing_time:1556542800,sp_limit_order:!0},{symbol:"GEN",name:"DAOStack",address:"0x543ff227f64aa17ea132bf9886cab5db55dcaddf",decimals:18,listing_time:1560258e3},{symbol:"LRC",name:"Loopring",address:"0xbbbbca6a901c926f240b89eacb641d8aec7aeafd",decimals:18,listing_time:1560258e3},{symbol:"RLC",name:"iExec RLC",address:"0x607f4c5bb672230e8672085532f7e901544a7375",decimals:9,listing_time:1560258e3,sp_limit_order:!0},{symbol:"NPXS",name:"Pundi X",address:"0xa15c7ebe1f07caf6bff097d8a589fb8ac49ae5b3",decimals:18,listing_time:1560258e3,sp_limit_order:!0},{symbol:"GNO",name:"Gnosis",address:"0x6810e776880c02933d47db1b9fc05908e5386b96",decimals:18,listing_time:1560862800,gasLimit:"780000"},{symbol:"MYB",name:"MyBit",address:"0x5d60d8d7ef6d37e16ebabc324de3be57f135e0bc",decimals:18,listing_time:1562245200},{symbol:"BAM",name:"Bamboo",address:"0x22b3faaa8df978f6bafe18aade18dc2e3dfa0e0c",decimals:18,listing_time:1562311800},{symbol:"SPN",name:"Sapien Network",address:"0x20f7a3ddf244dc9299975b4da1c39f8d5d75f05a",decimals:6,listing_time:1562677200},{symbol:"EQUAD",name:"Quadrant Protocol",address:"0xc28e931814725bbeb9e670676fabbcb694fe7df2",decimals:18,listing_time:1563195600},{symbol:"UPP",name:"Sentinel Protocol",address:"0xc86d054809623432210c107af2e3f619dcfbf652",decimals:18,listing_time:1563973200},{symbol:"CND",name:"Cindicator",address:"0xd4c435f5b09f855c3317c8524cb1f586e42795fa",decimals:18,listing_time:1593522e3},{symbol:"USDT",name:"Tether USD",address:"0xdac17f958d2ee523a2206206994597c13d831ec7",decimals:6,listing_time:1565960400,sp_limit_order:!0,is_quote:!0,quote_priority:3},{symbol:"SNX",name:"Synthetix Network",address:"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f",decimals:18,listing_time:1565960400,gasLimit:"975000",sp_limit_order:!0},{symbol:"BTU",name:"BTU Protocol",address:"0xb683d83a532e2cb7dfa5275eed3698436371cc9f",decimals:18,listing_time:156933e4},{symbol:"TKN",name:"Monolith",address:"0xaaaf91d9b90df800df4f55c205fd6989c977e73a",decimals:8,listing_time:156933e4},{symbol:"RAE",name:"Receive Access Ecosystem",address:"0xe5a3229ccb22b6484594973a03a3851dcd948756",decimals:18,listing_time:157365e4},{symbol:"SUSD",name:"sUSD",address:"0x57ab1ec28d129707052df4df418d58a2d46d5f51",decimals:18,listing_time:1574686800,gasLimit:"650000"},{symbol:"SPIKE",name:"Spiking",address:"0xa7fc5d2453e3f68af0cc1b78bcfee94a1b293650",decimals:10,listing_time:1575637200},{symbol:"SAN",name:"Santiment",address:"0x7c5a0ce9267ed19b22f8cae653f198e3e8daf098",decimals:18,listing_time:1575896400},{symbol:"USDS",name:"StableUSD",address:"0xa4bdb11dc0a2bec88d24a3aa1e6bb17201112ebe",decimals:6,listing_time:1576328400},{symbol:"NEXXO",name:"Nexxo",address:"0x278a83b64c3e3e1139f8e8a52d96360ca3c69a3d",decimals:18,listing_time:1576846800},{symbol:"EKG",name:"Ekon Gold",address:"0x6a9b3e36436b7abde8c4e2e2a98ea40455e615cf",decimals:18,listing_time:157797e4},{symbol:"ANT",name:"Aragon",address:"0x960b236a07cf122663c4303350609a66a7b288c0",decimals:18,listing_time:1578488400,gasLimit:"520000"},{symbol:"GDC",name:"Global Digital Content",address:"0x301c755ba0fca00b1923768fffb3df7f4e63af31",decimals:18,listing_time:1579611600,gasLimit:"600000"},{symbol:"AMPL",name:"Ampleforth",address:"0xd46ba6d942050d489dbd938a2c909a5d5039a161",decimals:9,listing_time:1580389200,sp_limit_order:!0},{symbol:"TKX",name:"Tokenize Xchange",address:"0x667102bd3413bfeaa3dffb48fa8288819e480a88",decimals:8,listing_time:1580994e3},{symbol:"MET",name:"Metronome",address:"0xa3d58c4e56fedcae3a7c43a725aee9a71f0ece4e",decimals:18,listing_time:1581944400},{symbol:"MFG",name:"SyncFab",address:"0x6710c63432a2de02954fc0f851db07146a6c0312",decimals:18,listing_time:1582203600},{symbol:"FXC",name:"Flexacoin",address:"0x4a57e687b9126435a9b19e4a802113e266adebde",decimals:18,listing_time:1582808400},{symbol:"UBT",name:"Unibright",address:"0x8400d94a5cb0fa0d041a3788e395285d61c9ee5e",decimals:8,listing_time:1583154e3,gasLimit:"650000",sp_limit_order:!0},{symbol:"LOOM",name:"Loom Network",address:"0xa4e8c3ec456107ea67d3075bf9e3df3a75823db0",decimals:18,listing_time:1583499600},{symbol:"PBTC",name:"pTokens BTC",address:"0x5228a22e72ccc52d415ecfd199f99d0665e7733b",decimals:18,listing_time:1583758800},{symbol:"OGN",name:"Origin Protocol",address:"0x8207c1ffc5b6804f6024322ccf34f29c3541ae26",decimals:18,listing_time:1584018e3},{symbol:"BAND",name:"Band Protocol",address:"0xba11d00c5f74255f56a5e366f4f77f5a186d7f55",decimals:18,listing_time:1586264400,gasLimit:"650000",sp_limit_order:!0},{symbol:"RSV",name:"Reserve",address:"0x196f4727526ea7fb1e17b2071b3d8eaa38486988",decimals:18,listing_time:1586782800},{symbol:"RSR",name:"Reserve Rights",address:"0x8762db106b2c2a0bccb3a80d1ed41273552616e8",decimals:18,listing_time:1586782800},{symbol:"KEY",name:"SelfKey",address:"0x4cc19356f2d37338b9802aa8e8fc58b0373296e7",decimals:18,listing_time:1587128400},{symbol:"PNK",name:"Kleros",address:"0x93ed3fbe21207ec2e8f2d3c3de6e058cb73bc04d",decimals:18,listing_time:1587646800},{symbol:"GHT",name:"Global Human Trust",address:"0xbe30f684d62c9f7883a75a29c162c332c0d98f23",decimals:18,listing_time:1588683600},{symbol:"TRYB",name:"BiLira",address:"0x2c537e5624e4af88a7ae4060c022609376c8d0eb",decimals:6,listing_time:1589202e3},{symbol:"2KEY",name:"TwoKeyEconomy",address:"0xE48972fCd82a274411c01834e2f031D4377Fa2c0",decimals:18,listing_time:1589893200},{symbol:"PLR",name:"Pillar",address:"0xe3818504c1b32bf1557b16c238b2e01fd3149c17",decimals:18,listing_time:1589979600},{symbol:"BUSD",name:"Binance USD",address:"0x4fabb145d64652a948d72533023f6e7a623c7c53",decimals:18,listing_time:1590584400},{symbol:"QNT",name:"Quant",address:"0x4a220e6096b25eadb88358cb44068a3248254675",decimals:18,listing_time:1591016400},{symbol:"PNT",name:"pNetwork Token",address:"0x89Ab32156e46F46D02ade3FEcbe5Fc4243B9AAeD",decimals:18,listing_time:1592917200},{symbol:"COMP",name:"Compound",address:"0xc00e94cb662c3520282e6f5717214004a7f26888",decimals:18,listing_time:1593608400},{symbol:"BZRX",name:"bZx Protocol Token",address:"0x56d811088235f11c8920698a204a5010a788f4b3",decimals:18,listing_time:1594833120},{symbol:"RENBTC",name:"renBTC",address:"0xeb4c2781e4eba804ce9a9803c67d0893436bb27d",decimals:8,listing_time:1595336400},{symbol:"VIDT",name:"V-ID blockchain",address:"0x445f51299ef3307dbd75036dd896565f5b4bf7a5",decimals:18,listing_time:1596114e3},{symbol:"PLTC",name:"pTokens LTC",address:"0x5979f50f1d4c08f9a53863c2f39a7b0492c38d0f",decimals:18,listing_time:1596459600},{symbol:"KAI",name:"KardiaChain",address:"0xbd6467a31899590474ce1e84f70594c53d628e46",decimals:18,listing_time:1596632400},{symbol:"REPV2",name:"Kyber REPv2 Token",address:"0x221657776846890989a759ba2973e427dff5c9bb",decimals:18,listing_time:1596718800},{symbol:"STMX",name:"Kyber StormX Token",address:"0xbe9375c6a420d2eeb258962efb95551a5b722803",decimals:18,listing_time:1596718800},{symbol:"MATIC",name:"MATIC Token",address:"0x7d1afa7b718fb893db30a3abc0cfc608aacfebb0",decimals:18,listing_time:1598446800}],success:!0},qe=[{inputs:[{internalType:"address",name:"_admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAdmin",type:"address"},{indexed:!1,internalType:"address",name:"previousAdmin",type:"address"}],name:"AdminClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newAlerter",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"AlerterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"EtherWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"trader",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"src",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"dest",type:"address"},{indexed:!1,internalType:"address",name:"destAddress",type:"address"},{indexed:!1,internalType:"uint256",name:"actualSrcAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualDestAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"platformWallet",type:"address"},{indexed:!1,internalType:"uint256",name:"platformFeeBps",type:"uint256"}],name:"ExecuteTrade",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberHint",name:"kyberHintHandler",type:"address"}],name:"KyberHintHandlerSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IKyberNetwork",name:"newKyberNetwork",type:"address"},{indexed:!1,internalType:"contract IKyberNetwork",name:"previousKyberNetwork",type:"address"}],name:"KyberNetworkSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOperator",type:"address"},{indexed:!1,internalType:"bool",name:"isAdd",type:"bool"}],name:"OperatorAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"sendTo",type:"address"}],name:"TokenWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pendingAdmin",type:"address"}],name:"TransferAdminPending",type:"event"},{inputs:[{internalType:"address",name:"newAlerter",type:"address"}],name:"addAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOperator",type:"address"}],name:"addOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"enabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAlerters",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"}],name:"getExpectedRate",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"},{internalType:"uint256",name:"worstRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"srcQty",type:"uint256"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"getExpectedRateAfterFee",outputs:[{internalType:"uint256",name:"expectedRate",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getOperators",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberHintHandler",outputs:[{internalType:"contract IKyberHint",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"kyberNetwork",outputs:[{internalType:"contract IKyberNetwork",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"alerter",type:"address"}],name:"removeAlerter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"removeOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberHint",name:"_kyberHintHandler",type:"address"}],name:"setHintHandler",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IKyberNetwork",name:"_kyberNetwork",type:"address"}],name:"setKyberNetwork",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapEtherToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToEther",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"uint256",name:"minConversionRate",type:"uint256"}],name:"swapTokenToToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"}],name:"trade",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract ERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract ERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"walletId",type:"address"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"src",type:"address"},{internalType:"uint256",name:"srcAmount",type:"uint256"},{internalType:"contract IERC20",name:"dest",type:"address"},{internalType:"address payable",name:"destAddress",type:"address"},{internalType:"uint256",name:"maxDestAmount",type:"uint256"},{internalType:"uint256",name:"minConversionRate",type:"uint256"},{internalType:"address payable",name:"platformWallet",type:"address"},{internalType:"uint256",name:"platformFeeBps",type:"uint256"},{internalType:"bytes",name:"hint",type:"bytes"}],name:"tradeWithHintAndFee",outputs:[{internalType:"uint256",name:"destAmount",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAdmin",type:"address"}],name:"transferAdminQuickly",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address payable",name:"sendTo",type:"address"}],name:"withdrawEther",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"sendTo",type:"address"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}];function ee(E){return y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Dt){switch(Dt.label){case 0:return[4,Pt.getProvider()];case 1:return O=Dt.sent(),_t=new Ft.RequestManager(O),[4,new Ft.ContractFactory(_t,qe).at(E)];case 2:return[2,{contract:Dt.sent(),provider:O,requestManager:_t}]}}))}))}function te(){return y(this,void 0,void 0,(function(){return b(this,(function(E){return[2,Ue]}))}))}function ne(E){return y(this,void 0,void 0,(function(){var O,_t,Ft,Pt,Dt;return b(this,(function(Lt){try{for(O=m(Ue.data),_t=O.next();!_t.done;_t=O.next()){if((Ft=_t.value).symbol==E)return[2,Ft];if(Ft.name==E)return[2,Ft];if(Ft.address==E)return[2,Ft]}}catch(E){Pt={error:E}}finally{try{_t&&!_t.done&&(Dt=O.return)&&Dt.call(O)}finally{if(Pt)throw Pt.error}}return[2]}))}))}function ae(E,O,_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,fetch("https://api.kyber.network/expectedRate?source="+E+"&dest="+O+"&sourceAmount="+_t).then((function(E){return E.json()}))];case 1:return[2,Ft.sent()]}}))}))}var He=Object.freeze({__proto__:null,getContract:ee,getCurrencies:te,getACurrency:ne,getMarketPair:function(){return y(this,void 0,void 0,(function(){return b(this,(function(E){switch(E.label){case 0:return[4,fetch("https://api.kyber.network/pairs/market",{headers:{}}).then((function(E){return E.json()}))];case 1:return[2,E.sent()]}}))}))},getQuote:function(E,O,_t){return y(this,void 0,void 0,(function(){return b(this,(function(Ft){switch(Ft.label){case 0:return[4,fetch("https://api.kyber.network/quote_amount?quote="+O+"&base="+E+"&base_amount="+_t+"&type=buy").then((function(E){return E.json()}))];case 1:return[2,Ft.sent()]}}))}))},getExpectedRate:ae,exchange:function(E,_t,Pt,Dt){return y(this,void 0,void 0,(function(){var Lt,Ut,Xt,Kt,Zt,le,ve,Ce,Re,Me,Se,Ie;return b(this,(function(Fe){switch(Fe.label){case 0:return[4,te()];case 1:Lt=Fe.sent(),Ut="",Xt="";try{for(Kt=m(Lt.data),Zt=Kt.next();!Zt.done;Zt=Kt.next())(le=Zt.value).symbol.toLowerCase()==E.toLowerCase()?Ut=le.address:le.symbol.toLowerCase()==_t.toLowerCase()&&(Xt=le.address)}catch(E){Se={error:E}}finally{try{Zt&&!Zt.done&&(Ie=Kt.return)&&Ie.call(Kt)}finally{if(Se)throw Se.error}}return[4,ne(Ut)];case 2:return ve=Fe.sent(),Ce=Ft.toBigNumber(Pt).times("1e"+(null==ve?void 0:ve.decimals)).toString(),[4,O.getUserAccount()];case 3:return Re=Fe.sent(),[4,ae(Ut,Xt,Ce)];case 4:return Me=Fe.sent(),[4,ee("0x818E6FECD516Ecc3849DAf6845e3EC868087B755")];case 5:return Fe.sent().contract.tradeWithHint(Ut,Ce,Xt,Re,"0x57896044618658097711785492504343953926634992332820282019728792003956564819968",Dt?Me.expectedRate*((100-Dt)/100):Me.slippageRate,"0x440bbd6a888a36de6e2f6a25f65bc4e16874faa9",[parseInt("0x5045524d")]),[2]}}))}))}}),Ge=Object.freeze({__proto__:null,kyberswap:He}),je=Object.freeze({__proto__:null,getListOfWearables:function(E){return y(this,void 0,void 0,(function(){var O,_t;return b(this,(function(Ft){switch(Ft.label){case 0:return O=function(E){var O="";for(var _t in E){var Ft=E[_t];if(Ft){var Pt="s"===_t.substr(_t.length-1)?_t.slice(0,-1):_t,Dt=void 0;Dt=Array.isArray(Ft)?x(Ft).map((function(E){return""+E})):[""+Ft],O+=0===O.length?"?":"&",O+=Pt+"="+Dt.join("&"+Pt+"=")}}return O}(E),[4,v()];case 1:return _t=Ft.sent(),[2,fetch(_t+"/lambdas/collections/wearables"+O).then((function(E){return E.json()})).then((function(E){return E.wearables})).then((function(E){return E.map((function(E){return g(_t,E)}))}))]}}))}))}});E.avatar=Ce,E.contract=De,E.currency=Se,E.ethereum=Re,E.mana=Ie,E.marketplace=Le,E.nft=Pe,E.services=Ge,E.wearable=je,Object.defineProperty(E,"__esModule",{value:!0})})),function(E,O){"object"==typeof exports&&"undefined"!=typeof module?O(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],O):O((E="undefined"!=typeof globalThis?globalThis:E||self).ethconnect={})}(this,(function(E){function e(E){if(E.jsonrpc="2.0",!E.id||"number"!=typeof E.id||Math.floor(E.id)!==E.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(E)}`);if(!E.method||"string"!=typeof E.method||0===E.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(E)}`);if(!E.params||"object"!=typeof E.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(E)}`);return E}function n(E,O){return E(O={exports:{}},O.exports),O.exports}var O,_t=n((function(E,O){function n(){let E,O;const _t=new Promise(((Ft,Pt)=>{E=E=>{Ft(E),_t.isPending=!1},O=E=>{Pt(E),_t.isPending=!1}})).catch((E=>Promise.reject(E)));return _t.resolve=E,_t.reject=O,"finally"in _t||(_t.finally=E=>{_t.then(E),_t.catch(E)}),_t.isPending=!0,_t}Object.defineProperty(O,"__esModule",{value:!0}),O.future=n,O.default=n}));(O=_t)&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")&&O.default;var Ft=_t.future,Pt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var Dt=a,Lt=c;function h(E){if(Dt===setTimeout)return setTimeout(E,0);if((Dt===a||!Dt)&&setTimeout)return Dt=setTimeout,setTimeout(E,0);try{return Dt(E,0)}catch(O){try{return Dt.call(null,E,0)}catch(O){return Dt.call(this,E,0)}}}"function"==typeof Pt.setTimeout&&(Dt=setTimeout),"function"==typeof Pt.clearTimeout&&(Lt=clearTimeout);var Ut,Xt=[],Kt=!1,Zt=-1;function m(){Kt&&Ut&&(Kt=!1,Ut.length?Xt=Ut.concat(Xt):Zt=-1,Xt.length&&y())}function y(){if(!Kt){var E=h(m);Kt=!0;for(var O=Xt.length;O;){for(Ut=Xt,Xt=[];++Zt<O;)Ut&&Ut[Zt].run();Zt=-1,O=Xt.length}Ut=null,Kt=!1,function(E){if(Lt===clearTimeout)return clearTimeout(E);if((Lt===c||!Lt)&&clearTimeout)return Lt=clearTimeout,clearTimeout(E);try{Lt(E)}catch(O){try{return Lt.call(null,E)}catch(O){return Lt.call(this,E)}}}(E)}}function w(E,O){this.fun=E,this.array=O}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var le=v,ve=v,Ce=v,Re=v,Me=v,Se=v,Ie=v,Fe=Pt.performance||{},Pe=Fe.now||Fe.mozNow||Fe.msNow||Fe.oNow||Fe.webkitNow||function(){return(new Date).getTime()},Ne=new Date,ze={nextTick:function(E){var O=new Array(arguments.length-1);if(arguments.length>1)for(var _t=1;_t<arguments.length;_t++)O[_t-1]=arguments[_t];Xt.push(new w(E,O)),1!==Xt.length||Kt||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:le,addListener:ve,once:Ce,off:Re,removeListener:Me,removeAllListeners:Se,emit:Ie,binding:function(E){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(E){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(E){var O=.001*Pe.call(Fe),_t=Math.floor(O),Ft=Math.floor(O%1*1e9);return E&&(_t-=E[0],(Ft-=E[1])<0&&(_t--,Ft+=1e9)),[_t,Ft]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ne)/1e3}},De=n((function(E){!function(){var O="input is invalid type",_t="object"==typeof window,Ft=_t?window:{};Ft.JS_SHA3_NO_WINDOW&&(_t=!1);var Dt=!_t&&"object"==typeof self;!Ft.JS_SHA3_NO_NODE_JS&&"object"==typeof ze&&ze.versions&&ze.versions.node?Ft=Pt:Dt&&(Ft=self);var Lt=!Ft.JS_SHA3_NO_COMMON_JS&&E.exports,Ut=!Ft.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Xt="0123456789abcdef".split(""),Kt=[4,1024,262144,67108864],Zt=[0,8,16,24],le=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],ve=[224,256,384,512],Ce=[128,256],Re=["hex","buffer","arrayBuffer","array","digest"],Me={128:168,256:136};!Ft.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(E){return"[object Array]"===Object.prototype.toString.call(E)}),!Ut||!Ft.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(E){return"object"==typeof E&&E.buffer&&E.buffer.constructor===ArrayBuffer});for(var m=function(E,O,_t){return function(Ft){return new C(E,O,E).update(Ft)[_t]()}},y=function(E,O,_t){return function(Ft,Pt){return new C(E,O,Pt).update(Ft)[_t]()}},w=function(E,O,_t){return function(O,Ft,Pt,Dt){return Ie["cshake"+E].update(O,Ft,Pt,Dt)[_t]()}},v=function(E,O,_t){return function(O,Ft,Pt,Dt){return Ie["kmac"+E].update(O,Ft,Pt,Dt)[_t]()}},b=function(E,O,_t,Ft){for(var Pt=0;Pt<Re.length;++Pt){var Dt=Re[Pt];E[Dt]=O(_t,Ft,Dt)}return E},_=function(E,O){var _t=m(E,O,"hex");return _t.create=function(){return new C(E,O,E)},_t.update=function(E){return _t.create().update(E)},b(_t,m,E,O)},Se=[{name:"keccak",padding:[1,256,65536,16777216],bits:ve,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:ve,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Ce,createMethod:function(E,O){var _t=y(E,O,"hex");return _t.create=function(_t){return new C(E,O,_t)},_t.update=function(E,O){return _t.create(O).update(E)},b(_t,y,E,O)}},{name:"cshake",padding:Kt,bits:Ce,createMethod:function(E,O){var _t=Me[E],Ft=w(E,0,"hex");return Ft.create=function(Ft,Pt,Dt){return Pt||Dt?new C(E,O,Ft).bytepad([Pt,Dt],_t):Ie["shake"+E].create(Ft)},Ft.update=function(E,O,_t,Pt){return Ft.create(O,_t,Pt).update(E)},b(Ft,w,E,O)}},{name:"kmac",padding:Kt,bits:Ce,createMethod:function(E,O){var _t=Me[E],Ft=v(E,0,"hex");return Ft.create=function(Ft,Pt,Dt){return new I(E,O,Pt).bytepad(["KMAC",Dt],_t).bytepad([Ft],_t)},Ft.update=function(E,O,_t,Pt){return Ft.create(E,_t,Pt).update(O)},b(Ft,v,E,O)}}],Ie={},Fe=[],Pe=0;Pe<Se.length;++Pe)for(var Ne=Se[Pe],De=Ne.bits,Le=0;Le<De.length;++Le){var Ue=Ne.name+"_"+De[Le];if(Fe.push(Ue),Ie[Ue]=Ne.createMethod(De[Le],Ne.padding),"sha3"!==Ne.name){var qe=Ne.name+De[Le];Fe.push(qe),Ie[qe]=Ie[Ue]}}function C(E,O,_t){this.blocks=[],this.s=[],this.padding=O,this.outputBits=_t,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(E<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=_t>>5,this.extraBytes=(31&_t)>>3;for(var Ft=0;Ft<50;++Ft)this.s[Ft]=0}function I(E,O,_t){C.call(this,E,O,_t)}C.prototype.update=function(E){if(this.finalized)throw new Error("finalize already called");var _t,Ft=typeof E;if("string"!==Ft){if("object"!==Ft)throw new Error(O);if(null===E)throw new Error(O);if(Ut&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!(Array.isArray(E)||Ut&&ArrayBuffer.isView(E)))throw new Error(O);_t=!0}for(var Pt,Dt,Lt=this.blocks,Xt=this.byteCount,Kt=E.length,le=this.blockCount,ve=0,Ce=this.s;ve<Kt;){if(this.reset)for(this.reset=!1,Lt[0]=this.block,Pt=1;Pt<le+1;++Pt)Lt[Pt]=0;if(_t)for(Pt=this.start;ve<Kt&&Pt<Xt;++ve)Lt[Pt>>2]|=E[ve]<<Zt[3&Pt++];else for(Pt=this.start;ve<Kt&&Pt<Xt;++ve)(Dt=E.charCodeAt(ve))<128?Lt[Pt>>2]|=Dt<<Zt[3&Pt++]:Dt<2048?(Lt[Pt>>2]|=(192|Dt>>6)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|63&Dt)<<Zt[3&Pt++]):Dt<55296||Dt>=57344?(Lt[Pt>>2]|=(224|Dt>>12)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|Dt>>6&63)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|63&Dt)<<Zt[3&Pt++]):(Dt=65536+((1023&Dt)<<10|1023&E.charCodeAt(++ve)),Lt[Pt>>2]|=(240|Dt>>18)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|Dt>>12&63)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|Dt>>6&63)<<Zt[3&Pt++],Lt[Pt>>2]|=(128|63&Dt)<<Zt[3&Pt++]);if(this.lastByteIndex=Pt,Pt>=Xt){for(this.start=Pt-Xt,this.block=Lt[le],Pt=0;Pt<le;++Pt)Ce[Pt]^=Lt[Pt];P(Ce),this.reset=!0}else this.start=Pt}return this},C.prototype.encode=function(E,O){var _t=255&E,Ft=1,Pt=[_t];for(_t=255&(E>>=8);_t>0;)Pt.unshift(_t),_t=255&(E>>=8),++Ft;return O?Pt.push(Ft):Pt.unshift(Ft),this.update(Pt),Pt.length},C.prototype.encodeString=function(E){var _t,Ft=typeof E;if("string"!==Ft){if("object"!==Ft)throw new Error(O);if(null===E)throw new Error(O);if(Ut&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!(Array.isArray(E)||Ut&&ArrayBuffer.isView(E)))throw new Error(O);_t=!0}var Pt=0,Dt=E.length;if(_t)Pt=Dt;else for(var Lt=0;Lt<E.length;++Lt){var Xt=E.charCodeAt(Lt);Xt<128?Pt+=1:Xt<2048?Pt+=2:Xt<55296||Xt>=57344?Pt+=3:(Xt=65536+((1023&Xt)<<10|1023&E.charCodeAt(++Lt)),Pt+=4)}return Pt+=this.encode(8*Pt),this.update(E),Pt},C.prototype.bytepad=function(E,O){for(var _t=this.encode(O),Ft=0;Ft<E.length;++Ft)_t+=this.encodeString(E[Ft]);var Pt=O-_t%O,Dt=[];return Dt.length=Pt,this.update(Dt),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var E=this.blocks,O=this.lastByteIndex,_t=this.blockCount,Ft=this.s;if(E[O>>2]|=this.padding[3&O],this.lastByteIndex===this.byteCount)for(E[0]=E[_t],O=1;O<_t+1;++O)E[O]=0;for(E[_t-1]|=2147483648,O=0;O<_t;++O)Ft[O]^=E[O];P(Ft)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var E,O=this.blockCount,_t=this.s,Ft=this.outputBlocks,Pt=this.extraBytes,Dt=0,Lt=0,Ut="";Lt<Ft;){for(Dt=0;Dt<O&&Lt<Ft;++Dt,++Lt)E=_t[Dt],Ut+=Xt[E>>4&15]+Xt[15&E]+Xt[E>>12&15]+Xt[E>>8&15]+Xt[E>>20&15]+Xt[E>>16&15]+Xt[E>>28&15]+Xt[E>>24&15];Lt%O==0&&(P(_t),Dt=0)}return Pt&&(E=_t[Dt],Ut+=Xt[E>>4&15]+Xt[15&E],Pt>1&&(Ut+=Xt[E>>12&15]+Xt[E>>8&15]),Pt>2&&(Ut+=Xt[E>>20&15]+Xt[E>>16&15])),Ut},C.prototype.arrayBuffer=function(){this.finalize();var E,O=this.blockCount,_t=this.s,Ft=this.outputBlocks,Pt=this.extraBytes,Dt=0,Lt=0,Ut=this.outputBits>>3;E=Pt?new ArrayBuffer(Ft+1<<2):new ArrayBuffer(Ut);for(var Xt=new Uint32Array(E);Lt<Ft;){for(Dt=0;Dt<O&&Lt<Ft;++Dt,++Lt)Xt[Lt]=_t[Dt];Lt%O==0&&P(_t)}return Pt&&(Xt[Dt]=_t[Dt],E=E.slice(0,Ut)),E},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var E,O,_t=this.blockCount,Ft=this.s,Pt=this.outputBlocks,Dt=this.extraBytes,Lt=0,Ut=0,Xt=[];Ut<Pt;){for(Lt=0;Lt<_t&&Ut<Pt;++Lt,++Ut)E=Ut<<2,O=Ft[Lt],Xt[E]=255&O,Xt[E+1]=O>>8&255,Xt[E+2]=O>>16&255,Xt[E+3]=O>>24&255;Ut%_t==0&&P(Ft)}return Dt&&(E=Ut<<2,O=Ft[Lt],Xt[E]=255&O,Dt>1&&(Xt[E+1]=O>>8&255),Dt>2&&(Xt[E+2]=O>>16&255)),Xt},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(E){var O,_t,Ft,Pt,Dt,Lt,Ut,Xt,Kt,Zt,ve,Ce,Re,Me,Se,Ie,Fe,Pe,Ne,ze,De,Le,Ue,qe,He,Ge,je,We,Ve,Qe,Xe,Ye,Ke,Ze,$e,Je,tn,en,nn,rn,on,an,sn,un,cn,pn,ln,dn,yn,hn,mn,gn,bn,vn,wn,_n,Tn,xn,An,Cn,En,Rn,Mn;for(Ft=0;Ft<48;Ft+=2)Pt=E[0]^E[10]^E[20]^E[30]^E[40],Dt=E[1]^E[11]^E[21]^E[31]^E[41],Lt=E[2]^E[12]^E[22]^E[32]^E[42],Ut=E[3]^E[13]^E[23]^E[33]^E[43],Xt=E[4]^E[14]^E[24]^E[34]^E[44],Kt=E[5]^E[15]^E[25]^E[35]^E[45],Zt=E[6]^E[16]^E[26]^E[36]^E[46],ve=E[7]^E[17]^E[27]^E[37]^E[47],O=(Ce=E[8]^E[18]^E[28]^E[38]^E[48])^(Lt<<1|Ut>>>31),_t=(Re=E[9]^E[19]^E[29]^E[39]^E[49])^(Ut<<1|Lt>>>31),E[0]^=O,E[1]^=_t,E[10]^=O,E[11]^=_t,E[20]^=O,E[21]^=_t,E[30]^=O,E[31]^=_t,E[40]^=O,E[41]^=_t,O=Pt^(Xt<<1|Kt>>>31),_t=Dt^(Kt<<1|Xt>>>31),E[2]^=O,E[3]^=_t,E[12]^=O,E[13]^=_t,E[22]^=O,E[23]^=_t,E[32]^=O,E[33]^=_t,E[42]^=O,E[43]^=_t,O=Lt^(Zt<<1|ve>>>31),_t=Ut^(ve<<1|Zt>>>31),E[4]^=O,E[5]^=_t,E[14]^=O,E[15]^=_t,E[24]^=O,E[25]^=_t,E[34]^=O,E[35]^=_t,E[44]^=O,E[45]^=_t,O=Xt^(Ce<<1|Re>>>31),_t=Kt^(Re<<1|Ce>>>31),E[6]^=O,E[7]^=_t,E[16]^=O,E[17]^=_t,E[26]^=O,E[27]^=_t,E[36]^=O,E[37]^=_t,E[46]^=O,E[47]^=_t,O=Zt^(Pt<<1|Dt>>>31),_t=ve^(Dt<<1|Pt>>>31),E[8]^=O,E[9]^=_t,E[18]^=O,E[19]^=_t,E[28]^=O,E[29]^=_t,E[38]^=O,E[39]^=_t,E[48]^=O,E[49]^=_t,Me=E[0],Se=E[1],pn=E[11]<<4|E[10]>>>28,ln=E[10]<<4|E[11]>>>28,We=E[20]<<3|E[21]>>>29,Ve=E[21]<<3|E[20]>>>29,Cn=E[31]<<9|E[30]>>>23,En=E[30]<<9|E[31]>>>23,an=E[40]<<18|E[41]>>>14,sn=E[41]<<18|E[40]>>>14,Ze=E[2]<<1|E[3]>>>31,$e=E[3]<<1|E[2]>>>31,Ie=E[13]<<12|E[12]>>>20,Fe=E[12]<<12|E[13]>>>20,dn=E[22]<<10|E[23]>>>22,yn=E[23]<<10|E[22]>>>22,Qe=E[33]<<13|E[32]>>>19,Xe=E[32]<<13|E[33]>>>19,Rn=E[42]<<2|E[43]>>>30,Mn=E[43]<<2|E[42]>>>30,vn=E[5]<<30|E[4]>>>2,wn=E[4]<<30|E[5]>>>2,Je=E[14]<<6|E[15]>>>26,tn=E[15]<<6|E[14]>>>26,Pe=E[25]<<11|E[24]>>>21,Ne=E[24]<<11|E[25]>>>21,hn=E[34]<<15|E[35]>>>17,mn=E[35]<<15|E[34]>>>17,Ye=E[45]<<29|E[44]>>>3,Ke=E[44]<<29|E[45]>>>3,qe=E[6]<<28|E[7]>>>4,He=E[7]<<28|E[6]>>>4,_n=E[17]<<23|E[16]>>>9,Tn=E[16]<<23|E[17]>>>9,en=E[26]<<25|E[27]>>>7,nn=E[27]<<25|E[26]>>>7,ze=E[36]<<21|E[37]>>>11,De=E[37]<<21|E[36]>>>11,gn=E[47]<<24|E[46]>>>8,bn=E[46]<<24|E[47]>>>8,un=E[8]<<27|E[9]>>>5,cn=E[9]<<27|E[8]>>>5,Ge=E[18]<<20|E[19]>>>12,je=E[19]<<20|E[18]>>>12,xn=E[29]<<7|E[28]>>>25,An=E[28]<<7|E[29]>>>25,rn=E[38]<<8|E[39]>>>24,on=E[39]<<8|E[38]>>>24,Le=E[48]<<14|E[49]>>>18,Ue=E[49]<<14|E[48]>>>18,E[0]=Me^~Ie&Pe,E[1]=Se^~Fe&Ne,E[10]=qe^~Ge&We,E[11]=He^~je&Ve,E[20]=Ze^~Je&en,E[21]=$e^~tn&nn,E[30]=un^~pn&dn,E[31]=cn^~ln&yn,E[40]=vn^~_n&xn,E[41]=wn^~Tn&An,E[2]=Ie^~Pe&ze,E[3]=Fe^~Ne&De,E[12]=Ge^~We&Qe,E[13]=je^~Ve&Xe,E[22]=Je^~en&rn,E[23]=tn^~nn&on,E[32]=pn^~dn&hn,E[33]=ln^~yn&mn,E[42]=_n^~xn&Cn,E[43]=Tn^~An&En,E[4]=Pe^~ze&Le,E[5]=Ne^~De&Ue,E[14]=We^~Qe&Ye,E[15]=Ve^~Xe&Ke,E[24]=en^~rn&an,E[25]=nn^~on&sn,E[34]=dn^~hn&gn,E[35]=yn^~mn&bn,E[44]=xn^~Cn&Rn,E[45]=An^~En&Mn,E[6]=ze^~Le&Me,E[7]=De^~Ue&Se,E[16]=Qe^~Ye&qe,E[17]=Xe^~Ke&He,E[26]=rn^~an&Ze,E[27]=on^~sn&$e,E[36]=hn^~gn&un,E[37]=mn^~bn&cn,E[46]=Cn^~Rn&vn,E[47]=En^~Mn&wn,E[8]=Le^~Me&Ie,E[9]=Ue^~Se&Fe,E[18]=Ye^~qe&Ge,E[19]=Ke^~He&je,E[28]=an^~Ze&Je,E[29]=sn^~$e&tn,E[38]=gn^~un&pn,E[39]=bn^~cn&ln,E[48]=Rn^~vn&_n,E[49]=Mn^~wn&Tn,E[0]^=le[Ft],E[1]^=le[Ft+1]};if(Lt)E.exports=Ie;else for(Pe=0;Pe<Fe.length;++Pe)Ft[Fe[Pe]]=Ie[Fe[Pe]]}()}));De.keccak_224,De.keccak224,De.keccak_256;var Le=De.keccak256;De.keccak_384,De.keccak384,De.keccak_512,De.keccak512,De.sha3_224,De.sha3_256,De.sha3_384,De.sha3_512,De.shake_128,De.shake128,De.shake_256,De.shake256,De.cshake_128,De.cshake128,De.cshake_256,De.cshake256,De.kmac_128,De.kmac128,De.kmac_256,De.kmac256;var Ue=n((function(E){!function(O){var _t,Ft=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Pt=Math.ceil,Dt=Math.floor,Lt="[BigNumber Error] ",Ut=Lt+"Number primitive has more than 15 significant digits: ",Xt=1e14,Kt=14,Zt=9007199254740991,le=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ve=1e7,Ce=1e9;function d(E){var O=0|E;return E>0||E===O?O:O-1}function g(E){for(var O,_t,Ft=1,Pt=E.length,Dt=E[0]+"";Ft<Pt;){for(O=E[Ft++]+"",_t=Kt-O.length;_t--;O="0"+O);Dt+=O}for(Pt=Dt.length;48===Dt.charCodeAt(--Pt););return Dt.slice(0,Pt+1||1)}function m(E,O){var _t,Ft,Pt=E.c,Dt=O.c,Lt=E.s,Ut=O.s,Xt=E.e,Kt=O.e;if(!Lt||!Ut)return null;if(_t=Pt&&!Pt[0],Ft=Dt&&!Dt[0],_t||Ft)return _t?Ft?0:-Ut:Lt;if(Lt!=Ut)return Lt;if(_t=Lt<0,Ft=Xt==Kt,!Pt||!Dt)return Ft?0:!Pt^_t?1:-1;if(!Ft)return Xt>Kt^_t?1:-1;for(Ut=(Xt=Pt.length)<(Kt=Dt.length)?Xt:Kt,Lt=0;Lt<Ut;Lt++)if(Pt[Lt]!=Dt[Lt])return Pt[Lt]>Dt[Lt]^_t?1:-1;return Xt==Kt?0:Xt>Kt^_t?1:-1}function y(E,O,_t,Ft){if(E<O||E>_t||E!==Dt(E))throw Error(Lt+(Ft||"Argument")+("number"==typeof E?E<O||E>_t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function w(E){var O=E.c.length-1;return d(E.e/Kt)==O&&E.c[O]%2!=0}function v(E,O){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(O<0?"e":"e+")+O}function b(E,O,_t){var Ft,Pt;if(O<0){for(Pt=_t+".";++O;Pt+=_t);E=Pt+E}else if(++O>(Ft=E.length)){for(Pt=_t,O-=Ft;--O;Pt+=_t);E+=Pt}else O<Ft&&(E=E.slice(0,O)+"."+E.slice(O));return E}(_t=function t(E){var O,_t,Re,Me,Se,Ie,Fe,Pe,Ne,ze,De=H.prototype={constructor:H,toString:null,valueOf:null},Le=new H(1),Ue=20,qe=4,He=-7,Ge=21,je=-1e7,We=1e7,Ve=!1,Qe=1,Xe=0,Ye={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ke="0123456789abcdefghijklmnopqrstuvwxyz";function H(E,O){var Pt,Lt,Xt,le,ve,Ce,Me,Se,Ie=this;if(!(Ie instanceof H))return new H(E,O);if(null==O){if(E&&!0===E._isBigNumber)return Ie.s=E.s,void(!E.c||E.e>We?Ie.c=Ie.e=null:E.e<je?Ie.c=[Ie.e=0]:(Ie.e=E.e,Ie.c=E.c.slice()));if((Ce="number"==typeof E)&&0*E==0){if(Ie.s=1/E<0?(E=-E,-1):1,E===~~E){for(le=0,ve=E;ve>=10;ve/=10,le++);return void(le>We?Ie.c=Ie.e=null:(Ie.e=le,Ie.c=[E]))}Se=String(E)}else{if(!Ft.test(Se=String(E)))return Re(Ie,Se,Ce);Ie.s=45==Se.charCodeAt(0)?(Se=Se.slice(1),-1):1}(le=Se.indexOf("."))>-1&&(Se=Se.replace(".","")),(ve=Se.search(/e/i))>0?(le<0&&(le=ve),le+=+Se.slice(ve+1),Se=Se.substring(0,ve)):le<0&&(le=Se.length)}else{if(y(O,2,Ke.length,"Base"),10==O)return W(Ie=new H(E),Ue+Ie.e+1,qe);if(Se=String(E),Ce="number"==typeof E){if(0*E!=0)return Re(Ie,Se,Ce,O);if(Ie.s=1/E<0?(Se=Se.slice(1),-1):1,H.DEBUG&&Se.replace(/^0\.0*|\./,"").length>15)throw Error(Ut+E)}else Ie.s=45===Se.charCodeAt(0)?(Se=Se.slice(1),-1):1;for(Pt=Ke.slice(0,O),le=ve=0,Me=Se.length;ve<Me;ve++)if(Pt.indexOf(Lt=Se.charAt(ve))<0){if("."==Lt){if(ve>le){le=Me;continue}}else if(!Xt&&(Se==Se.toUpperCase()&&(Se=Se.toLowerCase())||Se==Se.toLowerCase()&&(Se=Se.toUpperCase()))){Xt=!0,ve=-1,le=0;continue}return Re(Ie,String(E),Ce,O)}Ce=!1,(le=(Se=_t(Se,O,10,Ie.s)).indexOf("."))>-1?Se=Se.replace(".",""):le=Se.length}for(ve=0;48===Se.charCodeAt(ve);ve++);for(Me=Se.length;48===Se.charCodeAt(--Me););if(Se=Se.slice(ve,++Me)){if(Me-=ve,Ce&&H.DEBUG&&Me>15&&(E>Zt||E!==Dt(E)))throw Error(Ut+Ie.s*E);if((le=le-ve-1)>We)Ie.c=Ie.e=null;else if(le<je)Ie.c=[Ie.e=0];else{if(Ie.e=le,Ie.c=[],ve=(le+1)%Kt,le<0&&(ve+=Kt),ve<Me){for(ve&&Ie.c.push(+Se.slice(0,ve)),Me-=Kt;ve<Me;)Ie.c.push(+Se.slice(ve,ve+=Kt));ve=Kt-(Se=Se.slice(ve)).length}else ve-=Me;for(;ve--;Se+="0");Ie.c.push(+Se)}}else Ie.c=[Ie.e=0]}function G(E,O,_t,Ft){var Pt,Dt,Lt,Ut,Xt;if(null==_t?_t=qe:y(_t,0,8),!E.c)return E.toString();if(Pt=E.c[0],Lt=E.e,null==O)Xt=g(E.c),Xt=1==Ft||2==Ft&&(Lt<=He||Lt>=Ge)?v(Xt,Lt):b(Xt,Lt,"0");else if(Dt=(E=W(new H(E),O,_t)).e,Ut=(Xt=g(E.c)).length,1==Ft||2==Ft&&(O<=Dt||Dt<=He)){for(;Ut<O;Xt+="0",Ut++);Xt=v(Xt,Dt)}else if(O-=Lt,Xt=b(Xt,Dt,"0"),Dt+1>Ut){if(--O>0)for(Xt+=".";O--;Xt+="0");}else if((O+=Dt-Ut)>0)for(Dt+1==Ut&&(Xt+=".");O--;Xt+="0");return E.s<0&&Pt?"-"+Xt:Xt}function z(E,O){for(var _t,Ft=1,Pt=new H(E[0]);Ft<E.length;Ft++){if(!(_t=new H(E[Ft])).s){Pt=_t;break}O.call(Pt,_t)&&(Pt=_t)}return Pt}function J(E,O,_t){for(var Ft=1,Pt=O.length;!O[--Pt];O.pop());for(Pt=O[0];Pt>=10;Pt/=10,Ft++);return(_t=Ft+_t*Kt-1)>We?E.c=E.e=null:_t<je?E.c=[E.e=0]:(E.e=_t,E.c=O),E}function W(E,O,_t,Ft){var Lt,Ut,Zt,ve,Ce,Re,Me,Se=E.c,Ie=le;if(Se){t:{for(Lt=1,ve=Se[0];ve>=10;ve/=10,Lt++);if((Ut=O-Lt)<0)Ut+=Kt,Zt=O,Me=(Ce=Se[Re=0])/Ie[Lt-Zt-1]%10|0;else if((Re=Pt((Ut+1)/Kt))>=Se.length){if(!Ft)break t;for(;Se.length<=Re;Se.push(0));Ce=Me=0,Lt=1,Zt=(Ut%=Kt)-Kt+1}else{for(Ce=ve=Se[Re],Lt=1;ve>=10;ve/=10,Lt++);Me=(Zt=(Ut%=Kt)-Kt+Lt)<0?0:Ce/Ie[Lt-Zt-1]%10|0}if(Ft=Ft||O<0||null!=Se[Re+1]||(Zt<0?Ce:Ce%Ie[Lt-Zt-1]),Ft=_t<4?(Me||Ft)&&(0==_t||_t==(E.s<0?3:2)):Me>5||5==Me&&(4==_t||Ft||6==_t&&(Ut>0?Zt>0?Ce/Ie[Lt-Zt]:0:Se[Re-1])%10&1||_t==(E.s<0?8:7)),O<1||!Se[0])return Se.length=0,Ft?(O-=E.e+1,Se[0]=Ie[(Kt-O%Kt)%Kt],E.e=-O||0):Se[0]=E.e=0,E;if(0==Ut?(Se.length=Re,ve=1,Re--):(Se.length=Re+1,ve=Ie[Kt-Ut],Se[Re]=Zt>0?Dt(Ce/Ie[Lt-Zt]%Ie[Zt])*ve:0),Ft)for(;;){if(0==Re){for(Ut=1,Zt=Se[0];Zt>=10;Zt/=10,Ut++);for(Zt=Se[0]+=ve,ve=1;Zt>=10;Zt/=10,ve++);Ut!=ve&&(E.e++,Se[0]==Xt&&(Se[0]=1));break}if(Se[Re]+=ve,Se[Re]!=Xt)break;Se[Re--]=0,ve=1}for(Ut=Se.length;0===Se[--Ut];Se.pop());}E.e>We?E.c=E.e=null:E.e<je&&(E.c=[E.e=0])}return E}function V(E){var O,_t=E.e;return null===_t?E.toString():(O=g(E.c),O=_t<=He||_t>=Ge?v(O,_t):b(O,_t,"0"),E.s<0?"-"+O:O)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(E){var O,_t;if(null!=E){if("object"!=typeof E)throw Error(Lt+"Object expected: "+E);if(E.hasOwnProperty(O="DECIMAL_PLACES")&&(y(_t=E[O],0,Ce,O),Ue=_t),E.hasOwnProperty(O="ROUNDING_MODE")&&(y(_t=E[O],0,8,O),qe=_t),E.hasOwnProperty(O="EXPONENTIAL_AT")&&((_t=E[O])&&_t.pop?(y(_t[0],-Ce,0,O),y(_t[1],0,Ce,O),He=_t[0],Ge=_t[1]):(y(_t,-Ce,Ce,O),He=-(Ge=_t<0?-_t:_t))),E.hasOwnProperty(O="RANGE"))if((_t=E[O])&&_t.pop)y(_t[0],-Ce,-1,O),y(_t[1],1,Ce,O),je=_t[0],We=_t[1];else{if(y(_t,-Ce,Ce,O),!_t)throw Error(Lt+O+" cannot be zero: "+_t);je=-(We=_t<0?-_t:_t)}if(E.hasOwnProperty(O="CRYPTO")){if((_t=E[O])!==!!_t)throw Error(Lt+O+" not true or false: "+_t);if(_t){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Ve=!_t,Error(Lt+"crypto unavailable");Ve=_t}else Ve=_t}if(E.hasOwnProperty(O="MODULO_MODE")&&(y(_t=E[O],0,9,O),Qe=_t),E.hasOwnProperty(O="POW_PRECISION")&&(y(_t=E[O],0,Ce,O),Xe=_t),E.hasOwnProperty(O="FORMAT")){if("object"!=typeof(_t=E[O]))throw Error(Lt+O+" not an object: "+_t);Ye=_t}if(E.hasOwnProperty(O="ALPHABET")){if("string"!=typeof(_t=E[O])||/^.?$|[+\-.\s]|(.).*\1/.test(_t))throw Error(Lt+O+" invalid: "+_t);Ke=_t}}return{DECIMAL_PLACES:Ue,ROUNDING_MODE:qe,EXPONENTIAL_AT:[He,Ge],RANGE:[je,We],CRYPTO:Ve,MODULO_MODE:Qe,POW_PRECISION:Xe,FORMAT:Ye,ALPHABET:Ke}},H.isBigNumber=function(E){if(!E||!0!==E._isBigNumber)return!1;if(!H.DEBUG)return!0;var O,_t,Ft=E.c,Pt=E.e,Ut=E.s;t:if("[object Array]"=={}.toString.call(Ft)){if((1===Ut||-1===Ut)&&Pt>=-Ce&&Pt<=Ce&&Pt===Dt(Pt)){if(0===Ft[0]){if(0===Pt&&1===Ft.length)return!0;break t}if((O=(Pt+1)%Kt)<1&&(O+=Kt),String(Ft[0]).length==O){for(O=0;O<Ft.length;O++)if((_t=Ft[O])<0||_t>=Xt||_t!==Dt(_t))break t;if(0!==_t)return!0}}}else if(null===Ft&&null===Pt&&(null===Ut||1===Ut||-1===Ut))return!0;throw Error(Lt+"Invalid BigNumber: "+E)},H.maximum=H.max=function(){return z(arguments,De.lt)},H.minimum=H.min=function(){return z(arguments,De.gt)},H.random=(Me=9007199254740992,Se=Math.random()*Me&2097151?function(){return Dt(Math.random()*Me)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(E){var O,_t,Ft,Ut,Xt,Zt=0,ve=[],Re=new H(Le);if(null==E?E=Ue:y(E,0,Ce),Ut=Pt(E/Kt),Ve)if(crypto.getRandomValues){for(O=crypto.getRandomValues(new Uint32Array(Ut*=2));Zt<Ut;)(Xt=131072*O[Zt]+(O[Zt+1]>>>11))>=9e15?(_t=crypto.getRandomValues(new Uint32Array(2)),O[Zt]=_t[0],O[Zt+1]=_t[1]):(ve.push(Xt%1e14),Zt+=2);Zt=Ut/2}else{if(!crypto.randomBytes)throw Ve=!1,Error(Lt+"crypto unavailable");for(O=crypto.randomBytes(Ut*=7);Zt<Ut;)(Xt=281474976710656*(31&O[Zt])+1099511627776*O[Zt+1]+4294967296*O[Zt+2]+16777216*O[Zt+3]+(O[Zt+4]<<16)+(O[Zt+5]<<8)+O[Zt+6])>=9e15?crypto.randomBytes(7).copy(O,Zt):(ve.push(Xt%1e14),Zt+=7);Zt=Ut/7}if(!Ve)for(;Zt<Ut;)(Xt=Se())<9e15&&(ve[Zt++]=Xt%1e14);for(Ut=ve[--Zt],E%=Kt,Ut&&E&&(Xt=le[Kt-E],ve[Zt]=Dt(Ut/Xt)*Xt);0===ve[Zt];ve.pop(),Zt--);if(Zt<0)ve=[Ft=0];else{for(Ft=-1;0===ve[0];ve.splice(0,1),Ft-=Kt);for(Zt=1,Xt=ve[0];Xt>=10;Xt/=10,Zt++);Zt<Kt&&(Ft-=Kt-Zt)}return Re.e=Ft,Re.c=ve,Re}),H.sum=function(){for(var E=1,O=arguments,_t=new H(O[0]);E<O.length;)_t=_t.plus(O[E++]);return _t},_t=function(){var E="0123456789";function e(E,O,_t,Ft){for(var Pt,Dt,Lt=[0],Ut=0,Xt=E.length;Ut<Xt;){for(Dt=Lt.length;Dt--;Lt[Dt]*=O);for(Lt[0]+=Ft.indexOf(E.charAt(Ut++)),Pt=0;Pt<Lt.length;Pt++)Lt[Pt]>_t-1&&(null==Lt[Pt+1]&&(Lt[Pt+1]=0),Lt[Pt+1]+=Lt[Pt]/_t|0,Lt[Pt]%=_t)}return Lt.reverse()}return function(_t,Ft,Pt,Dt,Lt){var Ut,Xt,Kt,Zt,le,ve,Ce,Re,Me=_t.indexOf("."),Se=Ue,Ie=qe;for(Me>=0&&(Zt=Xe,Xe=0,_t=_t.replace(".",""),ve=(Re=new H(Ft)).pow(_t.length-Me),Xe=Zt,Re.c=e(b(g(ve.c),ve.e,"0"),10,Pt,E),Re.e=Re.c.length),Kt=Zt=(Ce=e(_t,Ft,Pt,Lt?(Ut=Ke,E):(Ut=E,Ke))).length;0==Ce[--Zt];Ce.pop());if(!Ce[0])return Ut.charAt(0);if(Me<0?--Kt:(ve.c=Ce,ve.e=Kt,ve.s=Dt,Ce=(ve=O(ve,Re,Se,Ie,Pt)).c,le=ve.r,Kt=ve.e),Me=Ce[Xt=Kt+Se+1],Zt=Pt/2,le=le||Xt<0||null!=Ce[Xt+1],le=Ie<4?(null!=Me||le)&&(0==Ie||Ie==(ve.s<0?3:2)):Me>Zt||Me==Zt&&(4==Ie||le||6==Ie&&1&Ce[Xt-1]||Ie==(ve.s<0?8:7)),Xt<1||!Ce[0])_t=le?b(Ut.charAt(1),-Se,Ut.charAt(0)):Ut.charAt(0);else{if(Ce.length=Xt,le)for(--Pt;++Ce[--Xt]>Pt;)Ce[Xt]=0,Xt||(++Kt,Ce=[1].concat(Ce));for(Zt=Ce.length;!Ce[--Zt];);for(Me=0,_t="";Me<=Zt;_t+=Ut.charAt(Ce[Me++]));_t=b(_t,Kt,Ut.charAt(0))}return _t}}(),O=function(){function t(E,O,_t){var Ft,Pt,Dt,Lt,Ut=0,Xt=E.length,Kt=O%ve,Zt=O/ve|0;for(E=E.slice();Xt--;)Ut=((Pt=Kt*(Dt=E[Xt]%ve)+(Ft=Zt*Dt+(Lt=E[Xt]/ve|0)*Kt)%ve*ve+Ut)/_t|0)+(Ft/ve|0)+Zt*Lt,E[Xt]=Pt%_t;return Ut&&(E=[Ut].concat(E)),E}function e(E,O,_t,Ft){var Pt,Dt;if(_t!=Ft)Dt=_t>Ft?1:-1;else for(Pt=Dt=0;Pt<_t;Pt++)if(E[Pt]!=O[Pt]){Dt=E[Pt]>O[Pt]?1:-1;break}return Dt}function n(E,O,_t,Ft){for(var Pt=0;_t--;)E[_t]-=Pt,Pt=E[_t]<O[_t]?1:0,E[_t]=Pt*Ft+E[_t]-O[_t];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,O,_t,Ft,Pt){var Lt,Ut,Zt,le,ve,Ce,Re,Me,Se,Ie,Fe,Pe,Ne,ze,De,Le,Ue,qe=E.s==O.s?1:-1,He=E.c,Ge=O.c;if(!(He&&He[0]&&Ge&&Ge[0]))return new H(E.s&&O.s&&(He?!Ge||He[0]!=Ge[0]:Ge)?He&&0==He[0]||!Ge?0*qe:qe/0:NaN);for(Se=(Me=new H(qe)).c=[],qe=_t+(Ut=E.e-O.e)+1,Pt||(Pt=Xt,Ut=d(E.e/Kt)-d(O.e/Kt),qe=qe/Kt|0),Zt=0;Ge[Zt]==(He[Zt]||0);Zt++);if(Ge[Zt]>(He[Zt]||0)&&Ut--,qe<0)Se.push(1),le=!0;else{for(ze=He.length,Le=Ge.length,Zt=0,qe+=2,(ve=Dt(Pt/(Ge[0]+1)))>1&&(Ge=t(Ge,ve,Pt),He=t(He,ve,Pt),Le=Ge.length,ze=He.length),Ne=Le,Fe=(Ie=He.slice(0,Le)).length;Fe<Le;Ie[Fe++]=0);Ue=Ge.slice(),Ue=[0].concat(Ue),De=Ge[0],Ge[1]>=Pt/2&&De++;do{if(ve=0,(Lt=e(Ge,Ie,Le,Fe))<0){if(Pe=Ie[0],Le!=Fe&&(Pe=Pe*Pt+(Ie[1]||0)),(ve=Dt(Pe/De))>1)for(ve>=Pt&&(ve=Pt-1),Re=(Ce=t(Ge,ve,Pt)).length,Fe=Ie.length;1==e(Ce,Ie,Re,Fe);)ve--,n(Ce,Le<Re?Ue:Ge,Re,Pt),Re=Ce.length,Lt=1;else 0==ve&&(Lt=ve=1),Re=(Ce=Ge.slice()).length;if(Re<Fe&&(Ce=[0].concat(Ce)),n(Ie,Ce,Fe,Pt),Fe=Ie.length,-1==Lt)for(;e(Ge,Ie,Le,Fe)<1;)ve++,n(Ie,Le<Fe?Ue:Ge,Fe,Pt),Fe=Ie.length}else 0===Lt&&(ve++,Ie=[0]);Se[Zt++]=ve,Ie[0]?Ie[Fe++]=He[Ne]||0:(Ie=[He[Ne]],Fe=1)}while((Ne++<ze||null!=Ie[0])&&qe--);le=null!=Ie[0],Se[0]||Se.splice(0,1)}if(Pt==Xt){for(Zt=1,qe=Se[0];qe>=10;qe/=10,Zt++);W(Me,_t+(Me.e=Zt+Ut*Kt-1)+1,Ft,le)}else Me.e=Ut,Me.r=+le;return Me}}(),Ie=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Fe=/^([^.]+)\.$/,Pe=/^\.([^.]+)$/,Ne=/^-?(Infinity|NaN)$/,ze=/^\s*\+(?=[\w.])|^\s+|\s+$/g,Re=function(E,O,_t,Ft){var Pt,Dt=_t?O:O.replace(ze,"");if(Ne.test(Dt))E.s=isNaN(Dt)?null:Dt<0?-1:1;else{if(!_t&&(Dt=Dt.replace(Ie,(function(E,O,_t){return Pt="x"==(_t=_t.toLowerCase())?16:"b"==_t?2:8,Ft&&Ft!=Pt?E:O})),Ft&&(Pt=Ft,Dt=Dt.replace(Fe,"$1").replace(Pe,"0.$1")),O!=Dt))return new H(Dt,Pt);if(H.DEBUG)throw Error(Lt+"Not a"+(Ft?" base "+Ft:"")+" number: "+O);E.s=null}E.c=E.e=null},De.absoluteValue=De.abs=function(){var E=new H(this);return E.s<0&&(E.s=1),E},De.comparedTo=function(E,O){return m(this,new H(E,O))},De.decimalPlaces=De.dp=function(E,O){var _t,Ft,Pt,Dt=this;if(null!=E)return y(E,0,Ce),null==O?O=qe:y(O,0,8),W(new H(Dt),E+Dt.e+1,O);if(!(_t=Dt.c))return null;if(Ft=((Pt=_t.length-1)-d(this.e/Kt))*Kt,Pt=_t[Pt])for(;Pt%10==0;Pt/=10,Ft--);return Ft<0&&(Ft=0),Ft},De.dividedBy=De.div=function(E,_t){return O(this,new H(E,_t),Ue,qe)},De.dividedToIntegerBy=De.idiv=function(E,_t){return O(this,new H(E,_t),0,1)},De.exponentiatedBy=De.pow=function(E,O){var _t,Ft,Ut,Xt,Zt,le,ve,Ce,Re=this;if((E=new H(E)).c&&!E.isInteger())throw Error(Lt+"Exponent not an integer: "+V(E));if(null!=O&&(O=new H(O)),Zt=E.e>14,!Re.c||!Re.c[0]||1==Re.c[0]&&!Re.e&&1==Re.c.length||!E.c||!E.c[0])return Ce=new H(Math.pow(+V(Re),Zt?2-w(E):+V(E))),O?Ce.mod(O):Ce;if(le=E.s<0,O){if(O.c?!O.c[0]:!O.s)return new H(NaN);(Ft=!le&&Re.isInteger()&&O.isInteger())&&(Re=Re.mod(O))}else{if(E.e>9&&(Re.e>0||Re.e<-1||(0==Re.e?Re.c[0]>1||Zt&&Re.c[1]>=24e7:Re.c[0]<8e13||Zt&&Re.c[0]<=9999975e7)))return Xt=Re.s<0&&w(E)?-0:0,Re.e>-1&&(Xt=1/Xt),new H(le?1/Xt:Xt);Xe&&(Xt=Pt(Xe/Kt+2))}for(Zt?(_t=new H(.5),le&&(E.s=1),ve=w(E)):ve=(Ut=Math.abs(+V(E)))%2,Ce=new H(Le);;){if(ve){if(!(Ce=Ce.times(Re)).c)break;Xt?Ce.c.length>Xt&&(Ce.c.length=Xt):Ft&&(Ce=Ce.mod(O))}if(Ut){if(0===(Ut=Dt(Ut/2)))break;ve=Ut%2}else if(W(E=E.times(_t),E.e+1,1),E.e>14)ve=w(E);else{if(0==(Ut=+V(E)))break;ve=Ut%2}Re=Re.times(Re),Xt?Re.c&&Re.c.length>Xt&&(Re.c.length=Xt):Ft&&(Re=Re.mod(O))}return Ft?Ce:(le&&(Ce=Le.div(Ce)),O?Ce.mod(O):Xt?W(Ce,Xe,qe,void 0):Ce)},De.integerValue=function(E){var O=new H(this);return null==E?E=qe:y(E,0,8),W(O,O.e+1,E)},De.isEqualTo=De.eq=function(E,O){return 0===m(this,new H(E,O))},De.isFinite=function(){return!!this.c},De.isGreaterThan=De.gt=function(E,O){return m(this,new H(E,O))>0},De.isGreaterThanOrEqualTo=De.gte=function(E,O){return 1===(O=m(this,new H(E,O)))||0===O},De.isInteger=function(){return!!this.c&&d(this.e/Kt)>this.c.length-2},De.isLessThan=De.lt=function(E,O){return m(this,new H(E,O))<0},De.isLessThanOrEqualTo=De.lte=function(E,O){return-1===(O=m(this,new H(E,O)))||0===O},De.isNaN=function(){return!this.s},De.isNegative=function(){return this.s<0},De.isPositive=function(){return this.s>0},De.isZero=function(){return!!this.c&&0==this.c[0]},De.minus=function(E,O){var _t,Ft,Pt,Dt,Lt=this,Ut=Lt.s;if(O=(E=new H(E,O)).s,!Ut||!O)return new H(NaN);if(Ut!=O)return E.s=-O,Lt.plus(E);var Zt=Lt.e/Kt,le=E.e/Kt,ve=Lt.c,Ce=E.c;if(!Zt||!le){if(!ve||!Ce)return ve?(E.s=-O,E):new H(Ce?Lt:NaN);if(!ve[0]||!Ce[0])return Ce[0]?(E.s=-O,E):new H(ve[0]?Lt:3==qe?-0:0)}if(Zt=d(Zt),le=d(le),ve=ve.slice(),Ut=Zt-le){for((Dt=Ut<0)?(Ut=-Ut,Pt=ve):(le=Zt,Pt=Ce),Pt.reverse(),O=Ut;O--;Pt.push(0));Pt.reverse()}else for(Ft=(Dt=(Ut=ve.length)<(O=Ce.length))?Ut:O,Ut=O=0;O<Ft;O++)if(ve[O]!=Ce[O]){Dt=ve[O]<Ce[O];break}if(Dt&&(Pt=ve,ve=Ce,Ce=Pt,E.s=-E.s),(O=(Ft=Ce.length)-(_t=ve.length))>0)for(;O--;ve[_t++]=0);for(O=Xt-1;Ft>Ut;){if(ve[--Ft]<Ce[Ft]){for(_t=Ft;_t&&!ve[--_t];ve[_t]=O);--ve[_t],ve[Ft]+=Xt}ve[Ft]-=Ce[Ft]}for(;0==ve[0];ve.splice(0,1),--le);return ve[0]?J(E,ve,le):(E.s=3==qe?-1:1,E.c=[E.e=0],E)},De.modulo=De.mod=function(E,_t){var Ft,Pt,Dt=this;return E=new H(E,_t),!Dt.c||!E.s||E.c&&!E.c[0]?new H(NaN):!E.c||Dt.c&&!Dt.c[0]?new H(Dt):(9==Qe?(Pt=E.s,E.s=1,Ft=O(Dt,E,0,3),E.s=Pt,Ft.s*=Pt):Ft=O(Dt,E,0,Qe),(E=Dt.minus(Ft.times(E))).c[0]||1!=Qe||(E.s=Dt.s),E)},De.multipliedBy=De.times=function(E,O){var _t,Ft,Pt,Dt,Lt,Ut,Zt,le,Ce,Re,Me,Se,Ie,Fe,Pe,Ne=this,ze=Ne.c,De=(E=new H(E,O)).c;if(!(ze&&De&&ze[0]&&De[0]))return!Ne.s||!E.s||ze&&!ze[0]&&!De||De&&!De[0]&&!ze?E.c=E.e=E.s=null:(E.s*=Ne.s,ze&&De?(E.c=[0],E.e=0):E.c=E.e=null),E;for(Ft=d(Ne.e/Kt)+d(E.e/Kt),E.s*=Ne.s,(Zt=ze.length)<(Re=De.length)&&(Ie=ze,ze=De,De=Ie,Pt=Zt,Zt=Re,Re=Pt),Pt=Zt+Re,Ie=[];Pt--;Ie.push(0));for(Fe=Xt,Pe=ve,Pt=Re;--Pt>=0;){for(_t=0,Me=De[Pt]%Pe,Se=De[Pt]/Pe|0,Dt=Pt+(Lt=Zt);Dt>Pt;)_t=((le=Me*(le=ze[--Lt]%Pe)+(Ut=Se*le+(Ce=ze[Lt]/Pe|0)*Me)%Pe*Pe+Ie[Dt]+_t)/Fe|0)+(Ut/Pe|0)+Se*Ce,Ie[Dt--]=le%Fe;Ie[Dt]=_t}return _t?++Ft:Ie.splice(0,1),J(E,Ie,Ft)},De.negated=function(){var E=new H(this);return E.s=-E.s||null,E},De.plus=function(E,O){var _t,Ft=this,Pt=Ft.s;if(O=(E=new H(E,O)).s,!Pt||!O)return new H(NaN);if(Pt!=O)return E.s=-O,Ft.minus(E);var Dt=Ft.e/Kt,Lt=E.e/Kt,Ut=Ft.c,Zt=E.c;if(!Dt||!Lt){if(!Ut||!Zt)return new H(Pt/0);if(!Ut[0]||!Zt[0])return Zt[0]?E:new H(Ut[0]?Ft:0*Pt)}if(Dt=d(Dt),Lt=d(Lt),Ut=Ut.slice(),Pt=Dt-Lt){for(Pt>0?(Lt=Dt,_t=Zt):(Pt=-Pt,_t=Ut),_t.reverse();Pt--;_t.push(0));_t.reverse()}for((Pt=Ut.length)-(O=Zt.length)<0&&(_t=Zt,Zt=Ut,Ut=_t,O=Pt),Pt=0;O;)Pt=(Ut[--O]=Ut[O]+Zt[O]+Pt)/Xt|0,Ut[O]=Xt===Ut[O]?0:Ut[O]%Xt;return Pt&&(Ut=[Pt].concat(Ut),++Lt),J(E,Ut,Lt)},De.precision=De.sd=function(E,O){var _t,Ft,Pt,Dt=this;if(null!=E&&E!==!!E)return y(E,1,Ce),null==O?O=qe:y(O,0,8),W(new H(Dt),E,O);if(!(_t=Dt.c))return null;if(Ft=(Pt=_t.length-1)*Kt+1,Pt=_t[Pt]){for(;Pt%10==0;Pt/=10,Ft--);for(Pt=_t[0];Pt>=10;Pt/=10,Ft++);}return E&&Dt.e+1>Ft&&(Ft=Dt.e+1),Ft},De.shiftedBy=function(E){return y(E,-9007199254740991,Zt),this.times("1e"+E)},De.squareRoot=De.sqrt=function(){var E,_t,Ft,Pt,Dt,Lt=this,Ut=Lt.c,Xt=Lt.s,Kt=Lt.e,Zt=Ue+4,le=new H("0.5");if(1!==Xt||!Ut||!Ut[0])return new H(!Xt||Xt<0&&(!Ut||Ut[0])?NaN:Ut?Lt:1/0);if(0==(Xt=Math.sqrt(+V(Lt)))||Xt==1/0?(((_t=g(Ut)).length+Kt)%2==0&&(_t+="0"),Xt=Math.sqrt(+_t),Kt=d((Kt+1)/2)-(Kt<0||Kt%2),Ft=new H(_t=Xt==1/0?"5e"+Kt:(_t=Xt.toExponential()).slice(0,_t.indexOf("e")+1)+Kt)):Ft=new H(Xt+""),Ft.c[0])for((Xt=(Kt=Ft.e)+Zt)<3&&(Xt=0);;)if(Dt=Ft,Ft=le.times(Dt.plus(O(Lt,Dt,Zt,1))),g(Dt.c).slice(0,Xt)===(_t=g(Ft.c)).slice(0,Xt)){if(Ft.e<Kt&&--Xt,"9999"!=(_t=_t.slice(Xt-3,Xt+1))&&(Pt||"4999"!=_t)){+_t&&(+_t.slice(1)||"5"!=_t.charAt(0))||(W(Ft,Ft.e+Ue+2,1),E=!Ft.times(Ft).eq(Lt));break}if(!Pt&&(W(Dt,Dt.e+Ue+2,0),Dt.times(Dt).eq(Lt))){Ft=Dt;break}Zt+=4,Xt+=4,Pt=1}return W(Ft,Ft.e+Ue+1,qe,E)},De.toExponential=function(E,O){return null!=E&&(y(E,0,Ce),E++),G(this,E,O,1)},De.toFixed=function(E,O){return null!=E&&(y(E,0,Ce),E=E+this.e+1),G(this,E,O)},De.toFormat=function(E,O,_t){var Ft,Pt=this;if(null==_t)null!=E&&O&&"object"==typeof O?(_t=O,O=null):E&&"object"==typeof E?(_t=E,E=O=null):_t=Ye;else if("object"!=typeof _t)throw Error(Lt+"Argument not an object: "+_t);if(Ft=Pt.toFixed(E,O),Pt.c){var Dt,Ut=Ft.split("."),Xt=+_t.groupSize,Kt=+_t.secondaryGroupSize,Zt=_t.groupSeparator||"",le=Ut[0],ve=Ut[1],Ce=Pt.s<0,Re=Ce?le.slice(1):le,Me=Re.length;if(Kt&&(Dt=Xt,Xt=Kt,Kt=Dt,Me-=Dt),Xt>0&&Me>0){for(Dt=Me%Xt||Xt,le=Re.substr(0,Dt);Dt<Me;Dt+=Xt)le+=Zt+Re.substr(Dt,Xt);Kt>0&&(le+=Zt+Re.slice(Dt)),Ce&&(le="-"+le)}Ft=ve?le+(_t.decimalSeparator||"")+((Kt=+_t.fractionGroupSize)?ve.replace(new RegExp("\\d{"+Kt+"}\\B","g"),"$&"+(_t.fractionGroupSeparator||"")):ve):le}return(_t.prefix||"")+Ft+(_t.suffix||"")},De.toFraction=function(E){var _t,Ft,Pt,Dt,Ut,Xt,Zt,ve,Ce,Re,Me,Se,Ie=this,Fe=Ie.c;if(null!=E&&(!(Zt=new H(E)).isInteger()&&(Zt.c||1!==Zt.s)||Zt.lt(Le)))throw Error(Lt+"Argument "+(Zt.isInteger()?"out of range: ":"not an integer: ")+V(Zt));if(!Fe)return new H(Ie);for(_t=new H(Le),Ce=Ft=new H(Le),Pt=ve=new H(Le),Se=g(Fe),Ut=_t.e=Se.length-Ie.e-1,_t.c[0]=le[(Xt=Ut%Kt)<0?Kt+Xt:Xt],E=!E||Zt.comparedTo(_t)>0?Ut>0?_t:Ce:Zt,Xt=We,We=1/0,Zt=new H(Se),ve.c[0]=0;Re=O(Zt,_t,0,1),1!=(Dt=Ft.plus(Re.times(Pt))).comparedTo(E);)Ft=Pt,Pt=Dt,Ce=ve.plus(Re.times(Dt=Ce)),ve=Dt,_t=Zt.minus(Re.times(Dt=_t)),Zt=Dt;return Dt=O(E.minus(Ft),Pt,0,1),ve=ve.plus(Dt.times(Ce)),Ft=Ft.plus(Dt.times(Pt)),ve.s=Ce.s=Ie.s,Me=O(Ce,Pt,Ut*=2,qe).minus(Ie).abs().comparedTo(O(ve,Ft,Ut,qe).minus(Ie).abs())<1?[Ce,Pt]:[ve,Ft],We=Xt,Me},De.toNumber=function(){return+V(this)},De.toPrecision=function(E,O){return null!=E&&y(E,1,Ce),G(this,E,O,2)},De.toString=function(E){var O,Ft=this,Pt=Ft.s,Dt=Ft.e;return null===Dt?Pt?(O="Infinity",Pt<0&&(O="-"+O)):O="NaN":(null==E?O=Dt<=He||Dt>=Ge?v(g(Ft.c),Dt):b(g(Ft.c),Dt,"0"):10===E?O=b(g((Ft=W(new H(Ft),Ue+Dt+1,qe)).c),Ft.e,"0"):(y(E,2,Ke.length,"Base"),O=_t(b(g(Ft.c),Dt,"0"),10,E,Pt,!0)),Pt<0&&Ft.c[0]&&(O="-"+O)),O},De.valueOf=De.toJSON=function(){return V(this)},De._isBigNumber=!0,null!=E&&H.set(E),H}()).default=_t.BigNumber=_t,E.exports?E.exports=_t:(O||(O="undefined"!=typeof self&&self?self:window),O.BigNumber=_t)}(this)})).BigNumber;const qe={ROUNDING_MODE:Ue.ROUND_DOWN};function M(E){return(new TextEncoder).encode(E)}function R(E){return"string"==typeof E?R(D(E)):(new TextDecoder).decode(E)}Ue.config(qe);const He="INVALID_ARGUMENT";function U(E,O="UNKNOWN_ERROR",_t={}){let Ft=[];Object.keys(_t).forEach((E=>{try{Ft.push(E+"="+JSON.stringify(_t[E]))}catch(O){Ft.push(E+"="+JSON.stringify(_t[E].toString()))}}));let Pt=E;Ft.length&&(E+=" ("+Ft.join(", ")+")");let Dt=new Error(E);return Dt.reason=Pt,Dt.code=O,Object.keys(_t).forEach((function(E){Dt[E]=_t[E]})),Dt}function D(E){if("string"!=typeof E)throw new Error("hexToBytes only accept strings, got: "+typeof E);if("0x"===E.substr(0,2))return D(E.substr(2));const O=new Uint8Array(Math.ceil(E.length/2));let _t=0;for(let Ft=0;Ft<E.length;Ft+=2){const Pt=parseInt(E.substr(Ft,2),16);if(isNaN(Pt))throw new Error("Cannot read hex string:"+JSON.stringify(E));O[_t]=Pt,_t++}return O}function q(E){return Array.from(E).map((E=>E.toString(16).padStart(2,"0"))).join("")}function $(E,O){if("string"==typeof E){if(O&&"hex"===O.encoding&&"string"==typeof E){let O=E;O.length>2&&"0x"===O.substr(0,2)&&(O=O.substr(2));const _t=D(O);return Le(_t)}return Le(M(E))}return Le(E)}let Ge={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(E,O,_t){return new Array(O-E.length+1).join(_t||"0")+E}function G(E){return wt(E)&&E.name&&-1!==E.name.indexOf("(")?E.name:E.name+"("+J(!1,E.inputs||[]).join(",")+")"}function z(...E){const O=E.reduce(((E,O)=>E+O.length),0);var _t=new Uint8Array(O);let Ft=0;for(let O of E)_t.set(O,Ft),Ft+=O.length;return _t}function J(E,O){const _t=[];return O.forEach((function(O){if("object"==typeof O.components){if("tuple"!==O.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var Ft="",Pt=O.type.indexOf("[");Pt>=0&&(Ft=O.type.substring(Pt));var Dt=J(E,O.components);bt(Dt)&&E?_t.push("tuple("+Dt.join(",")+")"+Ft):E?_t.push("("+Dt+")"):_t.push("("+Dt.join(",")+")"+Ft)}else _t.push(O.type)})),_t}function W(E){let O=E.indexOf("("),_t=E.indexOf(")");return-1!==O&&-1!==_t?E.substr(0,O):E}function V(E){let O=E.indexOf("("),_t=E.indexOf(")");return-1!==O&&-1!==_t?E.substr(O+1,_t-O-1).replace(" ",""):""}function K(E){return null==E?E:ot(E).toNumber()}function Z(E){return ot(E).toNumber()}function Y(E){return mt(E)?E.toString(10):""+E}function X(E){return"string"==typeof E&&!E.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(E)?"0x"+E:nt(E)}function Q(E){if("string"==typeof E)return E.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(E)?nt(E):"0x"+q(M(E));if(E instanceof Uint8Array)return"0x"+q(E);throw new Error(`toStringData: Error trying to convert ${E} (${typeof E}) to a hex string.`)}function tt(E){return"boolean"==typeof E?E:0!==ot(E).toNumber()}function et(E){let O=ot(E),_t=O.toString(16);return O.isLessThan(0)?"-0x"+_t.substr(1):"0x"+_t}function nt(E){if(vt(E))return et(+E);if(mt(E))return et(E);if(yt(E)){const O=E;if(0===O.indexOf("-0x"))return et(O);if(0===O.indexOf("0x"))return O;if(!isFinite(O))return q(M(O))}if(E instanceof Uint8Array)return"0x"+q(E);if(bt(E)||wt(E))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(E)}function rt(E){let O=E?E.toLowerCase():"ether",_t=Ge[O];if(void 0===_t)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(Ge,null,2));return new Ue(_t,10)}function ot(E){let O=E||0;return mt(O)?O:("string"==typeof O&&(O=O.trim()),"string"!=typeof O||0!==O.indexOf("0x")&&0!==O.indexOf("-0x")?O instanceof Uint8Array?new Ue(q(O),16):new Ue(O,10):new Ue(O.replace("0x","").toLowerCase(),16))}function it(E){return new Ue(new Array(E).fill("1").join(""),2)}function st(E,O=256){let _t=ot(E).integerValue();return _t.isLessThan(0)?it(O).plus(_t).plus(1):_t}function at(E,O){return"1"==H(E.toString(2),O,"0")[0]}function ct(E){if("string"!=typeof E)throw U("invalid address",He,{arg:"address",value:E});if(E.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==E.trim().substring(0,2)&&(E="0x"+E),ft(E);throw U("invalid address",He,{arg:"address",value:E})}function ut(E,O=256){if(at(E,O)){const _t=it(O);return E.minus(_t).minus(1)}return E}function lt(E){return/^0x[0-9a-f]{40}$/i.test(E)}function ht(E){return!!/^(0x)?[0-9a-f]{40}$/i.test(E)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(E)&&!/^(0x)?[0-9A-F]{40}$/.test(E))||pt(E))}function pt(E){const O=E.replace("0x","");let _t=$(O.toLowerCase());for(let E=0;E<40;E++)if(parseInt(_t[E],16)>7&&O[E].toUpperCase()!==O[E]||parseInt(_t[E],16)<=7&&O[E].toLowerCase()!==O[E])return!1;return!0}function ft(E){if(void 0===E)return"";const O=E.toLowerCase().replace("0x",""),_t=$(O);let Ft="0x";for(let E=0;E<O.length;E++)parseInt(_t[E],16)>7?Ft+=O[E].toUpperCase():Ft+=O[E];return Ft}function dt(E){if(!Array.isArray(E))throw new Error(`Value was not an array: ${JSON.stringify(E)}`);return E}function gt(E){return lt(E)?E:/^[0-9a-f]{40}$/.test(E)?"0x"+E:"0x"+H(nt(E).substr(2),40)}function mt(E){return E instanceof Ue}function yt(E){return"string"==typeof E||E&&E.constructor&&"String"===E.constructor.name}function wt(E){return null!==E&&!Array.isArray(E)&&"object"==typeof E}function vt(E){return"boolean"==typeof E}function bt(E){return Array.isArray(E)}var je,We,Ve;function Nt(O,_t){if(!O)throw new Error("jsonrpc method should be specified!");if("string"!=typeof O)throw new Error(`jsonrpc must be a string, got ${typeof O}!`);return E.messageId++,{jsonrpc:"2.0",id:E.messageId,method:O,params:_t||[]}}function xt(E){return Array.isArray(E)?E.every(e):e(E);function e(E){return!(!E||"error"in E||"2.0"!==E.jsonrpc||"number"!=typeof E.id||null==E.result&&void 0===E.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(E,O,_t,Ft){var Pt,Dt=arguments.length,Lt=Dt<3?O:null===Ft?Ft=Object.getOwnPropertyDescriptor(O,_t):Ft;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Lt=Reflect.decorate(E,O,_t,Ft);else for(var Ut=E.length-1;Ut>=0;Ut--)(Pt=E[Ut])&&(Lt=(Dt<3?Pt(Lt):Dt>3?Pt(O,_t,Lt):Pt(O,_t))||Lt);return Dt>3&&Lt&&Object.defineProperty(O,_t,Lt),Lt}function Tt(E,O){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(E,O)}function At(E){return ot(E)}function Et(E){return void 0===E?"latest":Bt(E)}function Bt(E){return void 0===E||null==E?null:function(E){return"latest"===E||"pending"===E||"earliest"===E}(E)?E:nt(E)}function Ot(E){return E.from=E.from,E.from&&(E.from=jt(E.from)),E.to&&(E.to=jt(E.to)),void 0!==E.gasPrice&&(E.gasPrice=et(E.gasPrice)),void 0!==E.gas&&(E.gas=et(E.gas)),void 0!==E.value&&(E.value=et(E.value)),void 0!==E.nonce&&(E.nonce=et(E.nonce)),E.data&&!E.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(E.data)&&(E.data="0x"+E.data),E}function St(E){if("string"!=typeof E)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(E));if(0!==E.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(E));if(66!==E.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(E));return E}function Ct(E){if("object"!=typeof E)throw new Error("Did not provide transaction options");if(!E.from)throw new Error('Missing "from" in transaction options');return E.from=jt(E.from),E.to&&(E.to=jt(E.to)),void 0!==E.gasPrice&&(E.gasPrice=et(E.gasPrice)),void 0!==E.gas&&(E.gas=et(E.gas)),void 0!==E.value&&(E.value=et(E.value)),void 0!==E.nonce&&(E.nonce=et(E.nonce)),E.data&&!E.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(E.data)&&(E.data="0x"+E.data),E}function It(E){return E?(null!==E.blockNumber&&(E.blockNumber=Z(E.blockNumber)),null!==E.transactionIndex&&(E.transactionIndex=Z(E.transactionIndex)),E.nonce=Z(E.nonce),E.gas=Z(E.gas),E.gasPrice=ot(E.gasPrice),E.value=ot(E.value),E):null}function Mt(E){return E?(E.gasLimit=Z(E.gasLimit),E.gasUsed=Z(E.gasUsed),E.size=Z(E.size),E.timestamp=Z(E.timestamp),null!==E.number&&(E.number=Z(E.number)),E.difficulty=ot(E.difficulty),E.totalDifficulty=ot(E.totalDifficulty),bt(E.transactions)&&E.transactions.forEach((function(O,_t){yt(O)||(E.transactions[_t]=It(O)||E.transactions[_t])})),E):null}function Rt(E){return E?(E.blockNumber&&(E.blockNumber=Z(E.blockNumber)),E.transactionIndex&&(E.transactionIndex=Z(E.transactionIndex)),E.logIndex&&(E.logIndex=Z(E.logIndex)),E):E}function jt(E){if(lt(E))return E;if(ht(E))return"0x"+E;throw new Error(`Invalid address: ${JSON.stringify(E)}`)}E.TransactionStatus=void 0,(je=E.TransactionStatus||(E.TransactionStatus={})).pending="pending",je.confirmed="confirmed",je.failed="failed",E.TransactionType=void 0,(We=E.TransactionType||(E.TransactionType={})).queued="queued",We.dropped="dropped",We.replaced="replaced",We.pending="pending",We.reverted="reverted",We.confirmed="confirmed",E.messageId=0;class qt{constructor(E){this.callName=E.callName,this.params=E.params||0,this.inputFormatter=E.inputFormatter||null,this.outputFormatter=E.outputFormatter}validateArgs(E){if(E.length!==this.params)throw O=this.callName,_t=E.length,Ft=this.params,new Error(`Invalid number of input parameters to RPC method "${O}" given: ${_t}, expected: ${Ft}`);var O,_t,Ft}formatInput(E){return this.inputFormatter?this.inputFormatter.map((function(O,_t){return O?O(E[_t]):E[_t]})):E}formatOutput(E){return null!==E?this.outputFormatter(E):null}toPayload(E){let O=this.formatInput(E);return this.validateArgs(O),{method:this.callName,params:O}}async execute(E,...O){let _t=this.toPayload(O);if(!E)throw new Error("Missing RequestManager in method#exec");const Ft=await E.sendAsync(_t);return this.formatOutput(Ft)}}class $t{constructor(E){this.getter=E.getter,this.outputFormatter=E.outputFormatter}formatOutput(E){return this.outputFormatter(E)}async execute(E,...O){const _t=await E.sendAsync({method:this.getter,params:[]});return this.formatOutput(_t)}}function Ht(E){return new Promise((O=>setTimeout(O,E)))}function Gt(O,_t){const Ft=E.eth[_t];if(!Ft)throw new Error(`Could not find the method/property named ${_t.toString()}`);Object.defineProperty(O,_t,{value:function(){return Ft.execute(this,...arguments)}})}E.eth=void 0,(Ve=E.eth||(E.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),Ve.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),Ve.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),Ve.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(E){return!!E}],outputFormatter:Mt}),Ve.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(E){return!!E}],outputFormatter:Mt}),Ve.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ve.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ve.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ve.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),Ve.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ve.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ve.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(E){return E?(null!==E.blockNumber&&(E.blockNumber=Z(E.blockNumber)),null!==E.transactionIndex&&(E.transactionIndex=Z(E.transactionIndex)),E.cumulativeGasUsed=Z(E.cumulativeGasUsed),E.gasUsed=Z(E.gasUsed),E.logs&&bt(E.logs)&&(E.logs=E.logs.map((function(E){return Rt(E)}))),E.status=Z(E.status||""),E):null}}),Ve.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),Ve.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),Ve.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),Ve.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),Ve.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),Ve.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),Ve.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),Ve.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),Ve.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),Ve.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),Ve.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),Ve.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),Ve.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(E){return E?(E.startingBlock=Z(E.startingBlock),E.currentBlock=Z(E.currentBlock),E.highestBlock=Z(E.highestBlock),E.knownStates&&(E.knownStates=Z(E.knownStates),E.pulledStates=Z(E.pulledStates)),E):E}}),Ve.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),Ve.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),Ve.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),Ve.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),Ve.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),Ve.net_version=new $t({getter:"net_version",outputFormatter:Y}),Ve.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),Ve.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),Ve.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),Ve.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),Ve.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),Ve.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),Ve.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),Ve.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),Ve.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),Ve.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),Ve.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),Ve.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(E){return E}],outputFormatter:nt}),Ve.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ve.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ve.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),Ve.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),Ve.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),Ve.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),Ve.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),Ve.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),Ve.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),Ve.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),Ve.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(E){this.provider=E,this.requests=new Map}async sendAsync(E){const O=await this.provider;if(!O)throw new Error("Provider not set or invalid");let _t=Nt(E.method,E.params);const Pt=Ft();return this.requests.set(_t.id,Pt),O.sendAsync(_t,((E,O)=>{this.requests.delete(_t.id),E?Pt.reject(E):xt(O)?Pt.resolve(O.result):Pt.reject(function(E){let O=E&&E.error&&E.error.message?E.error.message:"Invalid JSON RPC response: "+JSON.stringify(E);return new Error(O)}(O))})),Pt}setProvider(E){this.provider=E}async getConfirmedTransaction(E){const O=await this.waitForCompletion(E);if(this.isFailure(O))throw new Error(`Transaction "${E}" failed`);return O}async waitForCompletion(O,_t){const Ft=St(O);if(await this.isTxDropped(Ft,_t)){const O=await this.getTransactionAndReceipt(Ft);return Object.assign(Object.assign({},O),{status:E.TransactionStatus.failed})}for(;;){const O=await this.getTransactionAndReceipt(Ft);if(!this.isPending(O)&&O.receipt)return Object.assign(Object.assign({},O),{status:this.isFailure(O)?E.TransactionStatus.failed:E.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(O){let _t,Ft=null;const Pt=St(O);try{const E=(await this.eth_accounts())[0];E&&(Ft=await this.eth_getTransactionCount(E,"latest"))}catch(E){Ft=null}try{if(_t=await this.eth_getTransactionByHash(Pt),null==_t)return null}catch(E){return null}if(null==_t.blockNumber){if(null!=Ft){if(_t.nonce<Ft)return{hash:Pt,type:E.TransactionType.replaced,nonce:_t.nonce};if(_t.nonce>Ft)return{hash:Pt,type:E.TransactionType.queued,nonce:_t.nonce}}return Object.assign({type:E.TransactionType.pending},_t)}let Dt;try{if(Dt=await this.eth_getTransactionReceipt(Pt),null==Dt||0===Dt.status)return Object.assign({type:E.TransactionType.reverted},_t)}catch(E){return null}return Object.assign(Object.assign({type:E.TransactionType.confirmed},_t),{receipt:Dt})}async isTxDropped(E,O=15){let _t=O;for(;_t>0;){if(null!==await this.getTransactionAndReceipt(E))return!1;_t-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(E){E=St(E);const[O,_t]=await Promise.all([this.eth_getTransactionByHash(E),this.eth_getTransactionReceipt(E)]);return Object.assign(Object.assign({},O),{receipt:_t})}isPending(E){return E&&null===E.blockNumber}isFailure(E){return E&&(!E.receipt||0===E.receipt.status)}}function Jt(E){return"slice"in E&&E.slice||(E.slice=function(){var O=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(E,O))}),E}function Wt(E){if(null==E)throw U("cannot convert null value to array",He,{arg:"value",value:E});if(E instanceof Uint8Array)return Jt(new Uint8Array(E));if("string"==typeof E){let Ft=E.match(/^(0x)?[0-9a-fA-F]*$/);if(!Ft)throw U("invalid hexidecimal string",He,{arg:"value",value:E});if("0x"!==Ft[1])throw U("hex string must have 0x prefix",He,{arg:"value",value:E});(E=E.substring(2)).length%2&&(E="0"+E);for(var O=[],_t=0;_t<E.length;_t+=2)O.push(parseInt(E.substr(_t,2),16));return Jt(new Uint8Array(O))}if(function(E){if(!E||parseInt(String(E.length))!=E.length||"string"==typeof E)return!1;for(var O=0;O<E.length;O++){var _t=E[O];if(_t<0||_t>=256||parseInt(String(_t))!=_t)return!1}return!0}(E))return Jt(new Uint8Array(E));throw U("invalid arrayify value",void 0,{arg:"value",value:E,type:typeof E})}function Vt(E,O,_t){Object.defineProperty(E,O,{enumerable:!0,value:_t,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const Qe=new Ue(-1),Xe=new Ue(0),Ye=new Ue(1),Ke=new Ue("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(E){return function(E,O){function n(O){return new Error('unexpected character "'+E[O]+'" at position '+O+' in "'+E+'"')}for(var _t={type:"",name:"",state:{allowType:!0}},Ft=_t,Pt=0;Pt<E.length;Pt++){var Dt=E[Pt];switch(Dt){case"(":if(!Ft.state.allowParams)throw n(Pt);Ft.state.allowType=!1,Ft.type=te(Ft.type),Ft.components=[{type:"",name:"",parent:Ft,state:{allowType:!0}}],Ft=Ft.components[0];break;case")":delete Ft.state,"indexed"===Ft.name&&(Ft.indexed=!0,Ft.name=""),Ft.type=te(Ft.type);var Lt=Ft;if(!(Ft=Ft.parent))throw n(Pt);delete Lt.parent,Ft.state.allowParams=!1,Ft.state.allowName=!0,Ft.state.allowArray=!0;break;case",":delete Ft.state,"indexed"===Ft.name&&(Ft.indexed=!0,Ft.name=""),Ft.type=te(Ft.type);var Ut={type:"",name:"",parent:Ft.parent,state:{allowType:!0}};Ft.parent.components.push(Ut),delete Ft.parent,Ft=Ut;break;case" ":Ft.state.allowType&&""!==Ft.type&&(Ft.type=te(Ft.type),delete Ft.state.allowType,Ft.state.allowName=!0,Ft.state.allowParams=!0),Ft.state.allowName&&""!==Ft.name&&("indexed"===Ft.name?(Ft.indexed=!0,Ft.name=""):Ft.state.allowName=!1);break;case"[":if(!Ft.state.allowArray)throw n(Pt);Ft.type+=Dt,Ft.state.allowArray=!1,Ft.state.allowName=!1,Ft.state.readArray=!0;break;case"]":if(!Ft.state.readArray)throw n(Pt);Ft.type+=Dt,Ft.state.readArray=!1,Ft.state.allowArray=!0,Ft.state.allowName=!0;break;default:if(Ft.state.allowType)Ft.type+=Dt,Ft.state.allowParams=!0,Ft.state.allowArray=!0;else if(Ft.state.allowName)Ft.name+=Dt,delete Ft.state.allowArray;else{if(!Ft.state.readArray)throw n(Pt);Ft.type+=Dt}}}if(Ft.parent)throw new Error("unexpected eof");return delete _t.state,"indexed"===Ft.name&&(Ft.indexed=!0,Ft.name=""),_t.type=te(_t.type),_t}(E)}function te(E){return E.match(/^uint($|[^1-9])/)?E="uint256"+E.substring(4):E.match(/^int($|[^1-9])/)&&(E="int256"+E.substring(3)),E}const Ze=new RegExp(/^bytes([0-9]*)$/),$e=new RegExp(/^(u?int)([0-9]*)$/),Je=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(E,O){var _t=E.match($e);return _t&&parseInt(_t[2])<=48?O.toNumber():O};class ie{constructor(E,O,_t,Ft="",Pt){this.coerceFunc=E,this.name=O,this.type=_t,this.localName=Ft,this.dynamic=Pt}}class se extends ie{constructor(E){super(E.coerceFunc,E.name,E.type,void 0,E.dynamic),Vt(this,"coder",E)}encode(E){return this.coder.encode(E)}decode(E,O){return this.coder.decode(E,O)}}class ae extends ie{constructor(E,O){super(E,"null","",O,!1)}encode(E){return Wt([])}decode(E,O){if(O>E.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(E,O){return new Ue(E.toString(2).substr(-O),2)}class ue extends ie{constructor(E,O,_t,Ft){const Pt=(_t?"int":"uint")+8*O;super(E,Pt,Pt,Ft,!1),this.size=O,this.signed=_t}encode(E){try{let O=ot(E);if(this.signed){let E=ce(Ke,8*this.size-1);if(O.gt(E))throw new Error("out-of-bounds");if(E=E.plus(Ye).multipliedBy(Qe),O.lt(E))throw new Error("out-of-bounds")}else if(O.lt(Xe)||O.gt(ce(Ke,8*this.size)))throw new Error("out-of-bounds");O=ce(st(O,8*this.size),8*this.size),this.signed&&(O=st(ut(O,8*this.size),256));let _t=H(st(O).toString(16),64);if(-1!=_t.indexOf("NaN"))throw U("invalid number value, NaN",He,{arg:this.localName,coderType:this.name,value:E,v:O,twosComplement:st(O),twosComplement16:st(O).toString(16),pad:H(st(O).toString(16),64),size:this.size});return D(_t)}catch(O){throw U("invalid number value",He,{arg:this.localName,coderType:this.name,value:E,message:O.toString()})}}decode(E,O){if(E.length<O+32)throw U("insufficient data for "+this.name+" type",He,{arg:this.localName,coderType:this.name,value:nt(E.slice(O,O+32))});var _t=32-this.size,Ft=new Ue(q(E.slice(O+_t,O+32)),16);return Ft=this.signed?ut(Ft,8*this.size):ce(Ft,8*this.size),{consumed:32,value:this.coerceFunc(this.name,Ft)}}}var tn=new ue((function(E,O){return O}),32,!1,"none");class he extends ie{constructor(E,O,_t){const Ft="bytes"+O;super(E,Ft,Ft,_t,!1),this.length=O}encode(E){var O=new Uint8Array(32);try{if("string"==typeof E&&E.length%2!=0)throw new Error("hex string cannot be odd-length");let _t=Wt(E);if(_t.length>this.length)throw new Error("incorrect data length");O.set(_t)}catch(O){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",He,{arg:this.localName,coderType:this.name,value:O.value||E,details:O.message})}return O}decode(E,O){if(E.length<O+32)throw U("insufficient data for "+this.name+" type",He,{arg:this.localName,coderType:this.name,value:nt(E.slice(O,O+32))});return{consumed:32,value:this.coerceFunc(this.name,E.slice(O,O+this.length))}}}function pe(E){var O=32*Math.ceil(E.length/32),_t=new Uint8Array(O-E.length);return z(tn.encode(E.length),E,_t)}function fe(E,O,_t){if(E.length<O+32)throw U("insufficient data for dynamicBytes length",He,{arg:_t,coderType:"dynamicBytes",value:nt(E.slice(O,O+32))});var Ft=tn.decode(E,O).value;try{Ft=Ft.toNumber()}catch(E){throw E("dynamic bytes count too large",He,{arg:_t,coderType:"dynamicBytes",value:Ft.toString()})}if(E.length<O+32+Ft)throw U("insufficient data for dynamicBytes type",He,{arg:_t,coderType:"dynamicBytes",value:nt(E.slice(O,O+32+Ft))});return{consumed:32+32*Math.ceil(Ft/32),value:E.slice(O+32,O+32+Ft)}}function de(E){return 32*Math.ceil(E/32)}function ge(E,O){if(Array.isArray(O));else{if(!O||"object"!=typeof O)throw U("invalid tuple value",He,{coderType:"tuple",value:O});var _t=[];E.forEach((function(E){_t.push(O[E.localName])})),O=_t}if(E.length!==O.length)throw U("types/value length mismatch",He,{coderType:"tuple",value:O});var Ft=[];E.forEach((function(E,_t){Ft.push({dynamic:E.dynamic,value:E.encode(O[_t])})}));var Pt=0,Dt=0;Ft.forEach((function(E){E.dynamic?(Pt+=32,Dt+=de(E.value.length)):Pt+=de(E.value.length)}));var Lt=0,Ut=Pt,Xt=new Uint8Array(Pt+Dt);return Ft.forEach((function(E){E.dynamic?(Xt.set(tn.encode(Ut),Lt),Lt+=32,Xt.set(E.value,Ut),Ut+=de(E.value.length)):(Xt.set(E.value,Lt),Lt+=de(E.value.length))})),Xt}class me extends Array{}class ye extends ie{constructor(E,O,_t,Ft){super(E,"array",O.type+"["+(_t>=0?_t:"")+"]",Ft,-1===_t||O.dynamic),this.coder=O,this.length=_t}encode(E){if(!Array.isArray(E))throw U("expected array value",He,{arg:this.localName,coderType:"array",value:E});var O=this.length,_t=new Uint8Array(0);-1===O&&(O=E.length,_t=tn.encode(O)),function(E,O,_t){if(_t||(_t=""),E<O)throw U("missing argument"+_t,"MISSING_ARGUMENT",{count:E,expectedCount:O});if(E>O)throw U("too many arguments"+_t,"UNEXPECTED_ARGUMENT",{count:E,expectedCount:O})}(O,E.length,"in coder array"+(this.localName?" "+this.localName:""));for(var Ft=[],Pt=0;Pt<E.length;Pt++)Ft.push(this.coder);return z(_t,ge(Ft,E))}decode(E,O){var _t=0,Ft=this.length;if(-1===Ft){try{var Pt=tn.decode(E,O)}catch(E){throw E("insufficient data for dynamic array length",He,{arg:this.localName,coderType:"array",value:E.value})}try{Ft=Pt.value.toNumber()}catch(E){throw E("array count too large",He,{arg:this.localName,coderType:"array",value:Pt.value.toString()})}_t+=Pt.consumed,O+=Pt.consumed}for(var Dt=[],Lt=0;Lt<Ft;Lt++)Dt.push(new se(this.coder));var Ut=function(E,O,_t){var Ft=_t,Pt=0,Dt=[];return E.forEach((function(E){if(E.dynamic){var Lt=tn.decode(O,_t);(Ut=E.decode(O,Ft+Lt.value.toNumber())).consumed=Lt.consumed}else var Ut=E.decode(O,_t);null!=Ut.value&&Dt.push(Ut.value),_t+=Ut.consumed,Pt+=Ut.consumed})),{value:Dt,consumed:Pt}}(Dt,E,O);return Ut.consumed+=_t,Ut.value=this.coerceFunc(this.type,Ut.value),Ut}}class we extends ie{constructor(E,O,_t){var Ft=!1,Pt=[];O.forEach((function(E){E.dynamic&&(Ft=!0),Pt.push(E.type)})),super(E,"tuple","tuple("+Pt.join(",")+")",_t,Ft),this.coders=O}encode(E){return ge(this.coders,E)}decode(E,O){var _t=function(E,O,_t){var Ft=_t,Pt=0,Dt=new me;return E.forEach((function(E){if(E.dynamic){var Lt=tn.decode(O,_t);(Ut=E.decode(O,Ft+Lt.value.toNumber())).consumed=Lt.consumed}else var Ut=E.decode(O,_t);null!=Ut.value&&Dt.push(Ut.value),_t+=Ut.consumed,Pt+=Ut.consumed})),E.forEach((function(E,O){let _t=E.localName;_t&&("length"===_t&&(_t="_length"),null==Dt[_t]&&(Dt[_t]=Dt[O]))})),{value:Dt,consumed:Pt}}(this.coders,E,O);return _t.value=this.coerceFunc(this.type,_t.value),_t}}const en={address:class extends ie{constructor(E,O){super(E,"address","address",O,!1)}encode(E){let O=new Uint8Array(32);const _t=E.trim();if(!ht(_t))throw U("invalid address format",He,{arg:this.localName,coderType:"address",value:E});try{O.set(D(jt(_t)),12)}catch(O){throw U(`invalid address (${O.message})`,He,{arg:this.localName,coderType:"address",value:E})}return O}decode(E,O){if(E.length<O+32)throw U("insufficuent data for address type",He,{arg:this.localName,coderType:"address",value:nt(E.slice(O,O+32)),missingBytes:O+32-E.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(E.slice(O+12,O+32))))}}},bool:class extends ie{constructor(E,O){super(E,"bool","bool",O,!1)}encode(E){return tn.encode(E?1:0)}decode(E,O){try{var _t=tn.decode(E,O)}catch(E){if("insufficient data for uint256 type"===E.reason)throw U("insufficient data for boolean type",He,{arg:this.localName,coderType:"boolean",value:E.value});throw E}return{consumed:_t.consumed,value:this.coerceFunc("bool",!_t.value.isZero())}}},string:class extends ie{constructor(E,O){super(E,"string","string",O,!0)}encode(E){if("string"!=typeof E)throw U("invalid string value",He,{arg:this.localName,coderType:"string",value:E});return pe(M(E))}decode(E,O){var _t=fe(E,O,this.localName);return _t.value=this.coerceFunc("string",R(_t.value)),_t}},bytes:class extends ie{constructor(E,O){super(E,"bytes","bytes",O,!0)}encode(E){try{return pe(Wt(E))}catch(E){throw E("invalid bytes value",He,{arg:this.localName,coderType:"bytes",value:E.value})}}decode(E,O){var _t=fe(E,O,this.localName);return _t.value=this.coerceFunc("bytes",_t.value),_t}},function:class extends he{constructor(E,O){super(E,24,O)}}};function be(E,O){var _t,Ft=en[O.type];if(Ft)return new Ft(E,O.name);if(_t=O.type.match($e)){let Ft=parseInt(_t[2]||"256");if(0===Ft||Ft>256||Ft%8!=0)throw U("invalid "+_t[1]+" bit length",He,{arg:"param",value:O});return new ue(E,Ft/8,"int"===_t[1],O.name)}if(_t=O.type.match(Ze)){let Ft=parseInt(_t[1]);if(0===Ft||Ft>32)throw U("invalid bytes length",He,{arg:"param",value:O});return new he(E,Ft,O.name)}if(_t=O.type.match(Je)){const Ft=Object.assign({},O);let Pt=parseInt(_t[2]||"-1");return Ft.type=_t[1],new ye(E,be(E,Ft),Pt,O.name)}if("tuple"===O.type.substring(0,5))return function(E,O,_t){O||(O=[]);var Ft=O.map((O=>be(E,O)));return new we(E,Ft,_t)}(E,O.components,O.name);if(""===O.type)return new ae(E,O.name);throw U("invalid type",He,{arg:"type",value:O.type,fullType:O})}class _e{constructor(E){!function(E,O){if(!(E instanceof O))throw U("missing new","MISSING_NEW",{name:O.name})}(this,_e),E||(E=oe),Vt(this,"coerceFunc",E)}encode(E,O){if(E.length!==O.length)throw U("types/values length mismatch",He,{count:{types:E.length,values:O.length},value:{types:E,values:O}});const _t=E.map((E=>"string"==typeof E?Qt(E):E)).map((E=>be(this.coerceFunc,E)));return new we(this.coerceFunc,_t,"_").encode(O)}decode(E,O){const _t=E.map((E=>"string"==typeof E?Qt(E):E)).map((E=>be(this.coerceFunc,E)));return new we(this.coerceFunc,_t,"_").decode(O,0).value}}const nn=new _e;var rn;!function(E){E.encodeParams=function(E,O){return q(nn.encode(E,O))},E.decodeParams=function(E,O){if(E.length>0&&(!O||"0x"===O||"0X"===O))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return nn.decode(E,D("0x"+O.replace(/0x/i,"")))}}(rn||(rn={}));class xe{constructor(E){this.json=E,this._inputTypes=E.inputs||[],this._outputTypes=E.outputs||[],this._constant=!!E.constant,this._payable=!!E.payable||"payable"===E.stateMutability,this.needsToBeTransaction=this._payable||"constant"in E&&!E.constant||"nonpayable"===E.stateMutability,this._name=G(E)}extractDefaultBlock(E){return E.length>this._inputTypes.length&&!wt(E[E.length-1])&&Et(E.pop())||"latest"}validateArgs(E){if(E.some((E=>void 0===E)))throw new Error("Invalid call, some arguments are undefined");let O=E.filter((function(E){return!(!0===wt(E)&&!1===bt(E)&&!1===mt(E)&&!(E instanceof Uint8Array))}));if(O.length!==this._inputTypes.length)throw _t=O.length,Ft=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${_t}, expected: ${Ft}`);var _t,Ft}toPayload(E){let O={to:void 0,data:void 0,value:void 0,from:void 0};E.length>this._inputTypes.length&&wt(E[E.length-1])&&(O=E.pop()),this.validateArgs(E);const _t=this.signature();let Ft=rn.encodeParams(this._inputTypes,E);return 0==Ft.indexOf("0x")&&(Ft=Ft.substr(2)),O.data="0x"+_t+Ft,O}signature(){return $(this._name).slice(0,8)}unpackOutput(E){if(!E)return;const O=E.length>=2?E.slice(2):E;let _t=rn.decodeParams(this._outputTypes,O);return 1===_t.length?_t[0]:_t}async execute(E,O,..._t){if(!E)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const Ft=this.toPayload(_t);if(Ft.to=O,Ft.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!Ft.from)throw new Error('Missing "from" in transaction options');return await E.eth_sendTransaction(Ft)}{const Ft=this.extractDefaultBlock(_t),Pt=this.toPayload(_t);Pt.to=O;const Dt=await E.eth_call(Pt,Ft);return this.unpackOutput(Dt)}}estimateGas(E,O,..._t){if(!(E instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let Ft=this.toPayload(_t);return Ft.to=O,E.eth_estimateGas(Ft)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(E){let O=this.displayName();const _t=Object.assign(((...O)=>this.execute(E.requestManager,E.address,...O)),{estimateGas:this.estimateGas.bind(this,E.requestManager,E.address),toPayload:(...E)=>this.toPayload(E)});E[O]||(E[O]=_t),E[O][this.typeName()]=_t}}function ke(E){if(null==E)return null;const O=String(E).toString();return 0===O.indexOf("0x")?O:q(M(O))}class Te{constructor(E){this.requestManager=E,this.isStarted=!1,this.isDisposed=!1,this.formatter=E=>E,this.filterId=Ft(),this.callbacks=[],this.stopSemaphore=Ft()}async watch(E){if(this.isDisposed)throw new Error("The filter was disposed");E&&(this.callbacks.push(E),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const E=await this.getNewFilter();if(!E)throw new Error("Could not create a filter, response: "+JSON.stringify(E));this.filterId.resolve(E)}catch(E){throw E}this.stopSemaphore=Ft(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const E=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${E}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const E=await this.getChanges();this.callbacks.forEach((O=>{this.formatter?E.forEach((E=>{O(this.formatter(E))})):E.forEach((E=>O(E)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=Ft(),setTimeout((E=()=>this.poll(),function(){E().catch((E=>console.error(E)))}),500))}else this.stopSemaphore.resolve(1);var E}}class Ae extends Te{constructor(E,O,_t=(E=>E)){super(E),this.requestManager=E,this.options=O,this.formatter=_t,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(E){return ke(E)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const E=await this.filterId;return this.requestManager.eth_getFilterLogs(E)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const E=await this.filterId;return this.requestManager.eth_getFilterChanges(E)}async uninstall(){const E=await this.filterId;return this.requestManager.eth_uninstallFilter(E)}}class Ee{constructor(E,O,_t){this.requestManager=E,this.address=_t,this._anonymous=!1,this._params=O.inputs||[],this._name=G(O),this._anonymous=O.anonymous||!1}types(E){return this._params.filter((function(O){return O.indexed===E}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(E={},O={}){let _t={topics:[],address:this.address};void 0!==O.fromBlock&&(_t.fromBlock=Bt(O.fromBlock)||void 0),void 0!==O.toBlock&&(_t.toBlock=Bt(O.toBlock)||void 0),_t.topics=_t.topics||[],this._anonymous||_t.topics.push("0x"+this.signature());let Ft=this._params.filter((function(E){return!0===E.indexed})).map((function(O){let _t=E[O.name];return null==_t?null:bt(_t)?_t.map((function(E){return"0x"+rn.encodeParams([O],[E])})):"0x"+rn.encodeParams([O],[_t])}));return _t.topics=_t.topics.concat(Ft),_t}decode(E){E.data=E.data||"",E.topics=E.topics||[];let O=(this._anonymous?E.topics:E.topics.slice(1)).map((function(E){return E.slice(2)})).join(""),_t=rn.decodeParams(this.types(!0),O),Ft=E.data.slice(2),Pt=rn.decodeParams(this.types(!1),Ft);const Dt=this._params.reduce((function(E,O){return E[O.name]=O.indexed?_t.shift():Pt.shift(),E}),{});return Object.assign(Object.assign({},Rt(E)),{event:this.displayName(),address:E.address,args:Dt})}async execute(E,O){let _t=this.encode(E,O),Ft=this.decode.bind(this);return new Ae(this.requestManager,_t,Ft)}attachToContract(E){let O=this.execute.bind(this),_t=this.displayName();E.events[_t]||(E.events[_t]=O),E.events[_t][this.typeName()]=this.execute.bind(this,E)}}class Be{constructor(E,O,_t){this._requestManager=E,this._json=O,this._address=_t}encode(E={}){let O={address:this._address};return void 0!==E.fromBlock&&(O.fromBlock=Bt(E.fromBlock)||void 0),void 0!==E.toBlock&&(O.toBlock=Bt(E.toBlock)||void 0),O}decode(E){E.data=E.data||"";let O=bt(E.topics)&&yt(E.topics[0])?E.topics[0].slice(2):"",_t=this._json.filter((function(E){return O===$(G(E))}))[0];return _t?new Ee(this._requestManager,_t,this._address).decode(E):Rt(E)}async execute(E){let O=this.encode(E),_t=this.decode.bind(this);return new Ae(this._requestManager,O,_t)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(E,O,_t){var Ft;this.requestManager=E,this.abi=O,this.address=_t,this.events={},this.transactionHash=null,this.address=_t,this.abi=O,(Ft=this).abi.filter((function(E){return"function"===E.type})).map((function(E){return new xe(E)})).forEach((function(E){E.attachToContract(Ft)})),this.allEvents=function(E){let O=E.abi.filter((function(E){return"event"===E.type})),_t=new Be(E.requestManager,O,E.address);return O.map((function(O){return new Ee(E.requestManager,O,E.address)})).forEach((function(O){O.attachToContract(E)})),_t.getAllEventsFunction()}(this)}}E.AbstractFilter=Te,E.BigNumber=Ue,E.Contract=Oe,E.ContractFactory=class{constructor(E,O){this.requestManager=E,this.abi=O}async deploy(...E){let O,_t=E[E.length-1];if(wt(_t)&&!bt(_t)&&(O=E.pop()),!O)throw new Error("Missing options object");if(!O.data||"string"!=typeof O.data)throw new Error("Invalid options.data");if(Z(O.value)>0&&!(this.abi.filter((function(O){return"constructor"===O.type&&O.inputs.length===E.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let Pt=(Dt=this.abi,Lt=E,Dt.filter((function(E){return"constructor"===E.type&&E.inputs&&E.inputs.length===Lt.length})).map((function(E){return E.inputs||[]})).map((function(E){return rn.encodeParams(E,Lt)}))[0]||"");var Dt,Lt;O.data+=Pt,O.gas||(O.gas=await this.requestManager.eth_estimateGas(O));const Ut=await this.requestManager.eth_sendTransaction(O);if(!Ut)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Xt=await async function(E,O){const _t=Ft();let Pt=0;const o=()=>{Pt++,Pt>50?_t.reject(new Error("Contract transaction couldn't be found after 50 blocks")):E.eth_getTransactionReceipt(O).then((E=>{E&&E.blockHash?_t.resolve(E):setTimeout(o,1e3)}),(E=>_t.reject(E)))};o();const Dt=await _t,Lt=await E.eth_getCode(Dt.contractAddress,"latest");if(Lt&&Lt.length>3)return Dt.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:Lt,receipt:Dt})}(this.requestManager,Ut),Kt=await this.at(Xt);return Kt.transactionHash=Ut,Kt}async at(E){if(!ht(E))throw new TypeError(`Invalid address ${JSON.stringify(E)}`);return new Oe(this.requestManager,this.abi,E)}},E.EthBlockFilter=class extends Ae{constructor(E){super(E,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},E.EthFilter=Ae,E.EthPendingTransactionFilter=class extends Ae{constructor(E){super(E,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},E.HTTPProvider=class{constructor(E,O={}){this.host=E,this.options=O,this.debug=!1,this.host=E||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(E,O){try{let _t=null;if(_t=E instanceof Array?E.map((E=>e(E))):e(E),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const Ft={body:JSON.stringify(_t),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+Ft.body),fetch(this.host,Ft).then((async E=>{if(E.ok){const _t=await E.json();this.debug&&console.log("RECV << "+JSON.stringify(_t)),_t.error?O(Object.assign(new Error(_t.error.json||_t.error),_t.error)):O(null,_t)}else this.debug&&console.log("ERR << "+JSON.stringify(E)),O(new Error("External error. response code: "+E.status))}),(E=>{this.debug&&console.log("ERR << "+JSON.stringify(E)),O(E)}))}catch(E){this.debug&&console.log("ERR << "+JSON.stringify(E)),O(E)}}},E.Method=qt,E.Property=$t,E.RequestManager=zt,E.SHHFilter=class extends Te{constructor(E,O){super(E),this.requestManager=E,this.options=O,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(E){return ke(E)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const E=await this.filterId;return this.requestManager.shh_getMessages(E)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const E=await this.filterId;return this.requestManager.shh_getFilterChanges(E)}async uninstall(){const E=await this.filterId;return this.requestManager.shh_uninstallFilter(E)}},E.SolidityEvent=Ee,E.SolidityFunction=xe,E.WebSocketProvider=class{constructor(E,O={}){this.url=E,this.options=O,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const E=this.connection;this.timeout(new Error("Provider disposed.")),E.then((E=>E.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(E,O){const _t=[];let Pt;if(E instanceof Array)Pt=Promise.all(E.map((E=>{const O=Ft();try{const Ft=e(E);_t.push(Ft),this.responseCallbacks.set(Ft.id,O)}catch(E){O.reject(E)}return O})));else{const O=Ft();try{const Ft=e(E);_t.push(Ft),this.responseCallbacks.set(Ft.id,O)}catch(E){O.reject(E)}Pt=O}Pt.then((E=>O(null,E)),(E=>O(E))),this.connection.then((E=>{_t.forEach((O=>{const _t=JSON.stringify(O);this.debug&&console.log("SEND >> "+_t),E.send(_t)}))}),(E=>{O(E)}))}parseResponse(E){let O=[];return E.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((E=>{let _t=E;this.lastChunk&&(_t=this.lastChunk+_t);let Ft=null;try{Ft=JSON.parse(_t)}catch(E){return this.lastChunk=_t,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",Ft&&O.push(Ft)})),O}processMessage(E){if("id"in E){const O=E.id,_t=this.responseCallbacks.get(O);if(!_t)return void console.error("Error: Received a response for an unknown request",E);this.responseCallbacks.delete(O),"error"in E?_t.reject(Object.assign(new Error(E.error.message||E.error),E.error)):"result"in E&&_t.resolve(E)}else this.notificationCallbacks.forEach((O=>O(null,E)))}timeout(E){this.connection&&this.connection.isPending||(this.connection=Ft());const O=E||new Error("Connection timeout");this.responseCallbacks.forEach((E=>E.reject(O))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((E=>E.close())),this.connection&&this.connection.isPending||(this.connection=Ft()),this.lastChunk="";let E=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!E)throw new Error("Please provide a WebSocketConstructor");const O=new E(this.url,this.options.protocol);O.onopen=()=>{this.connection.resolve(O)},O.onerror=E=>{const O=new Error("Error in web socket");O.data=E,this.timeout(O)},O.onclose=E=>{this.timeout(new Error(`Connection closed (${E&&E.reason||"Unknown reason"})`))},O.onmessage=E=>{let O="string"==typeof E.data?E.data:"";this.debug&&console.log("RECV << "+E.data),this.parseResponse(O).forEach((E=>{E instanceof Array?E.forEach((E=>this.processMessage(E))):this.processMessage(E)}))}}},E.bytesToHex=q,E.bytesToUtf8String=R,E.concatBytes=z,E.default=zt,E.extractDisplayName=W,E.extractTypeName=V,E.fromAscii=function(E,O=0){let _t="";for(let O=0;O<E.length;O++){let Ft=E.charCodeAt(O).toString(16);_t+=Ft.length<2?"0"+Ft:Ft}return"0x"+_t.padEnd(O,"0")},E.fromDecimal=et,E.fromTwosComplement=ut,E.fromWei=function(E,O){let _t=ot(E).dividedBy(rt(O));return mt(E)?_t:_t.toString(10)},E.getAddress=ct,E.getValueOfUnit=rt,E.hexToBytes=D,E.isAddress=ht,E.isArray=bt,E.isBigNumber=mt,E.isBloom=function(E){return!!/^(0x)?[0-9a-f]{512}$/i.test(E)&&!!/^(0x)?[0-9a-f]{512}$/i.test(E)},E.isBoolean=vt,E.isChecksumAddress=pt,E.isFunction=function(E){return"function"==typeof E},E.isHex=function(E){return"string"==typeof E&&/^0x[0-9a-fA-F]+$/.test(E)},E.isJson=function(E){try{return!!JSON.parse(E)}catch(E){return!1}},E.isObject=wt,E.isStrictAddress=lt,E.isString=yt,E.isTopic=function(E){return!!/^(0x)?[0-9a-f]{64}$/i.test(E)&&!!/^(0x)?[0-9a-f]{64}$/i.test(E)},E.isValidResponse=xt,E.padLeft=H,E.padRight=function(E,O,_t){return E+new Array(O-E.length+1).join(_t||"0")},E.sha3=$,E.signedIsNegative=at,E.stringToUtf8Bytes=M,E.toAddress=gt,E.toArray=dt,E.toAscii=function(E){let O="",_t=0,Ft=E.length;for("0x"===E.substring(0,2)&&(_t=2);_t<Ft;_t+=2){let Ft=parseInt(E.substr(_t,2),16);O+=String.fromCharCode(Ft)}return O},E.toBatchPayload=function(E){return E.map((function(E){return Nt(E.method,E.params)}))},E.toBigNumber=ot,E.toBoolean=tt,E.toChecksumAddress=ft,E.toData=X,E.toDecimal=Z,E.toHex=nt,E.toJsonRpcRequest=Nt,E.toNullDecimal=K,E.toString=Y,E.toStringData=Q,E.toTwosComplement=st,E.toWei=function(E,O){let _t=ot(E).times(rt(O));return mt(E)?_t:_t.toString(10)},E.transformToFullName=G,Object.defineProperty(E,"__esModule",{value:!0})})),define("metas/compicactus/compicactus",["require","exports","@compicactus/dcl-scene-utils"],(function(E,O,_t){Object.defineProperty(O,"__esModule",{value:!0}),O.Compicactus=void 0;var Ft=function(){function Compicactus(E,O){this.META_ID=300,this.compiEntities=[],engine.addSystem(new _t.CompiNPCSystem),this.refreshHost(O)}return Compicactus.prototype.update=function(E){},Compicactus.prototype.refreshHost=function(E){var O=this;if(this.compiEntities.forEach((function(E){engine.removeEntity(E)})),this.compiEntities=[],E.host_data){var Ft=JSON.parse(E.host_data),Pt=new _t.Blockchain(_t.NETWORK.MATIC,_t.CHARACTER.COMPICACTUS);Ft.compicactus.forEach((function(E){E.enable_editor&&(E.token_id=-1);var Ft=new _t.CompiNPC(E.token_id,Pt);Ft.addComponent(new Transform),engine.addEntity(Ft),Ft.getComponent(Transform).position.set(E.position.x,E.position.y,E.position.z),Ft.getComponent(Transform).rotation.setEuler(E.rotation.x,E.rotation.y,E.rotation.z),Ft.getComponent(Transform).scale.set(E.scale.x,E.scale.y,E.scale.z),E.face_user&&Ft.addComponent(new Billboard),O.compiEntities.push(Ft)}))}},Compicactus}();O.Compicactus=Ft})),define("src/game",["require","exports","metas/compicactus/compicactus"],(function(E,O,_t){Object.defineProperty(O,"__esModule",{value:!0}),engine.addSystem(new _t.Compicactus(null,{host_data:'\n  {\n    "compicactus": [\n      {\n        "position": {"x":6, "y":1, "z":8},\n        "rotation": {"x":0, "y":0, "z":0},\n        "scale": {"x":1, "y":1, "z":1},\n        "character": "compicactus",\n        "enable_editor": false,\n        "token_id": 2,\n        "face_user": false\n      },\n      {\n        "position": {"x":10, "y":1, "z":8},\n        "rotation": {"x":0, "y":0, "z":0},\n        "scale": {"x":1, "y":1, "z":1},\n        "character": "compicactus",\n        "enable_editor": true,\n        "token_id": 2,\n        "face_user": true\n      }\n    ]\n  }'}))}));